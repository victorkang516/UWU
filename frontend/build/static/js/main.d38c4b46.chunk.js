(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{134:function(e,t,c){},144:function(e,t,c){},145:function(e,t,c){},222:function(e,t,c){},223:function(e,t,c){},252:function(e,t,c){},270:function(e,t,c){},271:function(e,t,c){},272:function(e,t,c){},273:function(e,t,c){},274:function(e,t,c){},275:function(e,t,c){},276:function(e,t,c){},277:function(e,t,c){},278:function(e,t,c){},279:function(e,t,c){},280:function(e,t,c){},281:function(e,t,c){},282:function(e,t,c){},444:function(e,t,c){},445:function(e,t,c){},446:function(e,t,c){},447:function(e,t,c){},448:function(e,t,c){},449:function(e,t,c){},450:function(e,t,c){},451:function(e,t,c){},452:function(e,t,c){},453:function(e,t,c){"use strict";c.r(t);var n,a=c(1),s=c.n(a),r=c(195),o=c.n(r),i=(c(222),c(2)),l=(c(223),c(4)),u=c(9),j=c(12),d=c(217),b=c(14),h=c(15),p=new(function(){function e(){Object(b.a)(this,e),this.authenticated=!!localStorage.getItem("userData")}return Object(h.a)(e,[{key:"login",value:function(e,t){localStorage.setItem("userData",JSON.stringify(t)),this.authenticated=!0,e()}},{key:"logout",value:function(e){localStorage.clear(),this.authenticated=!1,e()}},{key:"getUserData",value:function(){return JSON.parse(localStorage.getItem("userData"))}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),m=c(0),O=["component"],f=function(e){var t=e.component,c=Object(d.a)(e,O);return Object(m.jsx)(u.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return console.log(p.isAuthenticated()),p.isAuthenticated()?Object(m.jsx)(t,Object(j.a)({},e)):Object(m.jsx)(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},x=(c(134),c(8)),v=c.n(x),g=c.p+"static/media/uwupic.de872405.png",N="https://uwushoppingsite.herokuapp.com",y=function(e){var t=Object(a.useState)(""),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),u=o[0],j=o[1];return Object(a.useEffect)((function(){console.log(n)}),[n]),Object(a.useEffect)((function(){console.log(u)}),[u]),Object(m.jsxs)("div",{className:"loginscreen",children:[Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsx)("img",{src:g,alt:"logo"}),Object(m.jsx)("h2",{children:"Welcome to UWU Shopping Site!!"})]}),Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h2",{children:"Welcome to Login page."}),Object(m.jsxs)("form",{className:"login-form",children:[Object(m.jsx)("h2",{children:"Log In"}),Object(m.jsx)("div",{className:"form-input",children:Object(m.jsx)("input",{name:"email",value:n,onChange:function(e){s(e.currentTarget.value)},placeholder:"Email"})}),Object(m.jsx)("div",{className:"form-input",children:Object(m.jsx)("input",{type:"password",name:"password",value:u,onChange:function(e){j(e.currentTarget.value)},placeholder:"Password"})}),Object(m.jsx)("div",{className:"form-input",children:Object(m.jsx)("button",{type:"submit",onClick:function(t){if(t.preventDefault(),""!==n&&""!==u){n&&!1!==/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(n)?v.a.get("".concat(N,"/users/").concat(n)).then((function(t){if(t.data&&t.data.email===n&&t.data.password===u){var c={userId:t.data._id,name:t.data.name};p.login((function(){e.history.push("/"),window.location.reload(!1)}),c)}else alert("Please key in the right info")})).catch((function(e){console.log(e)})):alert("Please key in the right email format")}else alert("Fill in the blanks")},children:"Login"})}),Object(m.jsxs)(l.b,{to:"/register",children:["Did not have an account? ",Object(m.jsx)("span",{children:"Register Here"})]})]})]})]})},S=c(11),w=c(3),k=c.n(w),C=c(5),I=(c(252),c(198)),P=c.n(I),D=c(199),E=c.n(D),T=(c(268),c(269),function(){return Object(m.jsx)("div",{className:"loadingscreen",children:Object(m.jsx)("div",{className:"loading"})})}),_=(c(270),function(e){var t=e._id,c=e.title,n=e.shopName;return Object(m.jsxs)("div",{className:"streaming-card",children:[Object(m.jsx)("div",{className:"gradient"}),Object(m.jsxs)(l.b,{to:"/streamingbuyer/".concat(t),children:[Object(m.jsx)("h3",{className:"streaming-title",children:c}),Object(m.jsx)("p",{className:"streaming-shopName",children:n})]}),Object(m.jsx)("img",{src:"http://cdn2.hubspot.net/hubfs/53/00-Blog_Thinkstock_Images/Live_Streaming_Video_Guide.jpg",className:"streaming-image",alt:"streamingImg"}),Object(m.jsx)("div",{className:"streaming-icon",children:"Live"})]})}),A=(c(271),function(e){e._id;var t=e.name,c=e.description,n=e.price,a=(e.countInStock,e.imageUrl);return Object(m.jsxs)("div",{className:"product",children:[Object(m.jsx)("img",{src:"".concat("","/images/").concat(a,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:""}),Object(m.jsxs)("div",{className:"product-info",children:[Object(m.jsx)("p",{className:"info-name",children:t}),Object(m.jsx)("p",{className:"info-description",children:c}),Object(m.jsxs)("p",{className:"info-price",children:["RM",n]})]})]})}),M=function(e){var t=Object(a.useState)(!0),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(!0),o=Object(i.a)(r,2),u=o[0],d=o[1],b=Object(a.useState)(["All"]),h=Object(i.a)(b,2),p=h[0],O=h[1],f=Object(a.useState)("All"),x=Object(i.a)(f,2),v=x[0],g=x[1],y=Object(a.useState)([]),w=Object(i.a)(y,2),I=w[0],D=w[1],M=Object(a.useState)([]),q=Object(i.a)(M,2),R=q[0],L=q[1],B=Object(a.useState)(8),U=Object(i.a)(B,1)[0],F=Object(a.useState)(null),H=Object(i.a)(F,2),W=H[0],J=H[1],z=Object(a.useState)(0),Y=Object(i.a)(z,2),G=Y[0],$=Y[1],K=Object(a.useState)(0),V=Object(i.a)(K,2),Q=V[0],Z=V[1],X=Object(a.useState)([]),ee=Object(i.a)(X,2),te=ee[0],ce=ee[1];Object(a.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c,n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(N+"/products");case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,D(c),s(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.prev=14,e.next=17,fetch(N+"/streamings");case 17:return n=e.sent,e.next=20,n.json();case 20:a=e.sent,ce(a),d(!1),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(14),console.log(e.t1);case 28:case"end":return e.stop()}}),e,null,[[0,11],[14,25]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(a.useEffect)((function(){null!=I&&(function(){var e=[];I.map((function(t){e.push(t.category)})),e=Array.from(new Set(e)),O((function(t){return[].concat(Object(S.a)(t),Object(S.a)(e))}))}(),function(){var e=I.filter((function(e){return v===e.category||"All"===v}));L(e)}())}),[I]),Object(a.useEffect)((function(){!function(){var e=I.filter((function(e){return v===e.category||"All"===v}));if(L(e),0!=Q){var t=0*U%I.length;Z(t),$(Math.ceil(R.length/U))}}()}),[v]),Object(a.useEffect)((function(){if(R!==[]){var e=Q+U;console.log("Loading productsByCategory from ".concat(Q," to ").concat(e)),J(R.slice(Q,e)),$(Math.ceil(R.length/U))}}),[Q,R]);Object(a.useEffect)((function(){console.log("Current Items done load")}),[W]);return n||u?Object(m.jsx)(T,{}):Object(m.jsxs)("div",{className:"homescreen",children:[Object(m.jsx)("h2",{className:"label",children:"Featured Streamings"}),Object(m.jsx)("div",{className:"homescreen-streaming",children:Object(m.jsx)(E.a,Object(j.a)(Object(j.a)({},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,className:"slick",autoplay:!0,centerMode:!0,centerPadding:"100px",responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,centerMode:!1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,centerMode:!1}}]}),{},{children:0!==te.length?te.map((function(e){return Object(m.jsx)(_,Object(j.a)({},e),e._id)})):Object(m.jsx)("div",{className:"no-streaming",children:"No Live streaming"})}))}),Object(m.jsx)("h2",{className:"homesreen-title",children:"Latest Products "}),Object(m.jsxs)("div",{className:"homescreen-main",children:[Object(m.jsxs)("div",{className:"homescreen-categories",children:[Object(m.jsxs)("h3",{children:[Object(m.jsx)("i",{className:"fa fa-list","aria-hidden":"true"}),"Categories"]}),p.map((function(e){return Object(m.jsx)("button",{onClick:function(){return g(e)},children:e},e)}))]}),Object(m.jsxs)("div",{className:"homescreen-catalog",children:[Object(m.jsx)("div",{className:"homescreen-products",children:W.map((function(e){if(e.countInStock>0)return Object(m.jsx)(l.b,{to:"/product/".concat(e._id),className:"products",children:Object(m.jsx)(A,Object(j.a)({},e))},e._id)}))}),Object(m.jsx)(P.a,{breakLabel:"...",nextLabel:">",onPageChange:function(e){var t=e.selected*U%R.length;console.log("User requested page number ".concat(e.selected,", which is offset ").concat(t)),Z(t)},pageRangeDisplayed:5,pageCount:G,previousLabel:"<",renderOnZeroPageCount:null,className:"homescreen-pagination"})]})]})]})},q=(c(272),JSON.parse(localStorage.getItem("userData"))),R=function(e){var t=Object(u.g)().id,c="".concat(N,"/products/").concat(t),n=Object(a.useState)(!0),s=Object(i.a)(n,2),r=s[0],o=s[1],j=Object(a.useState)(!1),d=Object(i.a)(j,2),b=d[0],h=d[1],O=Object(a.useState)(null),f=Object(i.a)(O,2),x=f[0],g=f[1],y=Object(a.useState)(1),S=Object(i.a)(y,2),w=S[0],I=S[1],P=Object(a.useState)(!0),D=Object(i.a)(P,2),E=D[0],_=D[1],A=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(c);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,g(n),o(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){A()}),[]),Object(a.useEffect)((function(){null!=x&&M()}),[x]);var M=function(){x.countInStock>0&&_(!0)};return r?Object(m.jsx)(T,{}):Object(m.jsxs)("div",{className:"productscreen",children:[Object(m.jsxs)("div",{className:"productscreen-left",children:[Object(m.jsx)("div",{className:"left-image",children:Object(m.jsx)("img",{src:"".concat("","/images/").concat(x.imageUrl,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:""})}),Object(m.jsxs)("div",{className:"left-info",children:[Object(m.jsx)("p",{className:"left-name",children:x.name}),Object(m.jsxs)("p",{children:["RM",x.price]}),Object(m.jsx)("p",{children:x.description}),Object(m.jsxs)("p",{children:["Seller: ",x.shopName]}),Object(m.jsxs)("p",{children:["Category: ",x.category]})]})]}),Object(m.jsx)("div",{className:"productscreen-right",children:Object(m.jsxs)("div",{className:"right-info",children:[Object(m.jsxs)("p",{children:["Price: ",Object(m.jsxs)("span",{children:["RM",x.price]})]}),Object(m.jsxs)("p",{children:["Stock left: ",Object(m.jsx)("span",{children:x.countInStock})]}),Object(m.jsxs)("p",{children:["Qty",Object(m.jsx)("input",{type:"number",value:w,onChange:function(e){I(e.target.value)},min:"1",max:x.countInStock})]}),Object(m.jsx)("p",{children:p.isAuthenticated()?Object(m.jsx)("button",{type:"button",disabled:!E,onClick:function(){var e={userId:q.userId,productId:x._id,quantity:w,shopId:x.shopId};v.a.post("".concat(N,"/orders"),e).then((function(e){console.log(e),h(!0)})).catch((function(e){console.log(e)}))},children:"Order"}):Object(m.jsx)(l.b,{to:"/login",children:"Order"})})]})}),b?Object(m.jsx)("div",{className:"message",children:Object(m.jsxs)("div",{className:"message-content",children:[Object(m.jsxs)("h2",{children:["Your Order on ",w," quantity of ",x.name," is successfully placed"]}),Object(m.jsx)("p",{children:"View your orders in Myorder."}),Object(m.jsx)("button",{onClick:function(){return h(!1)},children:"OK"})]})}):Object(m.jsx)("div",{})]})},L=(c(273),c(144),function(e){var t=e._id,c=(e.userId,e.productId),n=e.quantity,s=(e.isPaid,e.removeOrder),r=e.calculateTotalPrice,o=Object(a.useState)(n),u=Object(i.a)(o,2),j=u[0],d=u[1],b=Object(a.useState)(null),h=Object(i.a)(b,2),p=h[0],O=h[1],f=Object(a.useState)(!0),x=Object(i.a)(f,2),g=x[0],y=x[1],S=Object(a.useState)(""),w=Object(i.a)(S,2),I=w[0],P=w[1],D=function(){var e=j*parseFloat(p.price);console.log(p.price),r(e)},E=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/products/").concat(c));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,O(n),P(n.imageUrl),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){E()}),[c]),Object(a.useEffect)((function(){!function(){var e={quantity:j};v.a.put("".concat(N,"/orders/").concat(t),e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}(),null!=p&&D()}),[j]),Object(a.useEffect)((function(){null!=p&&D()}),[p]),Object(a.useEffect)((function(){""!=I&&y(!1)}),[I]),g?Object(m.jsx)("div",{}):Object(m.jsxs)("div",{className:"cartitem",children:[Object(m.jsx)("div",{className:"cartitem-image",children:Object(m.jsx)("img",{src:"".concat("","/images/").concat(I,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:""})}),Object(m.jsx)(l.b,{to:"/product/".concat(c),className:"cartitem-name",children:Object(m.jsx)("p",{children:p.name})}),Object(m.jsxs)("p",{className:"cartitem-price",children:["RM",p.price]}),Object(m.jsx)("input",{type:"number",value:j,onChange:function(e){d(e.target.value)},min:"1",max:p.countInStock}),Object(m.jsxs)("p",{className:"cartitem-price",children:["RM",j*p.price]}),Object(m.jsx)("button",{className:"cartitem-deletebtn",onClick:function(){v.a.delete("".concat(N,"/orders/").concat(t)).then((function(e){console.log(e),s(t)})).catch((function(e){console.log(e)}))},children:Object(m.jsx)("i",{className:"fas fa-trash"})})]})}),B=function(e){var t=e.quantity,c=e.productId,n=Object(a.useState)(null),s=Object(i.a)(n,2),r=s[0],o=s[1],u=Object(a.useState)(!0),j=Object(i.a)(u,2),d=j[0],b=j[1],h=Object(a.useState)(""),p=Object(i.a)(h,2),O=p[0],f=p[1],x=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/products/").concat(c));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,o(n),f(n.imageUrl),b(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[]),d?Object(m.jsx)("div",{}):Object(m.jsxs)("div",{className:"cartitem",children:[Object(m.jsx)("div",{className:"cartitem-image",children:Object(m.jsx)("img",{src:"".concat("","/images/").concat(O,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:""})}),Object(m.jsx)(l.b,{to:"/product/".concat(c),className:"cartitem-name",children:Object(m.jsx)("p",{children:r.name})}),Object(m.jsxs)("p",{className:"cartitem-price",children:["RM",r.price]}),Object(m.jsx)("p",{className:"cartitem-price",children:t}),Object(m.jsxs)("p",{className:"cartitem-price",children:["RM",t*r.price]})]})},U=(c(274),function(e){var t=e.bidPrice,c=e.productId,n=Object(a.useState)(null),s=Object(i.a)(n,2),r=s[0],o=s[1],l=Object(a.useState)(!0),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(""),h=Object(i.a)(b,2),p=h[0],O=h[1],f=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/products/".concat(c));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,o(n),O(n.imageUrl),d(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f()}),[]),j?Object(m.jsx)("div",{}):Object(m.jsxs)("div",{className:"cartitem",children:[Object(m.jsx)("div",{className:"cartitem-image",children:Object(m.jsx)("img",{src:"".concat("","/images/").concat(p,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:""})}),Object(m.jsx)("p",{children:r.name}),Object(m.jsx)("p",{className:"cartitem-price",children:"BidPrice: "}),Object(m.jsxs)("p",{className:"cartitem-price",children:["RM",t]})]})}),F=JSON.parse(localStorage.getItem("userData")),H=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!0),r=Object(i.a)(s,2),o=r[0],u=r[1],d=Object(a.useState)([]),b=Object(i.a)(d,2),h=b[0],p=b[1],O=Object(a.useState)(0),f=Object(i.a)(O,2),x=f[0],v=f[1],g=Object(a.useState)([]),y=Object(i.a)(g,2),S=y[0],w=y[1],I=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/orders/unpaid/").concat(F.userId));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,p(c),n(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/orders/paid/").concat(F.userId));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,w(c),u(!1),console.log(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){I(),P()}),[]);var D=function(e){var t=h.filter((function(t){return t._id!==e}));p(t)},E=function(e){v(x+e)};return c&&o?Object(m.jsx)("div",{className:"loadingscreen",children:Object(m.jsx)("div",{className:"loading"})}):Object(m.jsxs)("div",{className:"cartscreen",children:[Object(m.jsx)("h2",{className:"cartscreen-header",children:"Shopping Cart"}),Object(m.jsxs)("div",{className:"cartscreen-content",children:[Object(m.jsx)("div",{className:"cartscreen-left",children:h.filter((function(e){return!1===e.isAuctionItem})).map((function(e){return Object(m.jsx)(L,Object(j.a)(Object(j.a)({},e),{},{removeOrder:D,calculateTotalPrice:E}),e._id)}))}),Object(m.jsxs)("div",{className:"cartscreen-right",children:[Object(m.jsxs)("div",{className:"cartscreen-info",children:[Object(m.jsx)("p",{children:"Grand Total:"}),Object(m.jsxs)("p",{children:["RM",x]})]}),Object(m.jsx)("div",{className:"cartscreen-info",children:Object(m.jsx)("p",{className:"center",children:Object(m.jsx)(l.b,{to:"/checkout",className:"uwu-btn",children:"Proceed to Checkout"})})})]})]}),Object(m.jsx)("h2",{className:"cartscreen-header",children:"Auction Cart"}),Object(m.jsx)("div",{className:"cartscreen-content",children:Object(m.jsx)("div",{className:"cartscreen-left",children:h.filter((function(e){return!0===e.isAuctionItem})).map((function(e){return Object(m.jsx)(U,Object(j.a)({},e),e._id)}))})}),Object(m.jsx)("h2",{className:"cartscreen-header2",children:"Order History"}),Object(m.jsx)("div",{className:"cartscreen-content",children:Object(m.jsx)("div",{className:"cartscreen-left",children:S.map((function(e){return Object(m.jsx)(B,Object(j.a)({},e),e._id)}))})})]})},W=function(e){var t=Object(a.useState)(""),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),u=o[0],j=o[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),h=b[0],p=b[1],O=Object(a.useState)(""),f=Object(i.a)(O,2),x=f[0],y=f[1],S=Object(a.useState)(""),w=Object(i.a)(S,2),k=w[0],C=w[1];return Object(m.jsxs)("div",{className:"loginscreen",children:[Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsx)("img",{src:g}),Object(m.jsx)("h2",{children:"Welcome to UWU Shopping Site!!"})]}),Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h1",{children:"Register"}),Object(m.jsxs)("form",{className:"login-form",children:[Object(m.jsxs)("div",{className:"form-input",children:[Object(m.jsx)("label",{children:"Email: "}),Object(m.jsx)("input",{type:"email",name:"email",value:n,onChange:function(e){s(e.currentTarget.value)},required:!0})]}),Object(m.jsxs)("div",{className:"form-input",children:[Object(m.jsx)("label",{children:"Password: "}),Object(m.jsx)("input",{type:"password",name:"password",value:u,onChange:function(e){j(e.currentTarget.value)},required:!0})]}),Object(m.jsxs)("div",{className:"form-input",children:[Object(m.jsx)("label",{children:"Name: "}),Object(m.jsx)("input",{name:"name",value:h,onChange:function(e){p(e.currentTarget.value)},required:!0})]}),Object(m.jsxs)("div",{className:"form-input",children:[Object(m.jsx)("label",{children:"Address: "}),Object(m.jsx)("input",{name:"address",value:x,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),Object(m.jsxs)("div",{className:"form-input",children:[Object(m.jsx)("label",{children:"Phone: "}),Object(m.jsx)("input",{name:"phone",value:k,onChange:function(e){C(e.currentTarget.value)},required:!0})]}),Object(m.jsx)("div",{className:"form-input",children:Object(m.jsx)("button",{type:"submit",onClick:function(t){if(t.preventDefault(),""!==n&&""!==u&&""!==h&&""!==x&&""!==k){if(n&&!1!==/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(n))if(u.length>6){if(/^\+60\d{2}(\d{7}|\d{8})$/.test(k)){var c={email:n,password:u,name:h,address:x,phone:k};v.a.post("".concat(N,"/users"),c).then((function(t){console.log(t),alert("you have successfully registered!"),e.history.push("/login",{success:!0})})).catch((function(e){400==e.response.status?alert("email already exist"):console.log(e)}))}else alert("your phone number should have this format -> +60123456789")}else alert("your password needs to have atleast 7 characters");else alert("please insert valid email")}else alert("Please fill in the blanks")},children:"Register"})}),Object(m.jsx)(l.b,{to:"/login",children:"Already have an account? Login here."})]})]})]})},J=(c(275),JSON.parse(localStorage.getItem("userData"))),z=function(e){var t=Object(a.useState)(),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)([]),o=Object(i.a)(r,2),u=o[0],d=o[1],b=Object(a.useState)(!0),h=Object(i.a)(b,2),p=h[0],O=h[1];return Object(a.useEffect)((function(){var t=function(){var t=Object(C.a)(k.a.mark((function t(){var c,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(N,"/shops/").concat(J.userId));case 3:return c=t.sent,t.next=6,c.json();case 6:n=t.sent,s(n),O(!1),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("failed fetch shop data"),console.log(t.t0),e.history.push("/");case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t(),console.log("Fetch Data")}),[]),Object(a.useEffect)((function(){var t=function(){var t=Object(C.a)(k.a.mark((function t(){var c,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(N,"/products/seller/").concat(n._id));case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,d(a),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("failed fetch shop's products data"),console.log(t.t0),e.history.push("/");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();null!=n&&t()}),[n]),p?Object(m.jsx)(T,{}):Object(m.jsxs)("div",{className:"myshopscreen",children:[n?Object(m.jsxs)("div",{className:"welcomeshop",children:[Object(m.jsx)("img",{src:"".concat("","/images/").concat(n.shopImageUrl),onError:function(e){e.target.onerror=null,e.target.src="https://bootdey.com/img/Content/avatar/avatar3.png"},alt:""}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:n.shopName})}),Object(m.jsx)("p",{children:n.shopDescription}),Object(m.jsx)("p",{children:n.shopAddress}),Object(m.jsx)("p",{children:n.shopPhone}),Object(m.jsx)("p",{children:n.shopEmail})]}):Object(m.jsxs)("div",{className:"welcomeshop",children:[Object(m.jsx)("h1",{align:"center",children:"Welcome to MyShop"}),Object(m.jsx)("br",{}),Object(m.jsx)("p",{align:"center",children:"Become a seller and start selling products, streaming on our platform!"})]}),n?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"edit-stream-button",children:[Object(m.jsx)(l.b,{to:"/myshop/editmyshop",className:"Link",type:"button",children:Object(m.jsx)("span",{children:"Edit your MyShop!"})}),"\xa0",Object(m.jsxs)(l.b,{to:"/streamingseller",className:"Link",type:"button",children:[Object(m.jsx)("i",{className:"fa fa-video-camera","aria-hidden":"true"}),Object(m.jsx)("span",{children:"Start Streaming"})]}),"\xa0",Object(m.jsx)(l.b,{to:"/myshop/orders",className:"Link",type:"button",children:Object(m.jsx)("span",{children:"View Buyers' Orders"})})]}),0!=u.length?Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"productscreen",children:[Object(m.jsx)("h2",{align:"center",className:"label",children:"Product List"}),Object(m.jsx)("div",{className:"productlist",children:u.map((function(e){return Object(m.jsxs)(l.b,{to:"/myshop/editproduct/".concat(e._id),className:"products",children:[" ",Object(m.jsx)(A,Object(j.a)({},e)),"                             "]},e._id)}))}),Object(m.jsx)("div",{className:"edit-stream-button",children:Object(m.jsx)(l.b,{to:"/myshop/addproduct",className:"Link",type:"button",children:Object(m.jsx)("span",{children:"Add a product!"})})})]})}):Object(m.jsxs)("div",{className:"welcomeshop",children:[Object(m.jsx)("h1",{align:"center",children:"You have no products yet!"}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:"edit-stream-button",children:Object(m.jsx)(l.b,{to:"/myshop/addproduct",className:"Link",type:"button",children:Object(m.jsx)("span",{children:"Add a product!"})})})]})]}):Object(m.jsx)(l.b,{to:"/myshop/createmyshop",className:"Link",type:"button",children:Object(m.jsx)("h2",{children:"Create your MyShop!"})})]})},Y=(c(276),JSON.parse(localStorage.getItem("userData"))),G=function(e){var t=Object(a.useState)(null),c=Object(a.useState)(!0),n=Object(i.a)(c,2),s=n[0],r=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),h=b[0],p=b[1],O=Object(a.useState)(""),f=Object(i.a)(O,2),x=f[0],g=f[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),w=S[0],I=S[1],P=Object(a.useState)(""),D=Object(i.a)(P,2),E=(D[0],D[1]),_=Object(a.useState)(""),A=Object(i.a)(_,2),M=A[0],q=A[1],R=Object(a.useState)(""),L=Object(i.a)(R,2),B=L[0],U=L[1],F=Object(a.useState)(""),H=Object(i.a)(F,2),W=H[0],J=H[1],z=function(){var t=Object(C.a)(k.a.mark((function t(){var c,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(N,"/shops/").concat(Y.userId));case 3:return c=t.sent,t.next=6,c.json();case 6:n=t.sent,p(n),g(n.shopName),J(n.shopEmail),U(n.shopPhone),q(n.shopAddress),I(n.shopDescription),E(n.shopImageUrl),r(!1),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(0),alert("An error has been occurred while trying to fetch data... Please check console."),console.log(t.t0),e.history.push("/myshop");case 22:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){z()}),[]),s?Object(m.jsx)(T,{}):Object(m.jsx)("div",{className:"editmyshopscreen",children:Object(m.jsx)("div",{className:"account-information1",children:Object(m.jsx)("div",{className:"container1",children:Object(m.jsx)("div",{className:"column-1 box1",children:Object(m.jsxs)("form",{className:"form",method:"POST",encType:"multipart/form-data",children:[Object(m.jsx)("h1",{className:"text-center",children:"Edit My Shop"}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Name:",children:[Object(m.jsx)("label",{children:"Shop Name: "}),Object(m.jsx)("input",{type:"text",name:"name",value:x,onChange:function(e){g(e.currentTarget.value)},placeholder:"Shop name",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Email:",children:[Object(m.jsx)("label",{children:"Shop Email: "}),Object(m.jsx)("input",{type:"text",name:"email",value:W,onChange:function(e){J(e.currentTarget.value)},placeholder:"Shop Email",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Description:",children:[Object(m.jsx)("label",{children:"Shop Description: "}),Object(m.jsx)("input",{type:"text",name:"description",value:w,onChange:function(e){I(e.currentTarget.value)},placeholder:"Shop Description",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Address:",children:[Object(m.jsx)("label",{children:"Shop Address: "}),Object(m.jsx)("input",{type:"text",name:"address",value:M,onChange:function(e){q(e.currentTarget.value)},placeholder:"Shop Address",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Phone:",children:[Object(m.jsx)("label",{children:"Shop Phone: "}),Object(m.jsx)("input",{type:"text",name:"phone",value:B,onChange:function(e){U(e.currentTarget.value)},placeholder:"Shop Phone",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Picture",children:[Object(m.jsx)("label",{children:"Shop Image: "}),Object(m.jsx)("input",{ref:t,id:"imgFile",type:"file",accept:".png, .jpg, .jpeg",name:"photo",onChange:function(e){j(e.target.files[0])}})]}),Object(m.jsx)("br",{}),Object(m.jsx)("center",{children:Object(m.jsx)("button",{type:"submit",className:"button",onClick:function(t){if(t.preventDefault(),""!==W&&""!==x&&""!==w&&""!==M&&""!==B){if(W&&!1!==/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(W)){if(/^\+60\d{2}(\d{7}|\d{8})$/.test(B)){var c=new FormData;c.append("email",W),c.append("description",w),c.append("name",x),c.append("address",M),c.append("phone",B),c.append("profile_pic",u),v.a.put("".concat(N,"/shops/").concat(h._id),c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.img&&E(t.data.img),e.history.push("/myshop"),alert("your information has been updated!")})).catch((function(e){console.log(e)})),j(null),document.getElementById("imgFile").value=""}else alert("your phone number should have this format -> +60123456789")}else alert("please insert a valid email")}else alert("Please fill in the blank")},children:"Update"})})]})})})})})},$=(c(277),JSON.parse(localStorage.getItem("userData"))),K=function(e){var t=Object(a.useState)($.userId),c=Object(i.a)(t,1)[0],n=Object(a.useState)(""),s=Object(i.a)(n,2),r=s[0],o=s[1],l=Object(a.useState)(""),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(""),h=Object(i.a)(b,2),p=(h[0],h[1],Object(a.useState)("")),O=Object(i.a)(p,2),f=O[0],x=O[1],g=Object(a.useState)(""),y=Object(i.a)(g,2),S=y[0],w=y[1],k=Object(a.useState)(""),C=Object(i.a)(k,2),I=C[0],P=C[1];return Object(m.jsx)("div",{className:"createmyshopscreen",children:Object(m.jsx)("div",{className:"account-information1",children:Object(m.jsx)("div",{className:"container1",children:Object(m.jsx)("div",{className:"column-1 box1",children:Object(m.jsxs)("form",{className:"form",method:"POST",encType:"multipart/form-data",children:[Object(m.jsx)("h1",{className:"text-center",children:"Create My Shop"}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Name:",children:[Object(m.jsx)("label",{children:"Shop Name: "}),Object(m.jsx)("input",{type:"text",name:"name",value:r,onChange:function(e){o(e.currentTarget.value)},placeholder:"Shop name",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Email:",children:[Object(m.jsx)("label",{children:"Shop Email: "}),Object(m.jsx)("input",{type:"text",name:"email",value:I,onChange:function(e){P(e.currentTarget.value)},placeholder:"Shop Email",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Description:",children:[Object(m.jsx)("label",{children:"Shop Description: "}),Object(m.jsx)("input",{type:"text",name:"description",value:j,onChange:function(e){d(e.currentTarget.value)},placeholder:"Shop Description",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Address:",children:[Object(m.jsx)("label",{children:"Shop Address: "}),Object(m.jsx)("input",{type:"text",name:"address",value:f,onChange:function(e){x(e.currentTarget.value)},placeholder:"Shop Address",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Shop Phone:",children:[Object(m.jsx)("label",{children:"Shop Phone: "}),Object(m.jsx)("input",{type:"text",name:"phone",value:S,onChange:function(e){w(e.currentTarget.value)},placeholder:"Shop Phone",required:!0})]}),Object(m.jsx)("center",{children:Object(m.jsx)("button",{type:"submit",className:"button",onClick:function(t){if(t.preventDefault(),""!==c&&""!==r&&""!==j&&""!==f&&""!==S&&""!==I){if(I&&!1!==/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(I)){if(/^\+60\d{2}(\d{7}|\d{8})$/.test(S)){var n={userId:c,shopName:r,shopEmail:I,shopImageUrl:"https://p.kindpng.com/picc/s/9-94468_shop-clipart-hd-png-download.png",shopDescription:j,shopAddress:f,shopPhone:S};v.a.post("".concat(N,"/shops"),n).then((function(t){e.history.push("/myshop"),console.log(t)})).catch((function(e){console.log(e)}))}else alert("Your phone number should have this format -> +60123456789")}else alert("Please insert valid email")}else alert("Please fill in the blanks")},children:"Create"})})]})})})})})},V=(c(278),JSON.parse(localStorage.getItem("userData")),function(e){var t=Object(u.g)().id,c=Object(a.useState)(null),n=Object(a.useState)(""),s=Object(i.a)(n,2),r=s[0],o=s[1],l=Object(a.useState)(""),j=Object(i.a)(l,2),d=j[0],b=j[1],h=Object(a.useState)(""),p=Object(i.a)(h,2),O=p[0],f=p[1],x=Object(a.useState)(""),g=Object(i.a)(x,2),y=g[0],S=g[1],w=Object(a.useState)(""),I=Object(i.a)(w,2),P=I[0],D=I[1],E=Object(a.useState)(""),_=Object(i.a)(E,2),A=_[0],M=_[1],q=Object(a.useState)(""),R=Object(i.a)(q,2),L=R[0],B=R[1],U=Object(a.useState)(""),F=Object(i.a)(U,2),H=F[0],W=F[1],J=Object(a.useState)(""),z=Object(i.a)(J,2),Y=z[0],G=z[1],$=Object(a.useState)(""),K=Object(i.a)($,2),V=K[0],Q=K[1],Z=Object(a.useState)(!0),X=Object(i.a)(Z,2),ee=X[0],te=X[1],ce=function(){var c=Object(C.a)(k.a.mark((function c(){var n,a;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch("".concat(N,"/products/").concat(t));case 3:return n=c.sent,c.next=6,n.json();case 6:a=c.sent,b(a),f(a.name),S(a.description),D(a.price),M(a.countInStock),B(a.category),Q(a.imageUrl),W(a.shopId),G(a.shopName),te(!1),c.next=24;break;case 19:c.prev=19,c.t0=c.catch(0),alert("An error has been occurred while trying to fetch data... Please check console."),console.log(c.t0),e.history.push("/myshop");case 24:case"end":return c.stop()}}),c,null,[[0,19]])})));return function(){return c.apply(this,arguments)}}(),ne=function(){var c=Object(C.a)(k.a.mark((function c(){return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,v.a.delete("".concat(N,"/products/").concat(t)).then((function(t){alert("Product has been deleted successfully!"),e.history.push("/myshop")})).catch((function(e){console.log(e)}));case 2:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();return Object(a.useEffect)((function(){ce()}),[]),ee&&null===d?Object(m.jsx)(T,{}):Object(m.jsx)("div",{className:"editproductmyshopscreen",children:Object(m.jsx)("div",{className:"registerform1",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"form1",children:[Object(m.jsxs)("form",{method:"POST",encType:"multipart/form-data",children:[Object(m.jsx)("h1",{className:"title",children:"Edit Product "}),Object(m.jsx)("div",{className:"form-img",children:Object(m.jsx)("img",{className:"productimg",src:"".concat("","/images/").concat(V,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:""})}),Object(m.jsxs)("div",{className:"form-input",type:"Product Name:",children:[Object(m.jsx)("label",{children:"Product Name: "}),Object(m.jsx)("input",{type:"text",name:"name",value:O,onChange:function(e){f(e.currentTarget.value)},placeholder:"Product name",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Description:",children:[Object(m.jsx)("label",{children:"Product Description: "}),Object(m.jsx)("input",{type:"text",name:"description",value:y,onChange:function(e){S(e.currentTarget.value)},placeholder:"Product Description",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Price:",children:[Object(m.jsx)("label",{children:"Product Price: "}),Object(m.jsx)("input",{type:"number",name:"price",value:P,onChange:function(e){D(e.currentTarget.value)},placeholder:"Price",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Category:",children:[Object(m.jsx)("label",{children:"Product Category: "}),Object(m.jsxs)("select",{type:"text",name:"category",value:L,onChange:function(e){B(e.currentTarget.value)},required:!0,children:[Object(m.jsx)("option",{value:"Headphones",children:"Headphones"}),Object(m.jsx)("option",{value:"Speakers",children:"Speaker"}),Object(m.jsx)("option",{value:"Smart Device",children:"Smart Device"}),Object(m.jsx)("option",{value:"Mobile Phone",children:"Mobile Phone"}),Object(m.jsx)("option",{value:"Camera",children:"Camera"}),Object(m.jsx)("option",{value:"Smart Watch",children:"Smart Watch"})]})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Count In Stock:",children:[Object(m.jsx)("label",{children:"Product Count In Stock: "}),Object(m.jsx)("input",{type:"number",name:"countinstock",placeholder:"Count In Stock",value:A,onChange:function(e){M(e.currentTarget.value)},min:"1",max:"100",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Picture",children:[Object(m.jsx)("label",{children:"Product Image: "}),Object(m.jsx)("input",{ref:c,id:"imgFile",type:"file",accept:".png, .jpg, .jpeg",name:"photo",onChange:function(e){o(e.target.files[0])}})]})]}),Object(m.jsxs)("center",{children:[Object(m.jsx)("button",{className:"button",onClick:function(c){if(c.preventDefault(),""!==O&&""!==y&&""!==P&&""!==A&&""!==L&&""!==H&&""!==Y)if(P>0&&A>0){var n=new FormData;n.append("name",O),n.append("description",y),n.append("price",P),n.append("countInStock",A),n.append("category",L),n.append("profile_pic",r),n.append("shopId",H),n.append("shopName",Y),v.a.put("".concat(N,"/products/").concat(t),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.img&&Q(t.data.img),e.history.push("/myshop"),alert("product information has been updated!")})).catch((function(e){console.log(e),alert("error occured")})),o(null),document.getElementById("imgFile").value=""}else alert("Product Price and Count In Stock must not be 0");else alert("Please fill in the blank")},children:"Update"}),Object(m.jsx)("button",{className:"button",onClick:ne,children:"Delete"})]})]})})})})}),Q=(c(279),JSON.parse(localStorage.getItem("userData"))),Z=function(e){var t=Object(a.useState)(null),c=Object(a.useState)(""),n=Object(i.a)(c,2),s=n[0],r=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),h=b[0],p=b[1],O=Object(a.useState)(""),f=Object(i.a)(O,2),x=f[0],g=f[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),w=S[0],I=S[1],P=Object(a.useState)(""),D=Object(i.a)(P,2),E=D[0],_=D[1],A=Object(a.useState)(""),M=Object(i.a)(A,2),q=M[0],R=M[1],L=Object(a.useState)(""),B=Object(i.a)(L,2),U=B[0],F=B[1],H=Object(a.useState)(!0),W=Object(i.a)(H,2),J=W[0],z=W[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/shops/").concat(Q.userId));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,R(c._id),F(c.shopName),z(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e(),console.log("Fetch Data")}),[]),J)return Object(m.jsx)(T,{});return Object(m.jsx)("div",{className:"addproductmyshopscreen",children:Object(m.jsx)("div",{className:"account-information1",children:Object(m.jsx)("div",{className:"container1",children:Object(m.jsx)("div",{className:"column-1 box1",children:Object(m.jsxs)("form",{className:"form",method:"POST",encType:"multipart/form-data",children:[Object(m.jsx)("h1",{className:"title",children:"Add Product "}),Object(m.jsxs)("div",{className:"form-input",type:"Product Name:",children:[Object(m.jsx)("label",{children:"Product Name: "}),Object(m.jsx)("input",{type:"text",name:"name",value:u,onChange:function(e){j(e.currentTarget.value)},placeholder:"Product name",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Description:",children:[Object(m.jsx)("label",{children:"Product Description: "}),Object(m.jsx)("input",{type:"text",name:"description",value:h,onChange:function(e){p(e.currentTarget.value)},placeholder:"Product Description",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Price:",children:[Object(m.jsx)("label",{children:"Product Price: "}),Object(m.jsx)("input",{type:"number",name:"price",value:x,onChange:function(e){g(e.currentTarget.value)},placeholder:"Price",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Category:",children:[Object(m.jsx)("label",{children:"Product Category: "}),Object(m.jsxs)("select",{type:"text",name:"category",value:E,onChange:function(e){_(e.currentTarget.value)},placeholder:"Product Category",required:!0,children:[Object(m.jsx)("option",{value:"Headphones",children:"Headphones"}),Object(m.jsx)("option",{value:"Speakers",children:"Speaker"}),Object(m.jsx)("option",{value:"Smart Device",children:"Smart Device"}),Object(m.jsx)("option",{value:"Mobile Phone",children:"Mobile Phone"}),Object(m.jsx)("option",{value:"Camera",children:"Camera"}),Object(m.jsx)("option",{value:"Smart Watch",children:"Smart Watch"})]})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Count In Stock:",children:[Object(m.jsx)("label",{children:"Product Count In Stock: "}),Object(m.jsx)("input",{type:"number",name:"countinstock",placeholder:"Count In Stock",value:w,onChange:function(e){I(e.currentTarget.value)},min:"1",max:"100",required:!0})]}),Object(m.jsxs)("div",{className:"form-input",type:"Product Picture",children:[Object(m.jsx)("label",{children:"Product Image: "}),Object(m.jsx)("input",{ref:t,id:"imgFile",type:"file",accept:".png, .jpg, .jpeg",name:"photo",onChange:function(e){r(e.target.files[0])}})]}),Object(m.jsx)("br",{}),Object(m.jsx)("center",{children:Object(m.jsx)("button",{type:"submit",className:"button",onClick:function(t){if(t.preventDefault(),""!==u&&""!==h&&""!==x&&""!==w&&""!==E&&""!==q&&""!==U)if(x>0&&w>0){var c=new FormData;c.append("name",u),c.append("description",h),c.append("price",x),c.append("countInStock",w),c.append("category",E),c.append("profile_pic",s),c.append("shopId",q),c.append("shopName",U),v.a.post("".concat(N,"/products"),c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){alert("Product added successfully."),e.history.push("/myshop")})).catch((function(e){console.log(e),alert("error occured")})),r(null),document.getElementById("imgFile").value=""}else alert("Product Price and Count In Stock must not be 0");else alert("Please fill in the blank")},children:"Create"})})]})})})})})},X=(c(280),c(281),function(e){var t,c=e._id,n=e.userId,s=e.productId,r=e.quantity,o=e.isPaid,l=Object(a.useState)(null),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(null),h=Object(i.a)(b,2),p=h[0],O=h[1];return t=o?"Order paid":"Order not paid",Object(a.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/users/account/").concat(n));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,d(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(a.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/products/").concat(s));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,O(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[s]),Object(m.jsx)("div",{className:"shoporders",children:Object(m.jsxs)("div",{className:"orders-info",children:[Object(m.jsxs)("p",{children:["Order ID : ",c]}),j?Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"info-name",children:["Buyer's name : ",j.name]}),p?Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"info-name",children:["Product Name : ",p.name]}),Object(m.jsxs)("p",{className:"info-name",children:["Product Quantity : ",r]}),Object(m.jsxs)("p",{className:"info-price",children:["Total Price : RM",r*p.price]})]}):Object(m.jsx)("div",{children:Object(m.jsx)("p",{className:"info-name",children:"Product has been deleted"})})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"info-name",children:"User has been deleted"}),Object(m.jsx)("p",{})]}),Object(m.jsx)("p",{className:"info-price",children:t})]})})}),ee=JSON.parse(localStorage.getItem("userData")),te=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)([]),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(a.useState)(!0),d=Object(i.a)(u,2),b=d[0],h=d[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/shops/").concat(ee.userId));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,n(c),h(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("failed fetch shop data"),alert("An error has been occurred while trying to fetch shop data... Please check console."),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e(),console.log("Fetch Data")}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/orders/seller/").concat(c._id));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,l(n),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("failed fetch orders data"),alert("An error has been occurred while trying to fetch shop data... Please check console."),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();null!=c&&e()}),[c]),b?Object(m.jsx)(T,{}):Object(m.jsx)("div",{className:"myshoporderscreen",children:Object(m.jsxs)("div",{className:"order-content",children:[Object(m.jsx)("h2",{align:"center",className:"label",children:"Order List"}),Object(m.jsx)("div",{className:"productlist",children:o.map((function(e){return Object(a.createElement)(X,Object(j.a)(Object(j.a)({},e),{},{key:e._id}))}))})]})})},ce=(c(282),c.p+"static/media/Membershipgambar.fe18c0c2.png"),ne=function(){var e=Object(a.useState)(null),t=Object(a.useState)(!0),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),u=o[0],j=o[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),h=b[0],O=b[1],f=Object(a.useState)(""),x=Object(i.a)(f,2),g=x[0],y=x[1],S=Object(a.useState)(""),w=Object(i.a)(S,2),I=w[0],P=w[1],D=Object(a.useState)(""),E=Object(i.a)(D,2),T=E[0],_=E[1],A=Object(a.useState)(""),M=Object(i.a)(A,2),q=M[0],R=M[1],L=Object(a.useState)(""),B=Object(i.a)(L,2),U=B[0],F=B[1],H=Object(a.useState)(""),W=Object(i.a)(H,2),J=W[0],z=W[1],Y=Object(a.useState)(""),G=Object(i.a)(Y,2),$=G[0],K=G[1],V=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!p.isAuthenticated()){e.next=22;break}return e.next=4,fetch("".concat(N,"/users/account/").concat(p.getUserData().userId));case 4:return t=e.sent,e.next=7,t.json();case 7:if(!(c=e.sent)){e.next=18;break}y(c.name),j(c.email),_(c.phone),P(c.address),R(c.imgUrl),z(Date.now()),K(c.totalSpent),e.next=19;break;case 18:throw"Data error";case 19:s(!1),e.next=23;break;case 22:throw"Not authenticated";case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),alert("An error has been occurred while trying to fetch data... Please check console."),console.log(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){V()}),[]),n?Object(m.jsx)("div",{className:"loadingscreen",children:Object(m.jsx)("div",{className:"loading"})}):Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)("div",{className:"profile-nav",children:Object(m.jsxs)("div",{className:"user-heading round",children:[Object(m.jsx)("a",{href:"#",onClick:function(){e.current.click()},children:Object(m.jsx)("img",{src:"".concat("","/images/").concat(q,"?").concat(J),onError:function(e){e.target.onerror=null,e.target.src="https://bootdey.com/img/Content/avatar/avatar3.png"},alt:""})}),Object(m.jsx)("h1",{children:g}),Object(m.jsx)("p",{children:u})]})}),Object(m.jsxs)("div",{className:"account-information",children:[Object(m.jsx)("h1",{className:"text-center",children:"My Profile"}),Object(m.jsxs)("div",{className:"container1",children:[Object(m.jsx)("div",{className:"column-1 box",children:Object(m.jsxs)("form",{className:"form",method:"POST",encType:"multipart/form-data",children:[Object(m.jsx)("p",{type:"Name:",children:Object(m.jsx)("input",{type:"text",name:"name",value:g,onChange:function(e){y(e.currentTarget.value)},placeholder:"Full name",required:!0})}),Object(m.jsx)("p",{type:"Email:",children:Object(m.jsx)("input",{type:"email",name:"email",value:u,onChange:function(e){j(e.currentTarget.value)},placeholder:"Email address",required:!0})}),Object(m.jsx)("p",{type:"Password:",children:Object(m.jsx)("input",{type:"password",name:"password",value:h,onChange:function(e){O(e.currentTarget.value)},placeholder:"Password",required:!0})}),Object(m.jsx)("p",{type:"Address:",children:Object(m.jsx)("input",{type:"text",name:"address",value:I,onChange:function(e){P(e.currentTarget.value)},placeholder:"Address",required:!0})}),Object(m.jsx)("p",{type:"Phone:",children:Object(m.jsx)("input",{type:"text",name:"phone",value:T,onChange:function(e){_(e.currentTarget.value)},placeholder:"Phone",required:!0})}),Object(m.jsx)("p",{type:"Profile Picture",children:Object(m.jsx)("input",{ref:e,id:"imgFile",type:"file",accept:".png, .jpg, .jpeg",name:"photo",onChange:function(e){F(e.target.files[0])}})}),Object(m.jsx)("br",{}),Object(m.jsx)("center",{children:Object(m.jsx)("button",{type:"submit",className:"button3",onClick:function(e){if(e.preventDefault(),""!==u&&""!==g&&""!==I&&""!==T){if(u&&!1!==/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(u)){if(/^\+60\d{2}(\d{7}|\d{8})$/.test(T)){var t=new FormData;console.log(g),t.append("email",u),t.append("password",h),t.append("name",g),t.append("address",I),t.append("phone",T),t.append("profile_pic",U),v.a.put("".concat(N,"/users/").concat(p.getUserData().userId),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data.img&&(z(Date.now()),R(e.data.img)),alert("your information has been updated!")})).catch((function(e){console.log(e)})),F(null),document.getElementById("imgFile").value=""}else alert("your phone number should have this format -> +60123456789")}else alert("please insert a valid email")}else alert("Please fill in the blank")},children:"Update"})})]})}),Object(m.jsxs)("div",{className:"column-2 box",children:[Object(m.jsx)("h1",{children:"Membership"}),Object(m.jsxs)("p",{children:["Uwu shopping site membership is an important element of a marketing program designed to build customer loyalty. By applying membership, you can get discounts and offers from us. So apply now!",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)(l.b,{to:"/membership",className:"Link",type:"button",children:Object(m.jsx)("span",{children:Object(m.jsx)("b",{children:"Apply Membership!"})})})}),Object(m.jsx)("img",{className:"logo",src:ce}),Object(m.jsxs)("b",{name:"totalspent",onChange:function(e){K(e.currentTarget.value)},children:["Your totalspent: ",$]})]})]})]})]})]})},ae=(c(145),c(216)),se=Object(ae.a)("https://uwushoppingsite.herokuapp.com"),re=c(90),oe=c(215),ie=(c(444),function(e){var t=e.author,c=e.streamId,n=e.socket,s=e.commentList,r=e.setCommentList,o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],d=function(){if(""!==u){var e={room:c,author:t,message:u,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};n.emit("write_comment",e),r((function(t){return[].concat(Object(S.a)(t),[e])})),j("")}};return Object(m.jsxs)("div",{className:"commentSection",children:[Object(m.jsx)("h2",{children:"Live Chats"}),Object(m.jsx)("div",{className:"comment-body",children:Object(m.jsx)(oe.a,{className:"comment-container",children:s.map((function(e,t){return Object(m.jsx)("div",{className:"comment",children:Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"comment-content",children:[Object(m.jsx)("p",{className:"author noselect",children:e.author}),Object(m.jsx)("p",{children:e.message})]})})},t)}))})}),Object(m.jsxs)("div",{className:"comment-footer",children:[Object(m.jsx)("p",{className:"noselect",children:t}),Object(m.jsx)("input",{type:"text",placeholder:"Write your comments...",value:u,onChange:function(e){j(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&d()}}),Object(m.jsx)("button",{onClick:d,children:"\u25ba"})]})]})}),le=(c(445),function(e){var t=e.products,c=e.setShowProducts,n=e.startSale;return Object(m.jsx)("div",{className:"infobox",children:Object(m.jsxs)("div",{className:"infobox-content",children:[Object(m.jsx)("h2",{children:"Select one For Sale"}),Object(m.jsx)("div",{className:"productList",children:t.map((function(e){return Object(m.jsx)("div",{onClick:function(){return n(e)},children:Object(m.jsx)(A,Object(j.a)({},e))},e._id)}))}),Object(m.jsx)("button",{onClick:function(){return c(!1)},className:"uwu-btn",children:"Cancel"})]})})}),ue=c.p+"static/media/auction-table.7bf3e2c5.png",je=JSON.parse(localStorage.getItem("userData")),de={},be={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},he=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!0),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(a.useState)(""),j=Object(i.a)(u,2),d=j[0],b=j[1],h=Object(a.useState)(""),p=Object(i.a)(h,2),O=p[0],f=p[1],x=Object(a.useState)(null),g=Object(i.a)(x,2),y=g[0],w=g[1],I=Object(a.useState)([]),P=Object(i.a)(I,2),D=P[0],E=P[1],_=Object(a.useState)(!1),A=Object(i.a)(_,2),M=A[0],q=A[1];Object(a.useEffect)((function(){""!==O&&(se.emit("start_streaming",O),n(!0))}),[O]);var R=function(){var e=Object(C.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===d){e.next=4;break}return t={title:d,shopId:y._id,shopName:y.shopName,productId:"",isAuction:M,isAuctionStarted:!1,minimumBid:0,bidderId:"",bidderName:"",isAuctionEnded:!1},e.next=4,v.a.post("".concat(N,"/streamings"),t).then((function(e){console.log("Streaming "+e.data._id+" has started"),f(e.data._id)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(C.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={room:O,author:"System",message:"This streaming has been stopped by the streamer.",time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()},se.emit("stop_streaming",t),E((function(e){return[].concat(Object(S.a)(e),[t])})),e.next=5,v.a.delete("".concat(N,"/streamings/").concat(O)).then((function(e){var t=document.querySelector("video").srcObject;t.getTracks()[0].stop(),t.getTracks()[1].stop(),de={}})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=Object(a.useState)(),U=Object(i.a)(B,2),F=U[0],H=U[1],W=Object(a.useState)(),J=Object(i.a)(W,2),z=J[0],Y=J[1],G=Object(a.useState)([]),$=Object(i.a)(G,2),K=$[0],V=$[1];function Q(){navigator.mediaDevices.enumerateDevices().then((function(e){V(e)})).catch((function(e){console.log(e.name+": "+e.message)}))}function Z(e){window.stream=e;var t=document.querySelector("video");null!=e&&(t.srcObject=e)}function X(e){console.error("Error: ",e)}Object(a.useEffect)((function(){(function(){window.stream&&window.stream.getTracks().forEach((function(e){e.stop()}));var e={audio:{deviceId:F?{exact:F}:void 0},video:{deviceId:z?{exact:z}:void 0}};return navigator.mediaDevices.getUserMedia(e).then(Z).catch(X)})().then(Q)}),[F,z]),Object(a.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/shops/").concat(je.userId));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,w(c),l(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();null==y&&e(),se.on("connect",(function(){var e=se.id;console.log(e)})),se.on("answer",(function(e,t){console.log("viewer answer: "+e),de[e].setRemoteDescription(t)})),se.on("viewer_joined",(function(e){console.log("viewer_joined: "+e);var t=new RTCPeerConnection(be);de[e]=t;var c=document.querySelector("video").srcObject;c.getTracks().forEach((function(e){return t.addTrack(e,c)})),t.onicecandidate=function(t){t.candidate&&se.emit("candidate",e,t.candidate)},t.createOffer().then((function(e){return t.setLocalDescription(e)})).then((function(){se.emit("offer",e,t.localDescription)}))})),se.on("candidate",(function(e,t){de[e].addIceCandidate(new RTCIceCandidate(t))})),se.on("receive_comment",(function(e){E((function(t){return[].concat(Object(S.a)(t),[e])}))})),se.on("auction_make_bid",(function(e){Ue(e),console.log(e)})),se.on("disconnectPeer",(function(e){console.log("disconnectPeer id: "+e),delete de[e]}))}),[]);var ee=Object(a.useState)(!0),te=Object(i.a)(ee,2),ce=te[0],ne=te[1],ae=Object(a.useState)(null),oe=Object(i.a)(ae,2),he=oe[0],pe=oe[1],me=Object(a.useState)([]),Oe=Object(i.a)(me,2),fe=Oe[0],xe=Oe[1],ve=Object(a.useState)(!1),ge=Object(i.a)(ve,2),Ne=ge[0],ye=ge[1],Se=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/products/seller/").concat(y._id));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,xe(c),ye(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){!0!==ce?(!0===Ne&&ye(!1),!0!==M&&(null!==he?we():ke())):ne(!1)}),[he]);var we=function(){var e={productId:he._id};v.a.put("".concat(N,"/streamings/").concat(O),e).then((function(e){console.log(e),M||Ce()})).catch((function(e){console.log(e)}))},ke=function(){v.a.put("".concat(N,"/streamings/").concat(O),{productId:""}).then((function(e){console.log(e),Ie()})).catch((function(e){console.log(e)}))},Ce=function(){var e={room:O,author:"System",message:"".concat(he.name," is for sale!"),time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};E((function(t){return[].concat(Object(S.a)(t),[e])})),se.emit("start_sale",e)},Ie=function(){var e={room:O,author:"System",message:"Sale Ended.",time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};E((function(t){return[].concat(Object(S.a)(t),[e])})),se.emit("end_sale",e)},Pe=Object(a.useState)(!1),De=Object(i.a)(Pe,2),Ee=De[0],Te=De[1],_e=Object(a.useState)(0),Ae=Object(i.a)(_e,2),Me=Ae[0],qe=Ae[1],Re=Object(a.useState)({bidderId:"",bid:0,bidderName:""}),Le=Object(i.a)(Re,2),Be=Le[0],Ue=Le[1],Fe=Object(a.useState)(!1),He=Object(i.a)(Fe,2),We=He[0],Je=He[1],ze=new Date;ze.setSeconds(ze.getSeconds()+30);var Ye=Object(re.useTimer)({expiryTimestamp:ze,autoStart:!1,onExpire:function(){return tt()}}),Ge=Ye.seconds,$e=Ye.minutes,Ke=(Ye.hours,Ye.days,Ye.isRunning),Ve=(Ye.start,Ye.pause),Qe=(Ye.resume,Ye.restart);Object(a.useEffect)((function(){!0===Ee&&Ze()}),[Ee]);var Ze=function(){var e={productId:he._id,isAuctionStarted:Ee,minimumBid:Be.bid>Me?Be.bid:Me,bidderId:Be.bidderId,bidderName:Be.bidderName,isAuctionEnded:We};console.log(e),v.a.put("".concat(N,"/streamings/").concat(O),e).then((function(e){console.log(e),We?st():Be.bid>Me?(qe(Be.bid),nt(),ct()):Xe()})).catch((function(e){console.log(e)}))},Xe=function(){var e={room:O,author:"System",message:"".concat(he.name," is for auction now!"),time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};E((function(t){return[].concat(Object(S.a)(t),[e])})),se.emit("start_auction",e)},et=function(){var e={room:O,author:"System",message:"Next Round! Bid now.",time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};E((function(t){return[].concat(Object(S.a)(t),[e])})),se.emit("auction_next_round",e)},tt=function(){var e={room:O,author:"System",message:"Round End! No more Bid",time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};E((function(t){return[].concat(Object(S.a)(t),[e])})),se.emit("write_comment",e)},ct=function(){var e=new Date;e.setSeconds(e.getSeconds()+30),Qe(e),Ve()};Object(a.useEffect)((function(){Be.bid>Me&&Ze()}),[Be]);var nt=function(){var e={room:O,author:"System",message:"".concat(Be.bidderName," made a bid! Current Highest bid: RM").concat(Be.bid,".")};E((function(t){return[].concat(Object(S.a)(t),[e])})),se.emit("auction_new_highest_bid",e)};Object(a.useEffect)((function(){!0===We&&(Ze(),at())}),[We]);var at=function(){var e={userId:Be.bidderId,shopId:he.shopId,productId:he._id,quantity:1,isAuctionItem:!0,bidPrice:Me};v.a.post("".concat(N,"/orders"),e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},st=function(){var e={room:O,author:"System",message:"Congratulations! ".concat(Be.bidderName," win the auction with RM").concat(Be.bid,".")};E((function(t){return[].concat(Object(S.a)(t),[e])})),se.emit("end_auction",e)};return o?Object(m.jsx)(T,{}):Object(m.jsxs)("div",{className:"streaming",children:[Object(m.jsxs)("div",{className:"streaming-header",children:[Object(m.jsx)("h1",{children:d}),Object(m.jsx)("div",{className:"align-right",children:c?Object(m.jsx)("button",{onClick:L,className:"btn-stopstreaming",children:"Stop Streaming"}):Object(m.jsx)("div",{})})]}),Object(m.jsxs)("div",{className:"streaming-content",children:[Object(m.jsxs)("div",{className:"video-content",children:[Object(m.jsx)("video",{autoPlay:!0,width:"100%",height:"480",muted:!0}),Ee?Object(m.jsxs)("div",{className:"uwu-auctiontimer",children:[Ke?Object(m.jsx)("p",{className:"uwu-auctiontimer-title",children:"Bid Now!!"}):Object(m.jsx)("p",{className:"uwu-auctiontimer-title",children:"Wait For Next Round"}),Object(m.jsxs)("p",{className:"uwu-auctiontimer-time",children:[$e>=10?""+$e:"0"+$e,":",Ge>=10?""+Ge:"0"+Ge]})]}):Object(m.jsx)("div",{})]}),c?Object(m.jsxs)("div",{className:"sections",children:[M?Object(m.jsxs)("div",{className:"streaming-shop",children:[Object(m.jsx)("h2",{children:y.shopName}),Object(m.jsxs)("div",{className:"streaming-shop-body",children:[Object(m.jsxs)("div",{className:"streaming-shelf",children:[Object(m.jsx)("img",{src:ue,alt:"shelf",className:"shelf"}),he?Object(m.jsx)("img",{src:"".concat("","/images/").concat(he.imageUrl,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:"",className:"streaming-product"}):Object(m.jsx)("div",{className:"streaming-noproduct noselect",children:"Nothing on auction"})]}),he?Object(m.jsxs)("div",{className:"productOnSale",children:[Object(m.jsx)("h3",{children:he.name}),Ee?Object(m.jsxs)("div",{className:"productOnSale-detail",children:[Object(m.jsx)("p",{children:"Current Highest Bid"}),Object(m.jsx)("p",{children:Me})]}):Object(m.jsxs)("div",{className:"productOnSale-detail",children:[Object(m.jsxs)("p",{children:["Product Price: RM ",he.price]}),Object(m.jsxs)("p",{children:[he.countInStock," left"]})]})]}):Object(m.jsx)("div",{className:"center grey noselect",children:Object(m.jsx)("p",{children:"Before starting an auction, Please choose an item for the auction."})}),he?Object(m.jsx)("div",{children:Ee?Object(m.jsx)("div",{children:We?Object(m.jsxs)("div",{className:"auction-win-message noselect center",children:["The Winner is ",Be.bidderName," !!"]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"center grey noselect",children:Ke?"Wait for someone bids...":"Buyer will only able to bid after you click next round."}),Object(m.jsx)("button",{onClick:function(){et();var e=new Date;e.setSeconds(e.getSeconds()+30),Qe(e)},className:"uwu-btn",disabled:Ke,children:"Next Round"}),Object(m.jsx)("button",{onClick:function(){Je(!0)},className:"uwu-btn uwu-btn-red",disabled:Ke,children:"End Auction"})]})}):Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"center grey noselect",children:0!=Me?"Start Auction if you are ready.":"Please Set Minimum Bid."}),Object(m.jsx)("input",{type:"number",value:Me,onChange:function(e){return qe(e.target.value)},min:"1",className:"uwu-input"}),Object(m.jsx)("button",{onClick:Se,className:"uwu-btn",children:"Change Auction Item"}),0!=Me?Object(m.jsx)("button",{onClick:function(){Te(!0)},className:"uwu-btn uwu-btn-yellow",children:"Start Auction"}):Object(m.jsx)("div",{})]})}):Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:Se,className:"uwu-btn",children:"Choose Auction Item"})})]})]}):Object(m.jsxs)("div",{className:"streaming-shop",children:[Object(m.jsx)("h2",{children:y.shopName}),Object(m.jsxs)("div",{className:"streaming-shop-body",children:[Object(m.jsxs)("div",{className:"streaming-shelf",children:[Object(m.jsx)("img",{src:"https://media.istockphoto.com/photos/empty-wooden-shelf-picture-id479473084?k=20&m=479473084&s=170667a&w=0&h=yHxDzAysnHsEmWtyL4dGeAqWGeqtA-EzdiRpBaCvkIE=",alt:"shelf",className:"shelf"}),he?Object(m.jsx)("img",{src:"".concat("","/images/").concat(he.imageUrl,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:"",className:"streaming-product"}):Object(m.jsx)("div",{className:"streaming-noproduct noselect",children:"Nothing on sale"})]}),he?Object(m.jsxs)("div",{className:"productOnSale",children:[Object(m.jsx)("h3",{children:he.name}),Object(m.jsxs)("div",{className:"productOnSale-detail",children:[Object(m.jsxs)("p",{children:[he.countInStock," left"]}),Object(m.jsxs)("p",{children:["RM ",he.price]})]})]}):Object(m.jsx)("div",{className:"center grey noselect",children:Object(m.jsx)("p",{children:'To sell your products, Click "Start Sale" to choose one of your product for sale'})}),he?Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){pe(null)},className:"uwu-btn uwu-btn-red",children:"End Sale"})}):Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:Se,className:"uwu-btn",children:"Start Sale"})})]})]}),Ne?Object(m.jsx)(le,{products:fe,setShowProducts:ye,startSale:function(e){pe(e)}}):Object(m.jsx)("div",{}),Object(m.jsx)(ie,{author:y.shopName,streamId:O,socket:se,commentList:D,setCommentList:E})]}):Object(m.jsx)("div",{className:"sections",children:Object(m.jsxs)("div",{className:"setupSection",children:[Object(m.jsx)("h2",{children:"Setup Streaming"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"text",placeholder:"Enter Your Streaming Title",value:d,onChange:function(e){b(e.target.value)},className:"uwu-input"})}),Object(m.jsx)("div",{children:"Camera"}),Object(m.jsx)("div",{children:Object(m.jsx)("select",{id:"videoSource",value:z,onChange:function(e){return Y(e.target.value)},className:"uwu-select",children:K?K.filter((function(e){return"videoinput"===e.kind})).map((function(e){return Object(m.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)})):Object(m.jsx)("option",{children:"No video device found."})})}),Object(m.jsx)("div",{children:"Microphone"}),Object(m.jsx)("div",{children:Object(m.jsx)("select",{id:"audioSource",value:F,onChange:function(e){return H(e.target.value)},className:"uwu-select",children:K?K.filter((function(e){return"audioinput"===e.kind})).map((function(e){return Object(m.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)})):Object(m.jsx)("option",{children:"No audio device found."})})}),Object(m.jsx)("div",{children:"Streaming Type"}),Object(m.jsx)("div",{children:Object(m.jsxs)("select",{id:"audioSource",value:M,onChange:function(e){return q(e.target.value)},className:"uwu-select",children:[Object(m.jsx)("option",{value:!1,children:"Normal"}),Object(m.jsx)("option",{value:!0,children:"Auction"})]})}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:R,className:"uwu-btn",children:"Start Streaming"})})]})})]})]})},pe=(c(446),JSON.parse(localStorage.getItem("userData"))),me={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},Oe=function(){var e=Object(u.g)().streamingId,t=Object(a.useState)(null),c=Object(i.a)(t,2),s=c[0],r=c[1],o=Object(a.useState)(e),j=Object(i.a)(o,1)[0],d=Object(a.useState)(pe?pe.name:"Noname"),b=Object(i.a)(d,1)[0],h=Object(a.useState)(!1),O=Object(i.a)(h,2),f=O[0],x=O[1],g=Object(a.useState)(!0),y=Object(i.a)(g,2),w=y[0],I=y[1],P=Object(a.useState)([]),D=Object(i.a)(P,2),E=D[0],T=D[1],_=Object(a.useState)(!1),A=Object(i.a)(_,2),M=A[0],q=A[1],R=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/streamings/").concat(j));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,console.log(c),r(c),1==w&&I(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){R()}),[j]),Object(a.useEffect)((function(){null!=s&&(""!=s.productId?V():F(null),s.isAuctionEnded&&be(s.isAuctionEnded),q(s.isAuction))}),[s]),Object(a.useEffect)((function(){w||(se.emit("join_streaming",j),console.log("Join streaming"+j))}),[w]);Object(a.useEffect)((function(){se.on("offer",(function(e,t){n=new RTCPeerConnection(me),console.log("streamerId: "+e),console.log(t),function(){var e={room:j,author:"System",message:"".concat(b," joined!"),time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};se.emit("write_comment",e),T((function(t){return[].concat(Object(S.a)(t),[e])}))}(),n.setRemoteDescription(t).then((function(){return n.createAnswer()})).then((function(e){return n.setLocalDescription(e)})).then((function(){se.emit("answer",e,n.localDescription)})),n.ontrack=function(e){null!=e.streams[0]?document.querySelector("video").srcObject=e.streams[0]:console.log("No stream")},n.onicecandidate=function(t){t.candidate&&se.emit("candidate",e,t.candidate)}})),se.on("candidate",(function(e,t){n.addIceCandidate(new RTCIceCandidate(t)).catch((function(e){return console.error(e)}))})),se.on("receive_comment",(function(e){T((function(t){return[].concat(Object(S.a)(t),[e])}))})),se.on("sale_started",(function(e){T((function(t){return[].concat(Object(S.a)(t),[e])})),R()})),se.on("sale_ended",(function(e){T((function(t){return[].concat(Object(S.a)(t),[e])})),R()})),se.on("auction_started",(function(e){T((function(t){return[].concat(Object(S.a)(t),[e])})),R()})),se.on("auction_next_round",(function(e){T((function(t){return[].concat(Object(S.a)(t),[e])})),ye()})),se.on("auction_new_highest_bid",(function(e){T((function(t){return[].concat(Object(S.a)(t),[e])})),R(),Se()})),se.on("auction_ended",(function(e){T((function(t){return[].concat(Object(S.a)(t),[e])})),R()})),se.on("streamer_disconnected",(function(){var e=document.querySelector("video").srcObject;null!=e&&(e.getTracks()[0].stop(),e.getTracks()[1].stop()),n=null}))}),[]);var L=Object(a.useState)(null),B=Object(i.a)(L,2),U=B[0],F=B[1],H=Object(a.useState)(1),W=Object(i.a)(H,2),J=W[0],z=W[1],Y=Object(a.useState)(!1),G=Object(i.a)(Y,2),$=G[0],K=G[1],V=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/products/").concat(s.productId));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,console.log(c),F(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){null!==U&&M?te(!0):null===U&&M&&te(!1)}),[U]);var Q=function(){var e={room:j,author:"System",message:"".concat(b," made ").concat(J," order on ").concat(U.name,"!"),time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};se.emit("write_comment",e),T((function(t){return[].concat(Object(S.a)(t),[e])}))},Z=Object(a.useState)(!1),X=Object(i.a)(Z,2),ee=X[0],te=X[1],ce=Object(a.useState)(),ne=Object(i.a)(ce,2),ae=ne[0],oe=ne[1],le=Object(a.useState)(!1),je=Object(i.a)(le,2),de=je[0],be=je[1],he=new Date;he.setSeconds(he.getSeconds()+30);var Oe=Object(re.useTimer)({expiryTimestamp:he,autoStart:!1,onExpire:function(){return console.log("Round ended")}}),fe=Oe.seconds,xe=Oe.minutes,ve=(Oe.hours,Oe.days,Oe.isRunning),ge=(Oe.start,Oe.pause),Ne=(Oe.resume,Oe.restart),ye=function(){var e=new Date;e.setSeconds(e.getSeconds()+30),Ne(e)},Se=function(){var e=new Date;e.setSeconds(e.getSeconds()+30),Ne(e),ge()},we=function(){var e={room:j,bidderId:pe.userId,bidderName:pe.name,bid:ae};se.emit("auction_make_bid",e)};return w?Object(m.jsx)("div",{className:"loadingscreen",children:Object(m.jsx)("div",{className:"loading"})}):Object(m.jsxs)("div",{className:"streaming",children:[Object(m.jsx)("div",{className:"streaming-header",children:Object(m.jsx)("h1",{children:s.title})}),Object(m.jsxs)("div",{className:"streaming-content",children:[Object(m.jsxs)("div",{className:"video-content",children:[Object(m.jsx)("video",{autoPlay:!0,width:"100%",height:"480",muted:!0}),ee?Object(m.jsxs)("div",{className:"uwu-auctiontimer",children:[ve?Object(m.jsx)("p",{className:"uwu-auctiontimer-title",children:"Bid Now!!"}):Object(m.jsx)("p",{className:"uwu-auctiontimer-title",children:"Wait For Next Round"}),Object(m.jsxs)("p",{className:"uwu-auctiontimer-time",children:[xe>=10?""+xe:"0"+xe,":",fe>=10?""+fe:"0"+fe]})]}):Object(m.jsx)("div",{})]}),Object(m.jsxs)("div",{className:"sections",children:[M?Object(m.jsxs)("div",{className:"streaming-shop",children:[Object(m.jsx)("h2",{children:s.shopName}),Object(m.jsxs)("div",{className:"streaming-shop-body",children:[Object(m.jsxs)("div",{className:"streaming-shelf",children:[Object(m.jsx)("img",{src:ue,alt:"shelf",className:"shelf"}),U?Object(m.jsx)("img",{src:"".concat("","/images/").concat(U.imageUrl,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:"",className:"streaming-product"}):Object(m.jsx)("div",{className:"streaming-noproduct",children:"Nothing on auction"})]}),ee&&null!=U?Object(m.jsxs)("div",{className:"productOnSale",children:[Object(m.jsx)("h3",{children:U.name}),Object(m.jsxs)("div",{className:"productOnSale-detail",children:[Object(m.jsx)("p",{children:"Current Highest Bid"}),Object(m.jsx)("p",{children:s.minimumBid})]})]}):Object(m.jsx)("div",{}),ee&&null!=U?Object(m.jsx)("div",{className:"productOnSale-makebid",children:de?Object(m.jsxs)("div",{className:"auction-win-message center noselect",children:["The Winner is ",s.bidderName," !!"]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"center grey noselect",children:ve?"Your bid amount must higher than minimum bid.":"You can only bid after seller start next round."}),Object(m.jsx)("input",{type:"number",value:ae,onChange:function(e){oe(e.target.value)},min:s.minimumBid,className:"uwu-input",placeholder:"Enter your Bid Amount"}),p.isAuthenticated()?Object(m.jsx)("button",{onClick:function(){we()},className:"uwu-btn",disabled:!ve,children:"Make Bid"}):Object(m.jsx)("button",{onClick:function(){return x(!0)},className:"btn",children:"Make Bid"})]})}):Object(m.jsx)("div",{className:"center grey noselect",children:"Auction is not started yet."})]})]}):Object(m.jsxs)("div",{className:"streaming-shop",children:[Object(m.jsx)("h2",{children:s.shopName}),Object(m.jsxs)("div",{className:"streaming-shop-body",children:[Object(m.jsxs)("div",{className:"streaming-shelf",children:[Object(m.jsx)("img",{src:"https://media.istockphoto.com/photos/empty-wooden-shelf-picture-id479473084?k=20&m=479473084&s=170667a&w=0&h=yHxDzAysnHsEmWtyL4dGeAqWGeqtA-EzdiRpBaCvkIE=",alt:"shelf",className:"shelf"}),U?Object(m.jsx)("img",{src:"".concat("","/images/").concat(U.imageUrl,"?").concat(Date.now()),onError:function(e){e.target.onerror=null,e.target.src="https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg"},alt:"",className:"streaming-product"}):Object(m.jsx)("div",{className:"streaming-noproduct",children:"Nothing on sale"})]}),U?Object(m.jsxs)("div",{className:"productOnSale",children:[Object(m.jsx)("h3",{children:U.name}),Object(m.jsxs)("div",{className:"productOnSale-detail",children:[Object(m.jsxs)("p",{children:[U.countInStock," left"]}),Object(m.jsxs)("p",{children:["RM ",U.price]})]})]}):Object(m.jsx)("div",{}),U?Object(m.jsxs)("div",{className:"productOnSale-makeorder",children:[Object(m.jsx)("input",{type:"number",value:J,onChange:function(e){z(e.target.value)},min:"1",max:U.countInStock,className:"uwu-input"}),p.isAuthenticated()?Object(m.jsx)("button",{onClick:function(){var e={userId:pe.userId,productId:U._id,quantity:J,shopId:U.shopId};v.a.post("".concat(N,"/orders"),e).then((function(e){console.log(e),K(!0),Q()})).catch((function(e){console.log(e)}))},className:"uwu-btn",children:"Make Order"}):Object(m.jsx)("button",{onClick:function(){return x(!0)},className:"uwu-btn",children:"Make Order"})]}):Object(m.jsx)("div",{})]})]}),$?Object(m.jsx)("div",{className:"message",children:Object(m.jsxs)("div",{className:"message-content",children:[Object(m.jsxs)("h2",{children:["Your Order on ",J," quantity of ",U.name," is successfully placed"]}),Object(m.jsx)("p",{children:"View your orders in Myorder."}),Object(m.jsx)("button",{onClick:function(){return K(!1)},children:"OK"})]})}):Object(m.jsx)("div",{}),f?Object(m.jsx)("div",{className:"message",children:Object(m.jsxs)("div",{className:"message-content",children:[Object(m.jsx)("h2",{children:"Signup Required"}),Object(m.jsxs)("p",{children:["Please signup ",Object(m.jsx)(l.b,{to:"/login",children:"Here"})," before making order."]}),Object(m.jsx)("button",{onClick:function(){return x(!1)},children:"OK"})]})}):Object(m.jsx)("div",{}),Object(m.jsx)(ie,{author:b,streamId:j,socket:se,commentList:E,setCommentList:T})]})]})]})},fe=(c(447),c(448),function(e){var t=e._id,c=(e.userId,e.productId),n=e.quantity,s=(e.isPaid,e.calculateTotalPrice),r=Object(a.useState)(n),o=Object(i.a)(r,2),l=o[0],u=(o[1],Object(a.useState)(null)),j=Object(i.a)(u,2),d=j[0],b=j[1],h=Object(a.useState)(!0),p=Object(i.a)(h,2),O=p[0],f=p[1],x=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/products/").concat(c));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,b(n),f(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[]),Object(a.useEffect)((function(){null!=d&&function(){var e=l*parseFloat(d.price);console.log(d.price),s(e)}()}),[d]),O?Object(m.jsx)("div",{}):Object(m.jsxs)("div",{className:"checkoutitem",children:[Object(m.jsxs)("p",{children:[t," "]}),Object(m.jsx)("p",{children:d.name}),Object(m.jsxs)("p",{className:"checkoutitem-price",children:["RM",d.price]}),Object(m.jsxs)("p",{children:[l," "]}),Object(m.jsxs)("p",{className:"checkoutitem-price",children:["RM",l*d.price]})]})}),xe=JSON.parse(localStorage.getItem("userData")),ve=function(e){var t=Object(a.useState)(!0),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)([]),o=Object(i.a)(r,2),l=o[0],u=o[1],d=Object(a.useState)(xe.userId),b=Object(i.a)(d,2),h=b[0],p=(b[1],Object(a.useState)([])),O=Object(i.a)(p,2),f=O[0],x=O[1],g=Object(a.useState)(0),y=Object(i.a)(g,2),S=y[0],w=y[1],I=Object(a.useState)(!1),P=Object(i.a)(I,2),D=P[0],E=P[1],T=Object(a.useState)(),_=Object(i.a)(T,2),A=_[0],M=_[1],q=function(){var t=Object(C.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.history.push("/myorder");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(),H();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/users/account/").concat(h));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,u(c),s(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/orders/unpaid/").concat(xe.userId));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,console.log(c),x(c),s(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),U=function(){v.a.put("".concat(N,"/orders/paid/").concat(xe.userId),{isPaid:!0}).then((function(e){E(!0),console.log(e)})).catch((function(e){console.log(e)}))},F=function(e){w(S+e)},H=function(){var e=S+l.totalSpent;M(e)};return Object(a.useEffect)((function(){L()}),[h]),Object(a.useEffect)((function(){B()}),[]),Object(a.useEffect)((function(){!function(){var e={totalSpent:A};v.a.put("".concat(N,"/users/totalSpent/").concat(xe.userId),e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}()}),[A]),n?Object(m.jsx)("div",{className:"loadingscreen",children:Object(m.jsx)("div",{className:"loading"})}):Object(m.jsxs)("div",{className:"cartscreen",children:[Object(m.jsx)("h2",{className:"cartscreen-header",children:"Invoice"}),Object(m.jsx)("h3",{className:"cartscreen-header",children:"Basic Information"}),Object(m.jsxs)("div",{className:"cartscreen-content",children:[Object(m.jsx)("div",{className:"cartscreen-left1",children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{children:["Name: ",l.name]}),Object(m.jsxs)("p",{children:["Email: ",l.email]}),Object(m.jsxs)("p",{children:["Address: ",l.address]}),Object(m.jsxs)("p",{children:["Phone Number: ",l.phone]}),Object(m.jsx)("button",{className:"cartscreen-btn",onClick:R,children:"Make Payment"})]})}),Object(m.jsx)("div",{className:"cartscreen-right1",children:Object(m.jsxs)("div",{className:"cartscreen-info",children:[f.map((function(e){return Object(m.jsx)(fe,Object(j.a)(Object(j.a)({},e),{},{calculateTotalPrice:F}),e._id)})),Object(m.jsx)("p",{children:"Grand Total:"}),Object(m.jsxs)("p",{children:["RM",S]})]})})]}),D?Object(m.jsx)("div",{className:"message",children:Object(m.jsxs)("div",{className:"message-content",children:[Object(m.jsx)("h2",{children:"Thank You!"}),Object(m.jsx)("p",{children:"Your payment is made"}),Object(m.jsx)("p",{children:"You can view your order history in MyOrder."}),Object(m.jsx)("button",{onClick:q,children:"OK"})]})}):Object(m.jsx)("div",{})]})},ge=(c(449),function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(""),r=Object(i.a)(s,2),o=r[0],l=r[1],u=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/users/account/").concat(p.getUserData().userId));case 3:return t=e.sent,e.next=6,t.json();case 6:(c=e.sent)&&(c.totalSpent<100?(console.log(c.totalSpent),n("basic"),l("basic")):c.totalSpent>=100&&c.totalSpent<500?(n("Bronze"),l("Bronze")):c.totalSpent>=500&&c.totalSpent<2e3?(n("Silver"),l("Silver")):c.totalSpent>=2e3&&(n("Gold"),l("Gold"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u()}),[]),Object(m.jsx)("div",{className:"profile",children:Object(m.jsxs)("div",{className:"account-information",children:[Object(m.jsx)("h1",{className:"title mem",children:"Membership"}),Object(m.jsx)("h2",{class:"member",name:"label",onChange:function(e){l(e.currentTarget.value)},children:o}),Object(m.jsxs)("div",{className:"column-1 box memberbox",children:[Object(m.jsxs)("b",{name:"rank",onChange:function(e){n(e.currentTarget.value)},children:["Congratulations! You just recieved a ",c," membership."]}),Object(m.jsx)("b",{children:" Contact 0185721698 for more info from our customer service"})]})]})})}),Ne=(c(450),JSON.parse(localStorage.getItem("userData"))),ye=function(e){var t=e.click;return Object(m.jsxs)("nav",{className:"navbar",children:[Object(m.jsx)("div",{className:"navbar-logo",children:Object(m.jsxs)(l.b,{to:"/",children:[Object(m.jsx)("img",{src:g,alt:"logo"}),"UWU Shopping Site"]})}),Object(m.jsxs)("ul",{className:"navbar-links",children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/",children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/myshop",children:"MyShop"})}),Object(m.jsx)("li",{children:Object(m.jsxs)(l.b,{to:"/myorder",className:"order-link",children:[Object(m.jsx)("i",{className:"fas fa-shopping-cart"}),Object(m.jsxs)("span",{children:["MyOrder",Object(m.jsx)("span",{className:"navbar-cartbadge",children:"0"})]})]})}),Object(m.jsx)("li",{className:"space",children:Object(m.jsx)("div",{})}),Object(m.jsx)("li",{children:p.isAuthenticated()?Object(m.jsx)(l.b,{to:"/myprofile",className:"username",children:Ne.name}):Object(m.jsx)("div",{})}),Object(m.jsx)("li",{children:p.isAuthenticated()?Object(m.jsx)(l.b,{to:"/",onClick:function(){p.logout((function(){window.location.reload(!1)}))},className:"signup",children:"Logout"}):Object(m.jsx)(l.b,{to:"/login",className:"signup",children:"Sign In"})})]}),Object(m.jsxs)("div",{className:"hamburger-menu",onClick:t,children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]})]})},Se=(c(451),function(e){var t=e.show,c=e.click;return t&&Object(m.jsx)("div",{className:"backdrop",onClick:c})}),we=(c(452),JSON.parse(localStorage.getItem("userData"))),ke=function(e){var t=e.show,c=e.click,n=["sidedrawer"];t&&n.push("show");return Object(m.jsx)("div",{className:n.join(" "),children:Object(m.jsxs)("ul",{className:"sidedrawer-links",onClick:c,children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/",children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/myshop",children:"MyShop"})}),Object(m.jsx)("li",{children:Object(m.jsxs)(l.b,{to:"/myorder",children:[Object(m.jsx)("i",{className:"fas fa-shopping-cart"}),Object(m.jsxs)("span",{children:["MyOrder",Object(m.jsx)("span",{className:"sidedrawer-cartbadge",children:"0"})]})]})}),Object(m.jsx)("li",{children:p.isAuthenticated()?Object(m.jsx)(l.b,{to:"/myprofile",children:we.name}):Object(m.jsx)("div",{})}),Object(m.jsx)("li",{children:p.isAuthenticated()?Object(m.jsx)(l.b,{to:"/",onClick:function(){p.logout((function(){window.location.reload(!1)}))},children:"Logout"}):Object(m.jsx)(l.b,{to:"/login",children:"Sign In"})})]})})};var Ce=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(ye,{click:function(){return n(!0)}}),Object(m.jsx)(ke,{show:c,click:function(){return n(!1)}}),Object(m.jsx)(Se,{show:c,click:function(){return n(!1)}}),Object(m.jsx)("main",{children:Object(m.jsxs)(u.d,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/login",component:y}),Object(m.jsx)(u.b,{exact:!0,path:"/register",component:W}),Object(m.jsx)(u.b,{exact:!0,path:"/",component:M}),Object(m.jsx)(u.b,{exact:!0,path:"/product/:id",component:R}),Object(m.jsx)(u.b,{exact:!0,path:"/streamingbuyer/:streamingId",component:Oe}),Object(m.jsx)(f,{exact:!0,path:"/myorder",component:H}),Object(m.jsx)(f,{exact:!0,path:"/myshop",component:z}),Object(m.jsx)(f,{exact:!0,path:"/myshop/createmyshop",component:K}),Object(m.jsx)(f,{exact:!0,path:"/myshop/editmyshop",component:G}),Object(m.jsx)(f,{exact:!0,path:"/myshop/addproduct",component:Z}),Object(m.jsx)(f,{exact:!0,path:"/myshop/editproduct/:id",component:V}),Object(m.jsx)(f,{exact:!0,path:"/myshop/orders",component:te}),Object(m.jsx)(f,{exact:!0,path:"/myprofile",component:ne}),Object(m.jsx)(f,{exact:!0,path:"/streamingseller",component:he}),Object(m.jsx)(f,{exact:!0,path:"/checkout",component:ve}),Object(m.jsx)(u.b,{exact:!0,path:"/membership",component:ge}),Object(m.jsx)(u.b,{path:"*",component:function(){return"404 NOT FOUND"}})]})})]})},Ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,454)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};o.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(Ce,{})}),document.getElementById("root")),Ie()}},[[453,1,2]]]);
//# sourceMappingURL=main.d38c4b46.chunk.js.map