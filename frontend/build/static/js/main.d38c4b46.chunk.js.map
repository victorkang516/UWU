{"version":3,"sources":["screens/StreamingBuyerScreen.js","authentication/auth.js","authentication/protectedRoute.js","screens/uwupic.png","service/backendUrl.js","screens/LoginScreen.js","components/Loading.js","components/Streaming.js","components/Product.js","screens/HomeScreen.js","screens/ProductScreen.js","components/order/CartItem.js","components/order/HistoryItem.js","components/order/AuctionItem.js","screens/MyOrderScreen.js","screens/RegisterScreen.js","screens/MyShopScreen.js","screens/EditMyShopScreen.js","screens/CreateMyShopScreen.js","screens/MyShopEditProductScreen.js","screens/MyShopAddProductScreen.js","components/BuyersOrders.js","screens/MyShopOrdersScreen.js","screens/Membershipgambar.png","screens/MyProfileScreen.js","service/socket.js","components/streaming/CommentSection.js","components/streaming/ProductForSale.js","screens/auction-table.png","screens/StreamingSellerScreen.js","components/CheckOutItem.js","screens/CheckOutScreen.js","screens/Membership.js","components/Navbar.js","components/BackDrop.js","components/SideDrawer.js","App.js","reportWebVitals.js","index.js"],"names":["peerConnection","this","authenticated","localStorage","getItem","cb","userData","setItem","JSON","stringify","clear","parse","ProtectedRoute","Component","component","rest","render","props","console","log","auth","isAuthenticated","to","pathname","state","from","location","backendUrl","LoginScreen","useState","email","setEmail","password","setPassword","useEffect","className","src","logo","alt","name","value","onChange","event","currentTarget","placeholder","type","onClick","preventDefault","test","axios","get","then","res","data","userId","_id","login","history","push","window","reload","alert","catch","error","Loading","Streaming","title","shopName","Product","description","price","imageUrl","countInStock","process","Date","now","onError","e","target","onerror","HomeScreen","loadingProducts","setLoadingProducts","loadingStreaming","setLoadingStreamings","categories","setCategories","currentCategory","setCurrentCategory","products","setProducts","productsByCategory","setProductsByCategory","itemsPerPage","currentItems","setCurrentItems","pageCount","setPageCount","itemOffset","setItemOffset","streamings","setStreamings","fetchData","a","fetch","response","json","result","newCategories","map","product","category","Array","Set","getUniqueCategories","newProducts","filter","filterProductsByCategory","newOffset","length","Math","ceil","endOffset","slice","dots","infinite","speed","slidesToShow","slidesToScroll","autoplay","centerMode","centerPadding","responsive","breakpoint","settings","streaming","breakLabel","nextLabel","onPageChange","selected","pageRangeDisplayed","previousLabel","renderOnZeroPageCount","ProductScreen","id","useParams","url","loading","setLoading","showMessage","setShowMessage","setProduct","quantity","setQuantity","inStock","setInStock","checkInStock","min","max","disabled","order","productId","shopId","post","CartItem","removeOrder","isPaid","calculateTotalPrice","qty","setQty","setImageUrl","calculateSubTotal","subTotal","parseFloat","put","updateData","delete","AuctionItem","bidPrice","MyOrderScreen","ploading","setPloading","orders","setOrders","totalPrice","settotalPrice","porders","setPorders","fetchPdata","newOrders","isAuctionItem","HistoryItem","RegisterScreen","setName","address","setAddress","phone","setPhone","required","user","success","status","MyShopScreen","shop","setShop","shopProducts","setShopProducts","fetchShopData","fetchShopProducts","shopImageUrl","shopDescription","shopAddress","shopPhone","shopEmail","align","shopProduct","EditMyShopScreen","inputFileRef","photo","setPhoto","setShopName","setShopDescription","setShopImageUrl","setShopAddress","setShopPhone","setShopEmail","method","encType","ref","accept","files","formData","FormData","append","headers","img","document","getElementById","CreateMyShopScreen","setShopAdress","MyShopEditProductScreen","productName","setProductName","productDescription","setProductDescription","setPrice","setCountInStock","setCategory","setShopId","productImageUrl","setProductImageUrl","productLoading","setProductLoading","onDelete","MyShopAddProductScreen","Orders","orderPaid","setUser","fetchUserData","fetchProductData","MyShopOrdersScreen","shopOrders","setShopOrders","fetchShopOrders","shopOrder","key","MyProfileScreen","profilePhoto","setProfilePhoto","imageHash","setImageHash","totalspent","settotalspent","fetchAccountInformation","getUserData","imgUrl","totalSpent","href","current","click","socket","io","CommentSection","author","streamId","commentList","setCommentList","currentComment","setCurrentComment","writeComment","commentData","room","message","time","getHours","getMinutes","emit","list","commentContent","index","onKeyPress","ProductForSale","setShowProducts","startSale","peerConnections","config","iceServers","StreamingSellerScreen","started","setStarted","streamTitle","setStreamTitle","setStreamId","isAuction","setIsAuction","startStreaming","isAuctionStarted","minimumBid","bidderId","bidderName","isAuctionEnded","stopStreaming","stream","querySelector","srcObject","getTracks","stop","audioSource","setAudioSource","videoSource","setVideoSource","deviceInfos","setDeviceInfos","getDevices","navigator","mediaDevices","enumerateDevices","devices","err","gotStream","videoElement","handleError","forEach","track","constraints","audio","deviceId","exact","undefined","video","getUserMedia","getStream","fetchShop","on","roomID","setRemoteDescription","viewerId","RTCPeerConnection","addTrack","onicecandidate","candidate","createOffer","sdp","setLocalDescription","localDescription","addIceCandidate","RTCIceCandidate","setBiddingnData","firstUpdate","setFirstUpdate","productOnSale","setProductOnSale","showProducts","fetchProducts","dbUpdateStreamingProductId","dbRemoveStreamingProductId","socketEmitStartSale","socketEmitEndSale","setIsAuctionStarted","setMinimumBid","bid","biddingData","setIsAuctionEnded","expiryTimestamp","setSeconds","getSeconds","useTimer","autoStart","onExpire","auctionRoundEnd","seconds","minutes","isRunning","hours","days","pause","start","restart","resume","dbUpdateAuctionStreaming","emitSocketEndAuction","emitSocketAuctionNewHighestBid","auctionResetTimer","socketEmitStartAuction","socketEmitAuctionNextRound","dbOrderAuctionItemForBidder","autoPlay","width","height","muted","AuctionTablePNG","device","kind","videoDevice","label","audioDevice","streamingId","setStreaming","username","showLoginMessage","setShowLoginMessage","fetchStreaming","fetchProduct","streamerId","joinMessage","createAnswer","ontrack","streams","auctionNextRound","showOrderMessage","setShowOrderMessage","makeOrderMessage","setBid","socketEmitAuctionMakeBid","bidData","CheckOutItem","CheckOutScreen","userInfo","setUserInfo","checkOutItems","setCheckOutItems","settotalSpent","returnMyOrderScreen","makePayment","updateOrderIsPaid","calculateTotalSpent","fetchCheckOut","newTotalSpent","updateUserTotalSpent","checkOutItem","Membership","rank","setRank","setLabel","class","Navbar","logout","BackDrop","show","SideDrawer","sideDrawerClass","join","App","sideToggle","setSideToggle","path","StreamingBuyerScreen","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.d38c4b46.chunk.js","sourcesContent":["import \"./StreamingScreen.css\";\r\nimport \"./StreamingBuyerScreen.css\";\r\n\r\nimport { useParams } from 'react-router';\r\nimport { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useTimer } from 'react-timer-hook';\r\nimport axios from 'axios';\r\n\r\nimport { socket } from \"../service/socket\";\r\n\r\nimport AuctionTablePNG from './auction-table.png';\r\n\r\n\r\nimport auth from '../authentication/auth';\r\n\r\nimport CommentSection from \"../components/streaming/CommentSection\";\r\n\r\nimport backendUrl from \"../service/backendUrl\";\r\n\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nlet peerConnection;\r\nconst config = {\r\n  iceServers: [\r\n    {\r\n      \"urls\": \"stun:stun.l.google.com:19302\",\r\n    },\r\n    // { \r\n    //   \"urls\": \"turn:TURN_IP?transport=tcp\",\r\n    //   \"username\": \"TURN_USERNAME\",\r\n    //   \"credential\": \"TURN_CREDENTIALS\"\r\n    // }\r\n  ]\r\n};\r\n\r\n\r\nconst StreamingSellerScreen = () => {\r\n  let { streamingId } = useParams();\r\n\r\n  const [streaming, setStreaming] = useState(null);\r\n  const [streamId] = useState(streamingId);\r\n  const [username] = useState(userData ? userData.name : \"Noname\");\r\n\r\n  const [showLoginMessage, setShowLoginMessage] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [commentList, setCommentList] = useState([]);\r\n\r\n  const [isAuction, setIsAuction] = useState(false);\r\n\r\n  // UseEffect Callbacks\r\n\r\n  const fetchStreaming = async () => {\r\n    try {\r\n      const response = await fetch(`${backendUrl}/streamings/${streamId}`);\r\n      const result = await response.json();\r\n      console.log(result);\r\n      setStreaming(result);\r\n      if (loading == true)\r\n        setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Get Streaming data\r\n    fetchStreaming();\r\n  }, [streamId]);\r\n\r\n  useEffect(() => {\r\n    if (streaming != null) {\r\n      if (streaming.productId != \"\")\r\n        fetchProduct();\r\n      else\r\n        setProductOnSale(null);\r\n\r\n      if (streaming.isAuctionEnded)\r\n        setIsAuctionEnded(streaming.isAuctionEnded);\r\n      // For Auction\r\n      setIsAuction(streaming.isAuction);\r\n      //setIsAuctionStarted(streaming.isAuctionStarted);\r\n      // For Auction\r\n    }\r\n\r\n  }, [streaming])\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      socket.emit(\"join_streaming\", streamId);\r\n      console.log(\"Join streaming\" + streamId);\r\n    }\r\n  }, [loading]);\r\n\r\n\r\n  // -------------------------- Socket for Comment -----------------------------\r\n\r\n  const joinMessage = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: `${username} joined!`,\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    socket.emit(\"write_comment\", commentData);\r\n    setCommentList((list) => [...list, commentData]);\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    // ----------------------- Socket for Video streaming ----------------------------\r\n\r\n    socket.on(\"offer\", (streamerId, description) => {\r\n      peerConnection = new RTCPeerConnection(config);\r\n      console.log(\"streamerId: \" + streamerId);\r\n      console.log(description);\r\n      joinMessage();\r\n      peerConnection\r\n        .setRemoteDescription(description)\r\n        .then(() => peerConnection.createAnswer())\r\n        .then(sdp => peerConnection.setLocalDescription(sdp))\r\n        .then(() => {\r\n          socket.emit(\"answer\", streamerId, peerConnection.localDescription);\r\n        });\r\n      peerConnection.ontrack = event => {\r\n        if (event.streams[0] != null) {\r\n          const video = document.querySelector(\"video\");\r\n          video.srcObject = event.streams[0];\r\n        } else {\r\n          console.log(\"No stream\");\r\n        }\r\n      };\r\n      peerConnection.onicecandidate = event => {\r\n        if (event.candidate) {\r\n          socket.emit(\"candidate\", streamerId, event.candidate);\r\n        }\r\n      };\r\n    });\r\n\r\n    socket.on(\"candidate\", (id, candidate) => {\r\n      peerConnection\r\n        .addIceCandidate(new RTCIceCandidate(candidate))\r\n        .catch(e => console.error(e));\r\n    });\r\n\r\n    socket.on(\"receive_comment\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n    });\r\n\r\n    socket.on(\"sale_started\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n      fetchStreaming();\r\n    });\r\n\r\n    socket.on(\"sale_ended\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n      fetchStreaming();\r\n    });\r\n\r\n    // Auction /////////////////////\r\n    socket.on(\"auction_started\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n      fetchStreaming();\r\n    });\r\n\r\n    socket.on(\"auction_next_round\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n      auctionNextRound();\r\n    });\r\n\r\n    socket.on(\"auction_new_highest_bid\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n      fetchStreaming();\r\n      auctionResetTimer();\r\n    });\r\n\r\n    socket.on(\"auction_ended\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n      fetchStreaming();\r\n    });\r\n\r\n    socket.on(\"streamer_disconnected\", () => {\r\n      // Video\r\n      var videoElement = document.querySelector(\"video\");\r\n      let stream = videoElement.srcObject;\r\n      if (stream != null) {\r\n        stream.getTracks()[0].stop();\r\n        stream.getTracks()[1].stop();\r\n      }\r\n\r\n      // Peer connection\r\n      peerConnection = null;\r\n\r\n      // Socket\r\n      //socket.disconnect();\r\n\r\n    })\r\n  }, []);\r\n\r\n\r\n  // ----------------------------- Make Order --------------------------------\r\n  // Product\r\n  const [productOnSale, setProductOnSale] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [showOrderMessage, setShowOrderMessage] = useState(false);\r\n\r\n  const fetchProduct = async () => {\r\n    try {\r\n      const response = await fetch(`${backendUrl}/products/${streaming.productId}`);\r\n      const result = await response.json();\r\n      console.log(result);\r\n      setProductOnSale(result);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (productOnSale !== null && isAuction) // For Auction\r\n      setIsAuctionStarted(true);\r\n    else if (productOnSale === null && isAuction)\r\n      setIsAuctionStarted(false);\r\n  }, [productOnSale]);\r\n\r\n  const makeOrder = () => {\r\n    const order = {\r\n      userId: userData.userId,\r\n      productId: productOnSale._id,\r\n      quantity: quantity,\r\n      shopId: productOnSale.shopId\r\n    };\r\n\r\n    axios.post(`${backendUrl}/orders`, order)\r\n      .then(res => {\r\n        console.log(res);\r\n        setShowOrderMessage(true);\r\n        makeOrderMessage();\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  const makeOrderMessage = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: `${username} made ${quantity} order on ${productOnSale.name}!`,\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    socket.emit(\"write_comment\", commentData);\r\n    setCommentList((list) => [...list, commentData]);\r\n  }\r\n\r\n\r\n  // --------------------- Auction Product -----------------------\r\n  const [isAuctionStarted, setIsAuctionStarted] = useState(false);\r\n  const [bid, setBid] = useState();\r\n  const [isAuctionEnded, setIsAuctionEnded] = useState(false);\r\n\r\n  const expiryTimestamp = new Date();\r\n  expiryTimestamp.setSeconds(expiryTimestamp.getSeconds() + 30);\r\n\r\n  const {\r\n    seconds,\r\n    minutes,\r\n    hours,\r\n    days,\r\n    isRunning,\r\n    start,\r\n    pause,\r\n    resume,\r\n    restart,\r\n  } = useTimer({ expiryTimestamp, autoStart: false, onExpire: () => console.log(\"Round ended\") });\r\n\r\n\r\n  const auctionNextRound = () => {\r\n    const time = new Date();\r\n    time.setSeconds(time.getSeconds() + 30);\r\n    restart(time);\r\n  }\r\n\r\n  const auctionResetTimer = () => {\r\n    const time = new Date();\r\n    time.setSeconds(time.getSeconds() + 30);\r\n    restart(time);\r\n    pause();\r\n  }\r\n\r\n  const endAuction = () => {\r\n    //setIsAuctionEnded(true);\r\n  }\r\n\r\n  const auctionMakeBid = () => {\r\n    socketEmitAuctionMakeBid()\r\n  }\r\n\r\n  const socketEmitAuctionMakeBid = () => {\r\n    const bidData = {\r\n      room: streamId,\r\n      bidderId: userData.userId,\r\n      bidderName: userData.name,\r\n      bid: bid\r\n    };\r\n    socket.emit(\"auction_make_bid\", bidData);\r\n  }\r\n\r\n\r\n\r\n\r\n  // ------------------------------ Render Contents --------------------------------\r\n  if (loading) {\r\n    return <div className=\"loadingscreen\">\r\n      <div className=\"loading\"></div>\r\n    </div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"streaming\">\r\n\r\n      <div className=\"streaming-header\">\r\n        <h1>{streaming.title}</h1>\r\n      </div>\r\n\r\n      <div className=\"streaming-content\">\r\n\r\n        <div className=\"video-content\">\r\n          <video autoPlay width=\"100%\" height=\"480\" muted></video>\r\n          {isAuctionStarted ?\r\n            <div className=\"uwu-auctiontimer\">\r\n              {isRunning ?\r\n                < p className=\"uwu-auctiontimer-title\">Bid Now!!</p>\r\n                :\r\n                <p className=\"uwu-auctiontimer-title\">Wait For Next Round</p>\r\n              }\r\n              <p className=\"uwu-auctiontimer-time\">{minutes >= 10 ? \"\" + minutes : \"0\" + minutes}:{seconds >= 10 ? \"\" + seconds : \"0\" + seconds}</p>\r\n            </div>\r\n            :\r\n            <div></div>\r\n          }\r\n        </div>\r\n\r\n        <div className=\"sections\">\r\n\r\n\r\n          {!isAuction ?\r\n\r\n            //Normal Shop\r\n            <div className=\"streaming-shop\">\r\n              <h2>{streaming.shopName}</h2>\r\n\r\n              <div className=\"streaming-shop-body\">\r\n                <div className=\"streaming-shelf\">\r\n                  <img src=\"https://media.istockphoto.com/photos/empty-wooden-shelf-picture-id479473084?k=20&m=479473084&s=170667a&w=0&h=yHxDzAysnHsEmWtyL4dGeAqWGeqtA-EzdiRpBaCvkIE=\" alt=\"shelf\" className=\"shelf\"></img>\r\n                  {productOnSale ?\r\n                    <img\r\n                      src={`${process.env.PUBLIC_URL}/images/${productOnSale.imageUrl}?${Date.now()}`}\r\n                      onError={(e) => {\r\n                        e.target.onerror = null;\r\n                        e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n                      }}\r\n                      alt=\"\"\r\n                      className=\"streaming-product\" />\r\n                    :\r\n                    <div className=\"streaming-noproduct\">Nothing on sale</div>\r\n                  }\r\n                </div>\r\n\r\n                {productOnSale ?\r\n                  <div className=\"productOnSale\">\r\n                    <h3>{productOnSale.name}</h3>\r\n                    <div className=\"productOnSale-detail\">\r\n                      <p>{productOnSale.countInStock} left</p>\r\n                      <p>RM {productOnSale.price}</p>\r\n                    </div>\r\n                  </div>\r\n                  :\r\n                  <div></div>\r\n                }\r\n\r\n                {productOnSale ?\r\n                  <div className=\"productOnSale-makeorder\">\r\n                    <input\r\n                      type=\"number\"\r\n                      value={quantity}\r\n                      onChange={(event) => { setQuantity(event.target.value) }}\r\n                      min=\"1\"\r\n                      max={productOnSale.countInStock}\r\n                      className=\"uwu-input\"\r\n                    />\r\n                    {auth.isAuthenticated() ?\r\n                      <button onClick={makeOrder} className=\"uwu-btn\">Make Order</button>\r\n                      :\r\n                      <button onClick={() => setShowLoginMessage(true)} className=\"uwu-btn\">Make Order</button>\r\n                    }\r\n                  </div>\r\n                  :\r\n                  <div></div>\r\n                }\r\n              </div>\r\n            </div>\r\n            :\r\n\r\n\r\n            // Aucion Shop\r\n            <div className=\"streaming-shop\">\r\n              <h2>{streaming.shopName}</h2>\r\n\r\n              <div className=\"streaming-shop-body\">\r\n                <div className=\"streaming-shelf\">\r\n                  <img src={AuctionTablePNG} alt=\"shelf\" className=\"shelf\"></img>\r\n                  {productOnSale ?\r\n                    <img\r\n                      src={`${process.env.PUBLIC_URL}/images/${productOnSale.imageUrl}?${Date.now()}`}\r\n                      onError={(e) => {\r\n                        e.target.onerror = null;\r\n                        e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n                      }}\r\n                      alt=\"\"\r\n                      className=\"streaming-product\" />\r\n                    :\r\n                    <div className=\"streaming-noproduct\">Nothing on auction</div>\r\n                  }\r\n                </div>\r\n\r\n                {isAuctionStarted && productOnSale != null ?\r\n                  <div className=\"productOnSale\">\r\n                    <h3>{productOnSale.name}</h3>\r\n                    <div className=\"productOnSale-detail\">\r\n                      <p>Current Highest Bid</p>\r\n                      <p>{streaming.minimumBid}</p>\r\n                    </div>\r\n                  </div>\r\n                  :\r\n                  <div></div>\r\n                }\r\n\r\n                {isAuctionStarted && productOnSale != null ?\r\n                  <div className=\"productOnSale-makebid\">\r\n                    {isAuctionEnded ?\r\n                      <div className=\"auction-win-message center noselect\">\r\n                        The Winner is {streaming.bidderName} !!\r\n                      </div>\r\n                      :\r\n                      <div>\r\n                        <div className=\"center grey noselect\">\r\n                          {!isRunning ? \"You can only bid after seller start next round.\" : \"Your bid amount must higher than minimum bid.\"}\r\n                        </div>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={bid}\r\n                          onChange={(event) => { setBid(event.target.value) }}\r\n                          min={streaming.minimumBid}\r\n                          className=\"uwu-input\"\r\n                          placeholder=\"Enter your Bid Amount\"\r\n                        />\r\n                        {auth.isAuthenticated() ?\r\n                          <button onClick={auctionMakeBid} className=\"uwu-btn\" disabled={!isRunning}>Make Bid</button>\r\n                          :\r\n                          <button onClick={() => setShowLoginMessage(true)} className=\"btn\">Make Bid</button>\r\n                        }\r\n                      </div>\r\n                    }\r\n                  </div>\r\n                  :\r\n                  <div className=\"center grey noselect\">Auction is not started yet.</div>\r\n                }\r\n              </div>\r\n            </div>\r\n          }\r\n\r\n\r\n\r\n          {showOrderMessage ?\r\n            <div className=\"message\">\r\n              <div className=\"message-content\">\r\n                <h2>Your Order on {quantity} quantity of {productOnSale.name} is successfully placed</h2>\r\n                <p>View your orders in Myorder.</p>\r\n                <button onClick={() => setShowOrderMessage(false)}>OK</button>\r\n              </div>\r\n            </div>\r\n            :\r\n            <div></div>\r\n          }\r\n\r\n          {showLoginMessage ?\r\n            <div className=\"message\">\r\n              <div className=\"message-content\">\r\n                <h2>Signup Required</h2>\r\n                <p>Please signup <Link to=\"/login\">Here</Link> before making order.</p>\r\n                <button onClick={() => setShowLoginMessage(false)}>OK</button>\r\n              </div>\r\n            </div>\r\n            :\r\n            <div></div>\r\n          }\r\n\r\n\r\n          <CommentSection\r\n            author={username}\r\n            streamId={streamId}\r\n            socket={socket}\r\n            commentList={commentList}\r\n            setCommentList={setCommentList}\r\n          />\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default StreamingSellerScreen","class Auth {\r\n  constructor() {\r\n    this.authenticated = localStorage.getItem('userData') ? true : false;\r\n  }\r\n\r\n  login(cb, userData){\r\n    localStorage.setItem('userData', JSON.stringify(userData));\r\n    this.authenticated = true;\r\n    cb();\r\n  }\r\n\r\n  logout(cb){\r\n    localStorage.clear();\r\n    this.authenticated = false;\r\n    cb();\r\n  }\r\n  getUserData() {\r\n    return JSON.parse(localStorage.getItem('userData'));\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n  \r\n}\r\n\r\nexport default new Auth();","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport auth from './auth';\r\n\r\nexport const ProtectedRoute = ({component: Component, ...rest}) => {\r\n  return (\r\n    <Route \r\n      {...rest}\r\n      render = {props => {\r\n        console.log(auth.isAuthenticated());\r\n        if(auth.isAuthenticated()){\r\n          return <Component {...props} />\r\n        } else {\r\n          return <Redirect to={\r\n            {\r\n              pathname: \"/login\",\r\n              state: {\r\n                from: props.location\r\n              }\r\n            }\r\n          }/>\r\n        }\r\n        \r\n      }}\r\n    />\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/uwupic.de872405.png\";","const backendUrl = \"https://uwushoppingsite.herokuapp.com\";\r\nexport default backendUrl","import './LoginScreen.css';\r\nimport { useState, useEffect } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport auth from '../authentication/auth';\r\nimport logo from './uwupic.png';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n// import sidebar from './sidebar.js';\r\n// const new_component = NewHOC (sidebar);\r\nconst LoginScreen = (props) => {\r\n\r\n\tconst [email,setEmail] = useState('');\r\n\tconst [password,setPassword] = useState('');\r\n\r\n\tconst onEmailChange = (event) => {\r\n\t\tsetEmail(event.currentTarget.value);\r\n\t}\r\n\r\n\tconst onPasswordChange = (event) => {\r\n\t\tsetPassword(event.currentTarget.value);\r\n\t}\r\n\r\n\tconst onSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n    if (email !== \"\" && password !== \"\") {\r\n      const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n      if (email && regex.test(email) !== false) {\r\n        axios.get(`${backendUrl}/users/${email}`)\r\n\t\t\t.then(res => {\r\n\t\t\t\t\r\n        if (res.data&&res.data.email === email&&res.data.password === password){\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tlet userData = {\r\n\t\t\t\t\t\t\tuserId: res.data._id,\r\n\t\t\t\t\t\t\tname: res.data.name\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tauth.login(()=>{\r\n\t\t\t\t\t\t\tprops.history.push(\"/\");\r\n\t\t\t\t\t\t\twindow.location.reload(false);\r\n\t\t\t\t\t\t}, userData)\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n          alert(\"Please key in the right info\");\r\n        }\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t})\r\n\t\t\r\n      }else {\r\n        alert(\"Please key in the right email format\");}\r\n    }else {\r\n      alert(\"Fill in the blanks\");}\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(email);\r\n\t}, [email])\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(password);\r\n\t}, [password])\r\n\r\n\treturn (\r\n\t\t<div className=\"loginscreen\">\r\n\r\n\t\t\t<div className=\"sidebar\">\r\n\t\t\t\t<img src={logo} alt=\"logo\"></img>\r\n\t\t\t\t<h2>Welcome to UWU Shopping Site!!</h2>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className = \"login\">\r\n\t\t\t\t<h2>Welcome to Login page.</h2>\r\n\t\t\t\t<form className=\"login-form\">\r\n\r\n\t\t\t\t\t<h2>Log In</h2>\r\n\r\n\t\t\t\t\t<div className=\"form-input\">\r\n\t\t\t\t\t\t<input name=\"email\" value={email} onChange={onEmailChange} placeholder=\"Email\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"form-input\">\r\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" value={password} onChange={onPasswordChange} placeholder=\"Password\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-input\">\r\n\t\t\t\t\t\t<button type=\"submit\" onClick={onSubmit}>Login</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Link to=\"/register\">Did not have an account? <span>Register Here</span></Link>\r\n\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n\t\r\n\t\r\n}\r\n\r\nexport default LoginScreen;","import React from 'react'\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className=\"loadingscreen\">\r\n      <div className=\"loading\"></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loading\r\n","import './Streaming.css';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst Streaming = ({_id, title, shopName}) => {\r\n  return (\r\n    <div className=\"streaming-card\">\r\n      <div className=\"gradient\"></div>\r\n      <Link to={`/streamingbuyer/${_id}`}>\r\n        <h3 className=\"streaming-title\">{title}</h3>\r\n        <p className=\"streaming-shopName\">{shopName}</p>\r\n      </Link>\r\n      <img src=\"http://cdn2.hubspot.net/hubfs/53/00-Blog_Thinkstock_Images/Live_Streaming_Video_Guide.jpg\" className=\"streaming-image\" alt=\"streamingImg\"/>\r\n      <div className=\"streaming-icon\">Live</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Streaming\r\n","import './Product.css';\r\n\r\nconst Product = ({ _id, name, description, price, countInStock, imageUrl }) => {\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      {/* I copy from MyProfile on how to load the image. */}\r\n      <img\r\n        src={`${process.env.PUBLIC_URL}/images/${imageUrl}?${Date.now()}`}\r\n        onError={(e) => {\r\n          e.target.onerror = null;\r\n          e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n        }} alt=\"\" />\r\n        \r\n      <div className=\"product-info\">\r\n        <p className=\"info-name\">{name}</p>\r\n        <p className=\"info-description\">\r\n          {description}\r\n        </p>\r\n\r\n        <p className=\"info-price\">RM{price}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Product\r\n","import './HomeScreen.css';\r\nimport { useState, useEffect } from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\n// React Paginate\r\nimport ReactPaginate from 'react-paginate';\r\n// React Slick\r\nimport React from \"react\";\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\n// Components\r\nimport Loading from '../components/Loading';\r\nimport Streaming from '../components/Streaming';\r\nimport Product from '../components/Product';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n\r\nconst HomeScreen = (props) => {\r\n  const [loadingProducts,setLoadingProducts] = useState(true);\r\n  const [loadingStreaming, setLoadingStreamings] = useState(true);\r\n\r\n  const [categories, setCategories] = useState([\"All\"]);\r\n  const [currentCategory, setCurrentCategory] = useState(\"All\");\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const [productsByCategory, setProductsByCategory] = useState([]);\r\n\r\n  // We start with an empty list of products.\r\n  const [itemsPerPage] = useState(8);\r\n  const [currentItems, setCurrentItems] = useState(null);\r\n  const [pageCount, setPageCount] = useState(0);\r\n  // Here we use item offsets; we could also use page offsets\r\n  // following the API or data you're working with.\r\n  const [itemOffset, setItemOffset] = useState(0);\r\n\r\n  \r\n  // Streaming\r\n  const [streamings, setStreamings] = useState([]);\r\n\r\n\r\n  // ------------------------- Fetch data -------------------------\r\n  useEffect(() => {\r\n    const fetchData = async () =>{\r\n      try{\r\n        const response = await fetch(backendUrl + \"/products\");\r\n        const result = await response.json();\r\n  \r\n        setProducts(result);\r\n        setLoadingProducts(false);\r\n  \r\n      } catch(error){\r\n        console.log(error);\r\n      }\r\n  \r\n      try{\r\n        const response = await fetch(backendUrl + \"/streamings\");\r\n        const result = await response.json();\r\n  \r\n        setStreamings(result);\r\n        setLoadingStreamings(false);\r\n  \r\n      } catch(error){\r\n        console.log(error);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n\r\n  // --------------------- Filter Categories ---------------------------\r\n  useEffect(() => {\r\n    const getUniqueCategories = () => {\r\n      let newCategories = [];\r\n      products.map(product => {\r\n        newCategories.push(product.category);\r\n      });\r\n      newCategories = Array.from(new Set(newCategories));\r\n      setCategories(categories => [...categories, ...newCategories]);\r\n    }\r\n    const filterProductsByCategory = () => {\r\n      let newProducts = products.filter( product => currentCategory === product.category || currentCategory === \"All\" );\r\n      setProductsByCategory(newProducts);\r\n    }\r\n    if (products != null) {\r\n      getUniqueCategories();\r\n      filterProductsByCategory();\r\n    }\r\n  }, [products]);\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    const filterProductsByCategory = () => {\r\n      let newProducts = products.filter( product => currentCategory === product.category || currentCategory === \"All\" );\r\n      setProductsByCategory(newProducts);\r\n      if(itemOffset!=0){\r\n        const newOffset = (0 * itemsPerPage) % products.length;\r\n        setItemOffset(newOffset);\r\n        setPageCount(Math.ceil(productsByCategory.length / itemsPerPage));\r\n      }\r\n    }\r\n    filterProductsByCategory();\r\n  }, [currentCategory]);\r\n  \r\n\r\n\r\n  //------------------ Pagination -----------------------\r\n  useEffect(() => {\r\n    if (productsByCategory !== [])\r\n    {\r\n      // Fetch productsByCategory from another resources.\r\n      const endOffset = itemOffset + itemsPerPage;\r\n      console.log(`Loading productsByCategory from ${itemOffset} to ${endOffset}`);\r\n      setCurrentItems(productsByCategory.slice(itemOffset, endOffset));\r\n      setPageCount(Math.ceil(productsByCategory.length / itemsPerPage));\r\n    }\r\n  }, [itemOffset, productsByCategory]);\r\n\r\n  // Invoke when user click to request another page.\r\n  const handlePageClick = (event) => {\r\n    const newOffset = (event.selected * itemsPerPage) % productsByCategory.length;\r\n    console.log(\r\n      `User requested page number ${event.selected}, which is offset ${newOffset}`\r\n    );\r\n    setItemOffset(newOffset);\r\n  };\r\n\r\n  useEffect(()=> {\r\n    console.log(\"Current Items done load\");\r\n  }, [currentItems]);\r\n\r\n\r\n  var settings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    className: \"slick\",\r\n    autoplay: true,\r\n    centerMode: true,\r\n    centerPadding: '100px',\r\n    responsive: [\r\n      {\r\n        breakpoint: 1024,\r\n        settings: {\r\n          slidesToShow: 1,\r\n          slidesToScroll: 1,\r\n          centerMode: false\r\n        }\r\n      },\r\n      {\r\n        breakpoint: 600,\r\n        settings: {\r\n          slidesToShow: 1,\r\n          slidesToScroll: 1,\r\n          centerMode: false\r\n        }\r\n      }\r\n    ]\r\n  };\r\n\r\n\r\n  // ------------------- Render Contents --------------------\r\n  if (loadingProducts || loadingStreaming) {\r\n    return <Loading />\r\n  }\r\n\r\n  return (\r\n    <div className=\"homescreen\">\r\n\r\n      <h2 className=\"label\">Featured Streamings</h2>\r\n\r\n      <div className=\"homescreen-streaming\">\r\n        <Slider {...settings}>\r\n          {streamings.length !== 0 ? streamings.map( streaming => {\r\n            return <Streaming key={streaming._id} {...streaming}/>\r\n          })\r\n          :\r\n          <div className=\"no-streaming\">No Live streaming</div>\r\n          }\r\n        </Slider>\r\n      </div>\r\n\r\n\r\n      <h2 className=\"homesreen-title\">Latest Products </h2>\r\n\r\n      <div className=\"homescreen-main\">\r\n        <div className=\"homescreen-categories\">\r\n          <h3>\r\n            <i className=\"fa fa-list\" aria-hidden=\"true\"></i>\r\n            Categories\r\n          </h3>\r\n          {categories.map(category => {\r\n            return <button key={category} onClick={()=> setCurrentCategory(category)}>{category}</button>\r\n          })}\r\n        </div>\r\n\r\n        <div className=\"homescreen-catalog\">\r\n          \r\n          <div className=\"homescreen-products\">\r\n            {currentItems.map( product =>{\r\n              if (product.countInStock > 0)\r\n                return <Link to={`/product/${product._id}`} key={product._id} className=\"products\">\r\n                  <Product {...product}/>\r\n                </Link>\r\n              \r\n            })}\r\n          \r\n          </div>\r\n\r\n          <ReactPaginate\r\n          breakLabel=\"...\"\r\n          nextLabel=\">\"\r\n          onPageChange={handlePageClick}\r\n          pageRangeDisplayed={5}\r\n          pageCount={pageCount}\r\n          previousLabel=\"<\"\r\n          renderOnZeroPageCount={null}\r\n          className=\"homescreen-pagination\"\r\n          />\r\n\r\n        </div>\r\n\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomeScreen\r\n","import './ProductScreen.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport {Link} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport auth from '../authentication/auth';\r\nimport Loading from \"../components/Loading\";\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\n\r\nconst ProductScreen = (props) => {\r\n  let { id } = useParams();\r\n  let url = `${backendUrl}/products/${id}`;\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [showMessage, setShowMessage] = useState(false);\r\n\r\n  const [product, setProduct] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [inStock, setInStock] = useState(true);\r\n\r\n\r\n\r\n  const fetchData = async () =>{\r\n    try{\r\n      const response = await fetch(url);\r\n      const result = await response.json();\r\n\r\n      setProduct(result);\r\n      setLoading(false);\r\n\r\n    } catch(error){\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (product!=null)\r\n      checkInStock();\r\n  }, [product])\r\n\r\n  const checkInStock = () => {\r\n    if (product.countInStock>0){\r\n      setInStock(true);\r\n    }\r\n  }\r\n\r\n  const makeOrder = () => {\r\n\r\n    const order = {\r\n      userId: userData.userId,\r\n      productId: product._id,\r\n      quantity: quantity,\r\n      shopId: product.shopId\r\n    };\r\n\r\n    axios.post(`${backendUrl}/orders`, order)\r\n      .then(res => {\r\n        console.log(res);\r\n        setShowMessage(true);\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n  return <div className=\"productscreen\">\r\n    <div className=\"productscreen-left\">\r\n      <div className=\"left-image\">\r\n      <img\r\n        src={`${process.env.PUBLIC_URL}/images/${product.imageUrl}?${Date.now()}`}\r\n        onError={(e) => {\r\n          e.target.onerror = null;\r\n          e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n        }} alt=\"\" />\r\n      </div>\r\n\r\n      <div className=\"left-info\">\r\n        <p className=\"left-name\">{product.name}</p>\r\n        <p>RM{product.price}</p>\r\n        <p>{product.description}</p>\r\n        <p>Seller: {product.shopName}</p>\r\n        <p>Category: {product.category}</p>\r\n      </div>\r\n    </div>\r\n    <div className=\"productscreen-right\">\r\n      <div className=\"right-info\">\r\n        <p>\r\n          Price: <span>RM{product.price}</span>\r\n        </p>\r\n        <p>\r\n          Stock left: <span>{product.countInStock}</span>\r\n        </p>\r\n        <p>\r\n          Qty\r\n          <input \r\n            type=\"number\" \r\n            value={quantity} \r\n            onChange={(event)=>{setQuantity(event.target.value)}} \r\n            min=\"1\" \r\n            max={product.countInStock}\r\n          />\r\n        </p>\r\n        <p>\r\n          {auth.isAuthenticated() ? \r\n          <button \r\n            type=\"button\" \r\n            disabled={inStock ? false : true} \r\n            onClick={makeOrder}\r\n          >Order\r\n          </button>\r\n          :\r\n          <Link to=\"/login\">Order</Link>\r\n          }\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    {showMessage ? \r\n    <div className=\"message\">\r\n      <div className=\"message-content\">\r\n        <h2>Your Order on {quantity} quantity of {product.name} is successfully placed</h2>\r\n        <p>View your orders in Myorder.</p>\r\n        <button onClick={()=>setShowMessage(false)}>OK</button>\r\n      </div>\r\n    </div>\r\n    : \r\n    <div></div>\r\n    }\r\n  </div>\r\n}\r\n\r\nexport default ProductScreen\r\n","import './CartItem.css';\r\nimport {Link} from 'react-router-dom';\r\nimport { useState,useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nimport backendUrl from '../../service/backendUrl';\r\n\r\n\r\nconst CartItem = ({_id, userId, productId, quantity, isPaid, removeOrder, calculateTotalPrice}) => {\r\n\r\n  const [qty, setQty] = useState(quantity);\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [imageUrl, setImageUrl] = useState('');\r\n\r\n  const onquantityChange = (event) =>{\r\n    setQty(event.target.value)\r\n  }\r\n\r\n  const deleteData = () => {\r\n    axios.delete(`${backendUrl}/orders/${_id}`).then(res => \r\n    {\r\n    console.log(res);\r\n    removeOrder(_id);\r\n  }).catch(error => {\r\n    console.log(error);\r\n  });\r\n\r\n  }\r\n\r\n  const calculateSubTotal = () => {\r\n   const subTotal = qty*parseFloat(product.price);\r\n   console.log(product.price);\r\n   calculateTotalPrice(subTotal);\r\n  }\r\n\r\n  const updateData = () => {\r\n    const order = {\r\n      quantity: qty\r\n    };\r\n\r\n    axios.put(`${backendUrl}/orders/${_id}`, order).then(res =>\r\n    {\r\n      console.log(res);\r\n    }).catch(error=> {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  const fetchData = async () =>{\r\n    try{\r\n\r\n      const response = await fetch(`${backendUrl}/products/${productId}`);\r\n      const result = await response.json();\r\n\r\n      setProduct(result);\r\n      setImageUrl(result.imageUrl);\r\n\r\n    } catch(error){\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [productId]);\r\n\r\n  useEffect(() => {\r\n    updateData();\r\n    if (product != null)\r\n      calculateSubTotal();\r\n  }, [qty]);\r\n\r\n  useEffect(() => {\r\n    if (product != null)\r\n      calculateSubTotal();\r\n  }, [product]);\r\n\r\n  useEffect(() => {\r\n    if (imageUrl!='')\r\n      setLoading(false);\r\n  },[imageUrl]);\r\n\r\n\r\n  if (loading){\r\n    return <div></div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"cartitem\">\r\n      <div className=\"cartitem-image\">\r\n      <img\r\n        src={`${process.env.PUBLIC_URL}/images/${imageUrl}?${Date.now()}`}\r\n        onError={(e) => {\r\n          e.target.onerror = null;\r\n          e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n        }} alt=\"\" />\r\n      </div>\r\n\r\n      <Link to={`/product/${productId}`} className=\"cartitem-name\">\r\n        <p>{product.name}</p>\r\n      </Link>\r\n\r\n      <p className=\"cartitem-price\">RM{product.price}</p>\r\n\r\n      <input \r\n            type=\"number\" \r\n            value={qty} \r\n            onChange={onquantityChange} \r\n            min=\"1\" \r\n            max={product.countInStock}\r\n          />\r\n\r\n      <p className=\"cartitem-price\">RM{qty*product.price}</p>\r\n      \r\n      <button className=\"cartitem-deletebtn\" onClick={deleteData}>\r\n        <i className=\"fas fa-trash\"></i>\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CartItem\r\n","import './CartItem.css';\r\nimport {Link} from 'react-router-dom';\r\nimport { useState,useEffect } from 'react';\r\n\r\nimport backendUrl from '../../service/backendUrl';\r\n\r\n\r\nconst CartItem = ({quantity, productId}) => {\r\n\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [imageUrl, setImageUrl] = useState('');\r\n\r\n  const fetchData = async () =>{\r\n    try{\r\n      const response = await fetch(`${backendUrl}/products/${productId}`)\r\n      const result = await response.json();\r\n\r\n      setProduct(result);\r\n      setImageUrl(result.imageUrl);\r\n      setLoading(false);\r\n\r\n    } catch(error){\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (loading){\r\n    return <div></div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"cartitem\">\r\n      <div className=\"cartitem-image\">\r\n      <img\r\n        src={`${process.env.PUBLIC_URL}/images/${imageUrl}?${Date.now()}`}\r\n        onError={(e) => {\r\n          e.target.onerror = null;\r\n          e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n        }} alt=\"\" />\r\n      </div>\r\n\r\n      <Link to={`/product/${productId}`} className=\"cartitem-name\">\r\n        <p>{product.name}</p>\r\n      </Link>\r\n\r\n      <p className=\"cartitem-price\">RM{product.price}</p>\r\n\r\n      <p className=\"cartitem-price\">{quantity}</p>\r\n\r\n      <p className=\"cartitem-price\">RM{quantity*product.price}</p>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CartItem","import './AuctionItem.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\n\r\n\r\nconst AuctionItem = ({ bidPrice, productId }) => {\r\n\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [imageUrl, setImageUrl] = useState('');\r\n\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/products/${productId}`)\r\n      const result = await response.json();\r\n\r\n      setProduct(result);\r\n      setImageUrl(result.imageUrl);\r\n      setLoading(false);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div></div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"cartitem\">\r\n      <div className=\"cartitem-image\">\r\n      <img\r\n        src={`${process.env.PUBLIC_URL}/images/${imageUrl}?${Date.now()}`}\r\n        onError={(e) => {\r\n          e.target.onerror = null;\r\n          e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n        }} alt=\"\" />\r\n      </div>\r\n\r\n      <p>{product.name}</p>\r\n\r\n      <p className=\"cartitem-price\">BidPrice: </p>\r\n\r\n      <p className=\"cartitem-price\">RM{bidPrice}</p>\r\n\r\n      {/* <Link to=\"/checkout\" className=\"uwu-btn\">\r\n        <p className=\"cartitem-price center\">Pay</p>\r\n      </Link> */}\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AuctionItem","import './MyOrderScreen.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport CartItem from '../components/order/CartItem';\r\nimport HistoryItem from '../components/order/HistoryItem';\r\nimport AuctionItem from '../components/order/AuctionItem';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nconst MyOrderScreen = () => {\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [ploading, setPloading] = useState(true);\r\n\r\n  const [orders, setOrders] = useState([]);\r\n  const [totalPrice, settotalPrice] = useState(0);\r\n\r\n  const [porders, setPorders] = useState([]);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n\r\n      const response = await fetch(`${backendUrl}/orders/unpaid/${userData.userId}`);\r\n      const result = await response.json();\r\n\r\n      setOrders(result);\r\n      setLoading(false);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const fetchPdata = async () => {\r\n    try {\r\n      const response = await fetch(`${backendUrl}/orders/paid/${userData.userId}`);\r\n      const result = await response.json();\r\n\r\n      setPorders(result);\r\n      setPloading(false);\r\n      console.log(result);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    fetchPdata();\r\n  }, []);\r\n\r\n  const removeOrder = (id) => {\r\n    const newOrders = orders.filter((order) => order._id !== id)\r\n    setOrders(newOrders)\r\n  }\r\n\r\n  const calculateTotalPrice = (subTotal) => {\r\n    var newTotal = totalPrice + subTotal;\r\n    settotalPrice(newTotal);\r\n  }\r\n\r\n\r\n  if (loading && ploading) {\r\n    return <div className=\"loadingscreen\">\r\n      <div className=\"loading\"></div>\r\n    </div>\r\n  }\r\n\r\n  return <div className=\"cartscreen\">\r\n\r\n    {/* Header */}\r\n    <h2 className=\"cartscreen-header\">Shopping Cart</h2>\r\n\r\n    {/* Content */}\r\n    <div className=\"cartscreen-content\">\r\n      <div className=\"cartscreen-left\">\r\n        {\r\n          orders.filter(order => order.isAuctionItem === false).map((order) => {\r\n            return <CartItem key={order._id} {...order} removeOrder={removeOrder} calculateTotalPrice={calculateTotalPrice} />\r\n          })\r\n        }\r\n      </div>\r\n      <div className=\"cartscreen-right\">\r\n        <div className=\"cartscreen-info\">\r\n          <p>Grand Total:</p>\r\n          <p>RM{totalPrice}</p>\r\n        </div>\r\n        <div className=\"cartscreen-info\">\r\n          <p className='center'><Link to=\"/checkout\" className=\"uwu-btn\">Proceed to Checkout</Link></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 className=\"cartscreen-header\">Auction Cart</h2>\r\n    <div className=\"cartscreen-content\">\r\n      <div className=\"cartscreen-left\">\r\n        {\r\n          orders.filter(order => order.isAuctionItem === true).map((order) => {\r\n            return <AuctionItem key={order._id} {...order} />\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n\r\n    <h2 className=\"cartscreen-header2\">Order History</h2>\r\n    <div className=\"cartscreen-content\">\r\n      <div className=\"cartscreen-left\">\r\n        {\r\n          porders.map((order) => {\r\n            return <HistoryItem key={order._id} {...order} />\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nexport default MyOrderScreen\r\n","import './LoginScreen.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport logo from './uwupic.png';\r\nimport auth from '../authentication/auth';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n\r\nconst RegisterScreen = (props) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [address, setAddress] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n\r\n  const onEmailChange = (event) => {\r\n    setEmail(event.currentTarget.value);\r\n  }\r\n\r\n  const onPasswordChange = (event) => {\r\n    setPassword(event.currentTarget.value);\r\n  }\r\n\r\n  const onNameChange = (event) => {\r\n    setName(event.currentTarget.value);\r\n  }\r\n\r\n  const onAddressChange = (event) => {\r\n    setAddress(event.currentTarget.value);\r\n  }\r\n\r\n  const onPhoneChange = (event) => {\r\n    setPhone(event.currentTarget.value);\r\n  }\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (email !== \"\" && password !== \"\" && name !== \"\" && address !== \"\" && phone !== \"\") {\r\n      const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n      if (email && regex.test(email) !== false) {\r\nif (password.length>6){\r\n  const phoneregex = /^\\+60\\d{2}(\\d{7}|\\d{8})$/;\r\n  if (phoneregex.test(phone)){\r\n    const user = {\r\n      email: email,\r\n      password: password,\r\n      name: name,\r\n      address: address,\r\n      phone: phone\r\n    };\r\n  \r\n    axios.post(`${backendUrl}/users`, user)\r\n      .then(res => {\r\n        console.log(res);\r\n        alert (\"you have successfully registered!\");\r\n        props.history.push(\"/login\", {success:true});\r\n        // auth.login(() => {\r\n        //   props.history.push(\"/\");\r\n        //   window.location.reload(false);\r\n        // }, user)\r\n      }).catch(error => {\r\n        if (error.response.status==400){\r\n          alert(\"email already exist\");\r\n        }else{\r\n        console.log(error);\r\n      }})\r\n  }else{\r\n    alert(\"your phone number should have this format -> +60123456789\");\r\n  }\r\n  \r\n} else{\r\n  alert(\"your password needs to have atleast 7 characters\");\r\n}\r\n      \r\n        } else {\r\n          alert(\"please insert valid email\");\r\n        }\r\n    } else {\r\n      alert(\"Please fill in the blanks\");\r\n    }\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"loginscreen\">\r\n\r\n      <div className=\"sidebar\">\r\n        <img src={logo}></img>\r\n        <h2>Welcome to UWU Shopping Site!!</h2>\r\n      </div>\r\n\r\n      <div className=\"login\">\r\n        <h1>Register</h1>\r\n        <form className=\"login-form\">\r\n          <div className=\"form-input\">\r\n            <label>Email: </label>\r\n            <input type=\"email\" name=\"email\" value={email} onChange={onEmailChange} required />\r\n          </div>\r\n\r\n          <div className=\"form-input\">\r\n            <label>Password: </label>\r\n            <input type=\"password\" name=\"password\" value={password} onChange={onPasswordChange} required />\r\n          </div>\r\n\r\n          <div className=\"form-input\">\r\n            <label>Name: </label>\r\n            <input name=\"name\" value={name} onChange={onNameChange} required />\r\n          </div>\r\n\r\n          <div className=\"form-input\">\r\n            <label>Address: </label>\r\n            <input name=\"address\" value={address} onChange={onAddressChange} required />\r\n          </div>\r\n\r\n          <div className=\"form-input\">\r\n            <label>Phone: </label>\r\n            <input name=\"phone\" value={phone} onChange={onPhoneChange} required />\r\n          </div>\r\n\r\n          <div className=\"form-input\">\r\n            <button type=\"submit\" onClick={onSubmit}>Register</button>\r\n          </div>\r\n          <Link to=\"/login\">Already have an account? Login here.</Link>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RegisterScreen;","\r\nimport { Link } from 'react-router-dom'\r\nimport { useState, useEffect } from 'react';\r\nimport React from 'react';\r\n\r\nimport './MyShopScreen.css';\r\nimport Product from '../components/Product';\r\nimport Loading from '../components/Loading';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\n\r\nconst MyShopScreen = (props) => {\r\n\r\n  const [shop, setShop] = useState();\r\n  const [shopProducts, setShopProducts] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchShopData = async () => {\r\n      try {\r\n        const response = await fetch(`${backendUrl}/shops/${userData.userId}`);\r\n        const result = await response.json();\r\n\r\n        setShop(result);\r\n        setLoading(false);\r\n\r\n      } catch (error) {\r\n        console.log(\"failed fetch shop data\");\r\n        console.log(error);\r\n        props.history.push(\"/\");\r\n      }\r\n    }\r\n    fetchShopData();\r\n    console.log(\"Fetch Data\");\r\n  }, []); // This UseEffect run when the page first time load\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchShopProducts = async () => { \r\n      try {\r\n        const response = await fetch(`${backendUrl}/products/seller/${shop._id}`); //Add ${} to get variable\r\n        const result = await response.json();\r\n\r\n        setShopProducts(result);\r\n\r\n      } catch (error) {\r\n        console.log(\"failed fetch shop's products data\");\r\n        console.log(error);\r\n        props.history.push(\"/\");\r\n      }\r\n    }\r\n    if (shop != null) // Check if the shopData Null\r\n      fetchShopProducts();\r\n  }, [shop]); // This UseEffect run when the shopData loaded\r\n\r\n\r\n\r\n\r\n  // If data not loaded yet, display loading sign\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n\r\n  return (\r\n\r\n    <div className=\"myshopscreen\">\r\n\r\n      {shop ?\r\n        <div className=\"welcomeshop\">\r\n\r\n              <img\r\n              src={`${process.env.PUBLIC_URL}/images/${shop.shopImageUrl}`}\r\n              onError={(e) => {\r\n                  e.target.onerror = null;\r\n                  e.target.src = 'https://bootdey.com/img/Content/avatar/avatar3.png'\r\n              }} alt=\"\"/>\r\n          <p><b>{shop.shopName}</b></p>\r\n          <p>{shop.shopDescription}</p>\r\n          <p>{shop.shopAddress}</p>\r\n          <p>{shop.shopPhone}</p>\r\n          <p>{shop.shopEmail}</p>\r\n          \r\n        </div>\r\n        :\r\n        <div className=\"welcomeshop\" >\r\n          <h1 align=\"center\">Welcome to MyShop</h1><br></br>\r\n          <p align=\"center\">Become a seller and start selling products, streaming on our platform!</p>\r\n        </div>\r\n      }\r\n\r\n      {!shop ?\r\n        <Link to={`/myshop/createmyshop`} className=\"Link\" type=\"button\" >\r\n          <h2>Create your MyShop!</h2>\r\n        </Link>\r\n        :\r\n        <div>\r\n          \r\n          <div className=\"edit-stream-button\">\r\n\r\n          {/* Edit Product */}\r\n\r\n          <Link to={'/myshop/editmyshop'} className=\"Link\" type=\"button\">\r\n            <span>Edit your MyShop!</span>\r\n          </Link>\r\n          &nbsp;\r\n\r\n          {/* Streaming */}\r\n\r\n          <Link to=\"/streamingseller\" className=\"Link\" type=\"button\">\r\n            <i className=\"fa fa-video-camera\" aria-hidden=\"true\"></i>\r\n            <span>\r\n              Start Streaming\r\n            </span>\r\n          </Link>\r\n          &nbsp;\r\n\r\n          {/* View Buyers orders */}\r\n\r\n          <Link to=\"/myshop/orders\" className=\"Link\" type=\"button\">\r\n            <span>\r\n              View Buyers' Orders\r\n            </span>\r\n          </Link>\r\n\r\n          </div>\r\n\r\n          \r\n          {/* Product List */}\r\n            \r\n                {shopProducts.length != 0 ?\r\n                  <div>\r\n                      <div className=\"productscreen\">\r\n                      <h2 align=\"center\" className=\"label\">Product List</h2>\r\n\r\n                      <div className=\"productlist\">\r\n\r\n                        {shopProducts.map((shopProduct) => (\r\n                          <Link to={`/myshop/editproduct/${shopProduct._id}`} key={shopProduct._id} className=\"products\"> {/* The Link \"to\" should go to your edit product page. */}\r\n                            <Product {...shopProduct} />                             {/* Reuse Product componenet from HomePage */}\r\n                          </Link>\r\n                        ))} \r\n\r\n                        </div>\r\n\r\n                    <div className=\"edit-stream-button\">\r\n                      <Link to={'/myshop/addproduct'} className=\"Link\" type=\"button\">\r\n                        <span>Add a product!</span>\r\n                      </Link>\r\n                    </div>\r\n\r\n                     \r\n                    </div>\r\n                        \r\n                  </div>\r\n                  :\r\n                  <div className=\"welcomeshop\" >\r\n                    <h1 align=\"center\">You have no products yet!</h1><br></br>\r\n                      <div className=\"edit-stream-button\">\r\n                      <Link to={'/myshop/addproduct'} className=\"Link\" type=\"button\">\r\n                        <span>Add a product!</span>\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                }\r\n\r\n\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n\r\n  )\r\n\r\n\r\n\r\n}\r\n\r\nexport default MyShopScreen\r\n","import './EditMyShopScreen.css';\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport auth from \"../authentication/auth\";\r\nimport axios from 'axios';\r\nimport Loading from '../components/Loading';\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nconst EditMyShopScreen = (props) => {\r\n    const inputFileRef = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [photo, setPhoto] = useState('');\r\n    const [shop, setShop] = useState('');\r\n    const [shopName, setShopName] = useState('');\r\n    const [shopDescription, setShopDescription] = useState('');\r\n    const [shopImageUrl, setShopImageUrl] = useState('');\r\n    const [shopAddress, setShopAddress] = useState('');\r\n    const [shopPhone, setShopPhone] = useState('');\r\n    const [shopEmail, setShopEmail] = useState('');\r\n\r\n    const onShopNameChange = (event) => {\r\n        setShopName(event.currentTarget.value);\r\n    }\r\n\r\n\r\n    const onShopDescChange = (event) => {\r\n        setShopDescription(event.currentTarget.value);\r\n    }\r\n\r\n    const onShopAddressChange = (event) => {\r\n        setShopAddress(event.currentTarget.value);\r\n    }\r\n\r\n    const onShopPhoneChange = (event) => {\r\n        setShopPhone(event.currentTarget.value);\r\n    }\r\n\r\n    const onShopEmailChange = (event) => {\r\n        setShopEmail(event.currentTarget.value);\r\n    }\r\n\r\n\r\n    const onPhotoChange = (e) => {\r\n        setPhoto(e.target.files[0]);\r\n    }\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const response = await fetch(`${backendUrl}/shops/${userData.userId}`);\r\n            const result = await response.json();\r\n\r\n            setShop(result);\r\n            setShopName(result.shopName);\r\n            setShopEmail(result.shopEmail);\r\n            setShopPhone(result.shopPhone);\r\n            setShopAddress(result.shopAddress);\r\n            setShopDescription(result.shopDescription);\r\n            setShopImageUrl(result.shopImageUrl);\r\n            setLoading(false);\r\n\r\n        } catch (error) {\r\n            alert(\"An error has been occurred while trying to fetch data... Please check console.\");\r\n            console.log(error);\r\n            props.history.push(\"/myshop\");\r\n        }\r\n    }\r\n\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (shopEmail !== \"\" && shopName !== \"\" && shopDescription !== \"\" && shopAddress !== \"\" && shopPhone !== \"\") {\r\n            const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n            if (shopEmail && regex.test(shopEmail) !== false) {\r\n                const phoneregex = /^\\+60\\d{2}(\\d{7}|\\d{8})$/;\r\n                if (phoneregex.test(shopPhone)) {\r\n                    const formData = new FormData();\r\n\r\n                    formData.append('email', shopEmail);\r\n                    formData.append('description', shopDescription);\r\n                    formData.append('name', shopName);\r\n                    formData.append('address', shopAddress);\r\n                    formData.append('phone', shopPhone);\r\n                    formData.append('profile_pic', photo);\r\n\r\n                    axios.put(`${backendUrl}/shops/${shop._id}`, formData, {\r\n                        headers: {\r\n                            'Content-Type': 'multipart/form-data'\r\n                        }\r\n                    }).then(res => {\r\n                        if (res.data.img) {\r\n                            setShopImageUrl(res.data.img);\r\n                        }\r\n                        props.history.push(\"/myshop\");\r\n\r\n                        alert(\"your information has been updated!\");\r\n                    }).catch(error => {\r\n                        console.log(error);\r\n                    })\r\n\r\n                    setPhoto(null);\r\n                    document.getElementById(\"imgFile\").value = \"\";\r\n                } else {\r\n                    alert(\"your phone number should have this format -> +60123456789\");\r\n                }\r\n            } else {\r\n                alert(\"please insert a valid email\");\r\n            }\r\n        } else {\r\n            alert(\"Please fill in the blank\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    if (loading)\r\n        {\r\n          return <Loading />\r\n        }\r\n\r\n    return (\r\n        <div className=\"editmyshopscreen\">\r\n            <div className=\"account-information1\">\r\n                \r\n\r\n                <div className=\"container1\" >\r\n                    <div className=\"column-1 box1\" >\r\n                        <form className=\"form\" method=\"POST\" encType=\"multipart/form-data\">\r\n                            <h1 className=\"text-center\">Edit My Shop</h1>\r\n                            \r\n                            <div className=\"form-input\" type=\"Shop Name:\">              \r\n                            <label>Shop Name: </label>\r\n                                <input type=\"text\" name=\"name\" value={shopName} onChange={onShopNameChange}\r\n                                    placeholder=\"Shop name\" required />\r\n                            </div>\r\n                            <div className=\"form-input\" type=\"Shop Email:\">\r\n                            <label>Shop Email: </label>\r\n\r\n                                <input type=\"text\" name=\"email\" value={shopEmail} onChange={onShopEmailChange}\r\n                                    placeholder=\"Shop Email\" required />\r\n                            </div>\r\n                            <div className=\"form-input\" type=\"Shop Description:\">\r\n                            <label>Shop Description: </label>\r\n\r\n                                <input type=\"text\" name=\"description\" value={shopDescription} onChange={onShopDescChange}\r\n                                    placeholder=\"Shop Description\" required />\r\n                            </div>\r\n\r\n                            <div className=\"form-input\" type=\"Shop Address:\">\r\n                            <label>Shop Address: </label>\r\n\r\n                                <input type=\"text\" name=\"address\" value={shopAddress} onChange={onShopAddressChange}\r\n                                    placeholder=\"Shop Address\" required />\r\n                            </div>\r\n                            <div className=\"form-input\" type=\"Shop Phone:\">\r\n                            <label>Shop Phone: </label>\r\n\r\n                                <input type=\"text\" name=\"phone\" value={shopPhone} onChange={onShopPhoneChange}\r\n                                    placeholder=\"Shop Phone\" required />\r\n                            </div>\r\n\r\n                           \r\n                            <div className=\"form-input\" type=\"Shop Picture\">\r\n                            <label>Shop Image: </label>\r\n                                <input ref={inputFileRef} id=\"imgFile\" type=\"file\" accept=\".png, .jpg, .jpeg\"\r\n                                    name=\"photo\"\r\n                                    onChange={onPhotoChange} />\r\n                            </div>\r\n\r\n                            <br />\r\n\r\n                            <center>\r\n                                <button type=\"submit\" className=\"button\" onClick={onSubmit}>Update</button>\r\n                            </center>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditMyShopScreen\r\n","import './CreateMyShopScreen.css';\r\nimport { useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\n\r\nconst CreateMyShopScreen = (props) => {\r\n        \r\n        const [userId] = useState(userData.userId);\r\n        const [shopName, setShopName] = useState('');\r\n        const [shopDescription, setShopDescription] = useState('');\r\n        const [shopImageUrl, setShopImageUrl] = useState('');\r\n        const [shopAddress, setShopAdress] = useState('');\r\n        const [shopPhone, setShopPhone] = useState('');\r\n        const [shopEmail, setShopEmail] = useState('');   \r\n\r\n     \r\n    \r\n   const onShopNameChange = (event) => {\r\n    setShopName(event.currentTarget.value);\r\n  }  \r\n     \r\n  const onShopDescChange = (event) => {\r\n    setShopDescription(event.currentTarget.value);\r\n  }\r\n\r\n  const onShopAddressChange = (event) => {\r\n    setShopAdress(event.currentTarget.value);\r\n  }\r\n\r\n  const onShopPhoneChange = (event) => {\r\n    setShopPhone(event.currentTarget.value);\r\n  }\r\n\r\n  const onShopEmailChange = (event) => {\r\n    setShopEmail(event.currentTarget.value);\r\n  }\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (userId !== \"\" && shopName !== \"\" && shopDescription !== \"\" && shopAddress !== \"\" && shopPhone !== \"\" && shopEmail !== \"\") {\r\n      const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n      if (shopEmail && regex.test(shopEmail) !== false) {\r\n\r\n        const phoneregex = /^\\+60\\d{2}(\\d{7}|\\d{8})$/;\r\n          if (phoneregex.test(shopPhone)){\r\n\r\n        \r\n        const shop = {\r\n          userId: userId,\r\n          shopName: shopName,\r\n          shopEmail: shopEmail,\r\n          shopImageUrl: \"https://p.kindpng.com/picc/s/9-94468_shop-clipart-hd-png-download.png\",\r\n          shopDescription: shopDescription,\r\n          shopAddress: shopAddress,\r\n          shopPhone: shopPhone\r\n        };\r\n\r\n        axios.post(`${backendUrl}/shops`, shop)\r\n        .then(res => {\r\n          props.history.push(\"/myshop\");\r\n\t\t\t\t\t//window.location.reload(false);\r\n          console.log(res);\r\n        }).catch(error => {\r\n          console.log(error);\r\n        });\r\n\r\n          } else {\r\n            alert(\"Your phone number should have this format -> +60123456789\")\r\n          } \r\n      \r\n        } else {\r\n          alert(\"Please insert valid email\");\r\n        }\r\n    } else {\r\n      alert(\"Please fill in the blanks\");\r\n    }\r\n\r\n\r\n  }\r\n\r\n\treturn (\r\n        <div className=\"createmyshopscreen\">\r\n            <div className=\"account-information1\">\r\n                \r\n\r\n                <div className=\"container1\" >\r\n                    <div className=\"column-1 box1\" >\r\n                        <form className=\"form\" method=\"POST\" encType=\"multipart/form-data\">\r\n                            <h1 className=\"text-center\">Create My Shop</h1>\r\n                            \r\n                            <div className=\"form-input\" type=\"Shop Name:\">              \r\n                            <label>Shop Name: </label>\r\n                                <input type=\"text\" name=\"name\" value={shopName} onChange={onShopNameChange}\r\n                                    placeholder=\"Shop name\" required />\r\n                            </div>\r\n                            <div className=\"form-input\" type=\"Shop Email:\">\r\n                            <label>Shop Email: </label>\r\n\r\n                                <input type=\"text\" name=\"email\" value={shopEmail} onChange={onShopEmailChange}\r\n                                    placeholder=\"Shop Email\" required />\r\n                            </div>\r\n                            <div className=\"form-input\" type=\"Shop Description:\">\r\n                            <label>Shop Description: </label>\r\n\r\n                                <input type=\"text\" name=\"description\" value={shopDescription} onChange={onShopDescChange}\r\n                                    placeholder=\"Shop Description\" required />\r\n                            </div>\r\n\r\n                            <div className=\"form-input\" type=\"Shop Address:\">\r\n                            <label>Shop Address: </label>\r\n\r\n                                <input type=\"text\" name=\"address\" value={shopAddress} onChange={onShopAddressChange}\r\n                                    placeholder=\"Shop Address\" required />\r\n                            </div>\r\n                            <div className=\"form-input\" type=\"Shop Phone:\">\r\n                            <label>Shop Phone: </label>\r\n\r\n                                <input type=\"text\" name=\"phone\" value={shopPhone} onChange={onShopPhoneChange}\r\n                                    placeholder=\"Shop Phone\" required />\r\n                            </div>\r\n                            \r\n\r\n                            <center>\r\n                                <button type=\"submit\" className=\"button\" onClick={onSubmit}>Create</button>\r\n                            </center>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\t)\r\n\t\r\n\t\r\n}\r\n\r\nexport default CreateMyShopScreen","import './MyShopEditProductScreen.css';\r\nimport React from 'react';\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useParams } from 'react-router';\r\nimport axios from 'axios';\r\nimport Loading from '../components/Loading';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nconst MyShopEditProductScreen = (props) => {\r\n    let { id } = useParams();\r\n\r\n    const inputFileRef = useState(null);\r\n    const [photo, setPhoto] = useState('');\r\n\r\n    const [product, setProduct] = useState('');\r\n    const [productName, setProductName] = useState('');\r\n    const [productDescription, setProductDescription] = useState('');\r\n    const [price, setPrice] = useState('');\r\n    const [countInStock, setCountInStock] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [shopId, setShopId] = useState('');\r\n    const [shopName, setShopName] = useState('');\r\n\r\n    const [productImageUrl, setProductImageUrl] = useState('');\r\n    const [productLoading, setProductLoading] = useState(true);\r\n\r\n\r\n    const onProductNameChange = (event) => {\r\n        setProductName(event.currentTarget.value);\r\n    }\r\n\r\n    const onProductDescChange = (event) => {\r\n        setProductDescription(event.currentTarget.value);\r\n    }\r\n\r\n    const onPriceChange = (event) => {\r\n        setPrice(event.currentTarget.value);\r\n    }\r\n\r\n    const onCountInStockChange = (event) => {\r\n        setCountInStock(event.currentTarget.value);\r\n    }\r\n\r\n    const onCategoryChange = (event) => {\r\n        setCategory(event.currentTarget.value);\r\n    }\r\n\r\n    const onPhotoChange = (e) => {\r\n        setPhoto(e.target.files[0]);\r\n    }\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const response = await fetch(`${backendUrl}/products/${id}`);\r\n            const result = await response.json();\r\n\r\n            setProduct(result);\r\n            setProductName(result.name);\r\n            setProductDescription(result.description);\r\n            setPrice(result.price);\r\n            setCountInStock(result.countInStock);\r\n            setCategory(result.category);\r\n            setProductImageUrl(result.imageUrl);\r\n            setShopId(result.shopId);\r\n            setShopName(result.shopName);\r\n            setProductLoading(false);\r\n        }\r\n\r\n\r\n        catch (error) {\r\n            alert(\"An error has been occurred while trying to fetch data... Please check console.\");\r\n            console.log(error);\r\n            props.history.push(\"/myshop\");\r\n        }\r\n    }\r\n\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (productName !== \"\" && productDescription !== \"\" && price !== \"\" && countInStock !== \"\" && category !== \"\" && shopId !== \"\" && shopName !== \"\") {\r\n            if (price > 0 && countInStock > 0) {\r\n\r\n                const formData = new FormData();\r\n\r\n                formData.append('name', productName);\r\n                formData.append('description', productDescription);\r\n                formData.append('price', price);\r\n                formData.append('countInStock', countInStock); // Capital Error (countinstock should be countInStock)\r\n                formData.append('category', category);\r\n                formData.append('profile_pic', photo);\r\n\r\n                formData.append('shopId', shopId); // shopId is required\r\n                formData.append('shopName', shopName); // shopName is required\r\n\r\n                axios.put(`${backendUrl}/products/${id}`, formData, {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                }).then(res => {\r\n                    if (res.data.img) {\r\n                        setProductImageUrl(res.data.img);\r\n                    }\r\n                    props.history.push(\"/myshop\");\r\n\r\n                    alert(\"product information has been updated!\");\r\n                }).catch(error => {\r\n                    console.log(error);\r\n                    alert(\"error occured\");\r\n                });\r\n\r\n                setPhoto(null);\r\n                document.getElementById(\"imgFile\").value = \"\";\r\n\r\n            } else {\r\n                alert(\"Product Price and Count In Stock must not be 0\");\r\n            }\r\n        } else {\r\n            alert(\"Please fill in the blank\");\r\n        }\r\n    }\r\n\r\n    const onDelete = async () => {\r\n        await axios.delete(`${backendUrl}/products/${id}`)\r\n            .then(res => {\r\n                alert(\"Product has been deleted successfully!\");\r\n                props.history.push(\"/myshop\");\r\n            }).catch(error => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    if (productLoading && product===null) {\r\n        return <Loading />\r\n    }\r\n\r\n    return (\r\n        <div className=\"editproductmyshopscreen\">\r\n            <div className=\"registerform1\">\r\n\r\n                <div className=\"container\" >\r\n                    <div className=\"form1\" >\r\n\r\n                        <form  method=\"POST\" encType=\"multipart/form-data\">\r\n                        <h1 className='title'>Edit Product </h1>\r\n\r\n                        <div className='form-img'>\r\n                            {/* Do the styling on your own.*/}\r\n                        <img className='productimg'\r\n                            src={`${process.env.PUBLIC_URL}/images/${productImageUrl}?${Date.now()}`}\r\n                            onError={(e) => {\r\n                                e.target.onerror = null;\r\n                                e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n                            }} alt=\"\" />\r\n                            </div>\r\n\r\n                            \r\n                            <div className=\"form-input\" type=\"Product Name:\">              \r\n                            <label>Product Name: </label>\r\n                                <input type=\"text\" name=\"name\" value={productName} onChange={onProductNameChange}\r\n                                    placeholder=\"Product name\" required />\r\n                            </div>\r\n                            <div className=\"form-input\" type=\"Product Description:\">\r\n                            <label>Product Description: </label>\r\n\r\n                                <input type=\"text\" name=\"description\" value={productDescription} onChange={onProductDescChange}\r\n                                    placeholder=\"Product Description\" required />\r\n                            </div>\r\n\r\n                            <div className=\"form-input\" type=\"Product Price:\">\r\n                            <label>Product Price: </label>\r\n                                <input type=\"number\" name=\"price\" value={price} onChange={onPriceChange}\r\n                                    placeholder=\"Price\" required />\r\n                            </div>\r\n\r\n                            <div className=\"form-input\" type=\"Product Category:\">\r\n                            <label>Product Category: </label>\r\n                                <select type=\"text\" name=\"category\" value={category} onChange={onCategoryChange} required>\r\n                                    <option value=\"Headphones\">Headphones</option>\r\n                                    <option value=\"Speakers\">Speaker</option>\r\n                                    <option value=\"Smart Device\">Smart Device</option>\r\n                                    <option value=\"Mobile Phone\">Mobile Phone</option>\r\n                                    <option value=\"Camera\">Camera</option>\r\n                                    <option value=\"Smart Watch\">Smart Watch</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"form-input\" type=\"Product Count In Stock:\">\r\n                            <label>Product Count In Stock: </label>\r\n                                <input type=\"number\" name=\"countinstock\" placeholder='Count In Stock'\r\n                                    value={countInStock}\r\n                                    onChange={onCountInStockChange}\r\n                                    min=\"1\"\r\n                                    max=\"100\" required />\r\n                            </div>\r\n\r\n                            <div className=\"form-input\" type=\"Product Picture\">\r\n                            <label>Product Image: </label>\r\n                                <input ref={inputFileRef} id=\"imgFile\" type=\"file\" accept=\".png, .jpg, .jpeg\"\r\n                                    name=\"photo\"\r\n                                    onChange={onPhotoChange} />\r\n                            </div>\r\n\r\n                        </form>\r\n                        <center>\r\n                                <button  className=\"button\" onClick={onSubmit}>Update</button>\r\n                                <button  className=\"button\" onClick={onDelete}>Delete</button>\r\n                        </center>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyShopEditProductScreen\r\n","import './MyShopAddProductScreen.css';\r\nimport React from 'react';\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport axios from 'axios';\r\nimport Loading from '../components/Loading';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nconst MyShopAddProductScreen = (props) => {\r\n\r\n    const inputFileRef = useState(null);\r\n    const [photo, setPhoto] = useState('');\r\n\r\n    const [productName, setProductName] = useState('');\r\n    const [productDescription, setProductDescription] = useState('');\r\n    const [price, setPrice] = useState('');\r\n    const [countInStock, setCountInStock] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [shopId, setShopId] = useState('');\r\n    const [shopName, setShopName] = useState('');\r\n\r\n    const [loading, setLoading] = useState(true);\r\n\r\n\r\n    const onProductNameChange = (event) => {\r\n        setProductName(event.currentTarget.value);\r\n    }\r\n\r\n    const onProductDescChange = (event) => {\r\n        setProductDescription(event.currentTarget.value);\r\n    }\r\n\r\n    const onPriceChange = (event) => {\r\n        setPrice(event.currentTarget.value);\r\n    }\r\n\r\n    const onCountInStockChange = (event) => {\r\n        setCountInStock(event.currentTarget.value);\r\n    }\r\n\r\n    const onCategoryChange = (event) => {\r\n        setCategory(event.currentTarget.value);\r\n    }\r\n\r\n    const onPhotoChange = (e) => {\r\n        setPhoto(e.target.files[0]);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await fetch(`${backendUrl}/shops/${userData.userId}`);\r\n                const result = await response.json();\r\n\r\n                setShopId(result._id); // _id NOT id\r\n                setShopName(result.shopName);\r\n                setLoading(false);\r\n\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        fetchData();\r\n        console.log(\"Fetch Data\");\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <Loading />\r\n    }\r\n\r\n\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (productName !== \"\" && productDescription !== \"\" && price !== \"\" && countInStock !== \"\" && category !== \"\" && shopId !== \"\" && shopName !== \"\") {\r\n            if (price > 0 && countInStock > 0) {\r\n\r\n                const formData = new FormData();\r\n\r\n                formData.append('name', productName);\r\n                formData.append('description', productDescription);\r\n                formData.append('price', price);\r\n                formData.append('countInStock', countInStock); // Capital Error (countinstock should be countInStock)\r\n                formData.append('category', category);\r\n                formData.append('profile_pic', photo);\r\n                formData.append('shopId', shopId); // shopId is required\r\n                formData.append('shopName', shopName); // shopName is required\r\n\r\n                axios.post(`${backendUrl}/products`, formData, { // only submit 1 data object\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                }).then(res => {\r\n                    alert(\"Product added successfully.\");\r\n                    props.history.push(\"/myshop\");\r\n                    \r\n                }).catch(error => {\r\n                    console.log(error);\r\n                    alert(\"error occured\");\r\n                })\r\n\r\n                setPhoto(null);\r\n                document.getElementById(\"imgFile\").value = \"\";\r\n\r\n            } else {\r\n                alert(\"Product Price and Count In Stock must not be 0\");\r\n            }\r\n        } else {\r\n            alert(\"Please fill in the blank\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"addproductmyshopscreen\">\r\n            <div className=\"account-information1\">\r\n\r\n                <div className=\"container1\" >\r\n                    <div className=\"column-1 box1\" >\r\n                        \r\n                        <form className=\"form\" method=\"POST\" encType=\"multipart/form-data\">\r\n                        <h1 className='title'>Add Product </h1>\r\n\r\n                            <div className=\"form-input\" type=\"Product Name:\">              \r\n                                <label>Product Name: </label>\r\n                                    <input type=\"text\" name=\"name\" value={productName} onChange={onProductNameChange}\r\n                                        placeholder=\"Product name\" required />\r\n                                </div>\r\n                                <div className=\"form-input\" type=\"Product Description:\">\r\n                                <label>Product Description: </label>\r\n\r\n                                    <input type=\"text\" name=\"description\" value={productDescription} onChange={onProductDescChange}\r\n                                        placeholder=\"Product Description\" required />\r\n                                </div>\r\n\r\n                                <div className=\"form-input\" type=\"Product Price:\">\r\n                                <label>Product Price: </label>\r\n                                    <input type=\"number\" name=\"price\" value={price} onChange={onPriceChange}\r\n                                        placeholder=\"Price\" required />\r\n                                </div>\r\n\r\n                                <div className=\"form-input\" type=\"Product Category:\">\r\n                                <label>Product Category: </label>\r\n                                    <select type=\"text\" name=\"category\" value={category} onChange={onCategoryChange} \r\n                                    placeholder='Product Category' required>\r\n                                        <option value=\"Headphones\">Headphones</option>\r\n                                        <option value=\"Speakers\">Speaker</option>\r\n                                        <option value=\"Smart Device\">Smart Device</option>\r\n                                        <option value=\"Mobile Phone\">Mobile Phone</option>\r\n                                        <option value=\"Camera\">Camera</option>\r\n                                        <option value=\"Smart Watch\">Smart Watch</option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div className=\"form-input\" type=\"Product Count In Stock:\">\r\n                                <label>Product Count In Stock: </label>\r\n                                    <input type=\"number\" name=\"countinstock\" placeholder='Count In Stock'\r\n                                        value={countInStock}\r\n                                        onChange={onCountInStockChange}\r\n                                        min=\"1\"\r\n                                        max=\"100\" required />\r\n                                </div>\r\n\r\n                                <div className=\"form-input\" type=\"Product Picture\">\r\n                                <label>Product Image: </label>\r\n                                    <input ref={inputFileRef} id=\"imgFile\" type=\"file\" accept=\".png, .jpg, .jpeg\"\r\n                                        name=\"photo\"\r\n                                        onChange={onPhotoChange} />\r\n                                </div>\r\n\r\n                                <br />\r\n\r\n                                <center>\r\n                                    <button type=\"submit\" className=\"button\" onClick={onSubmit}>Create</button>\r\n                                </center>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyShopAddProductScreen\r\n","import './BuyerOrders.css';\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst Orders = ({ _id, userId, productId, quantity, isPaid }) => {\r\n\r\n  const [user, setUser] = useState(null);\r\n  const [product, setProduct] = useState(null);\r\n\r\n  var orderPaid;\r\n  if (isPaid) {\r\n    orderPaid = \"Order paid\";\r\n  } else {\r\n    orderPaid = \"Order not paid\";\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      try {\r\n        const response = await fetch(`${backendUrl}/users/account/${userId}`);\r\n        const result = await response.json();\r\n        setUser(result);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    fetchUserData();\r\n  }, [userId])\r\n\r\n  useEffect(() => {\r\n    const fetchProductData = async () => {\r\n      try {\r\n        const response = await fetch(`${backendUrl}/products/${productId}`);\r\n        const result = await response.json();\r\n        setProduct(result);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    fetchProductData();\r\n  }, [productId])\r\n\r\n\r\n  return (\r\n    <div className=\"shoporders\">\r\n      <div className=\"orders-info\">\r\n        <p>Order ID : {_id}</p>\r\n\r\n        {user ? // Some userId's account have been deleted, so thats sometimes why we will get null\r\n          <div>\r\n            {/* <p className=\"info-name\">User ID = {userId}</p> */}\r\n            <p className='info-name'>Buyer's name : {user.name}</p>\r\n            {product ?\r\n              <div>\r\n                      <p className=\"info-name\">Product Name : {product.name}</p>\r\n                      <p className=\"info-name\">Product Quantity : {quantity}</p>\r\n                      <p className=\"info-price\">Total Price : RM{quantity*product.price}</p>\r\n\r\n\r\n              </div>\r\n              :\r\n              <div>\r\n                      <p className=\"info-name\">Product has been deleted</p>\r\n\r\n                </div>\r\n            }\r\n          </div>\r\n          :\r\n          <div>\r\n            {/* <p className=\"info-description\"></p> */}\r\n            <p className=\"info-name\">User has been deleted</p>\r\n            <p></p>\r\n            \r\n          </div>\r\n        }\r\n        \r\n        <p className=\"info-price\">{orderPaid}</p>\r\n        \r\n\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Orders","\r\nimport { Link } from 'react-router-dom'\r\nimport { useState, useEffect } from 'react';\r\nimport React from 'react';\r\n\r\nimport './MyShopOrdersScreen.css';\r\nimport Product from '../components/Product';\r\nimport Loading from '../components/Loading';\r\nimport Orders from '../components/BuyersOrders';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\nconst MyShopOrdersScreen = () => {\r\n\r\n    const [shop, setShop] = useState();\r\n    const [shopOrders , setShopOrders] = useState([]);\r\n  \r\n    const [loading, setLoading] = useState(true);\r\n  \r\n  \r\n    useEffect(() => {\r\n      const fetchShopData = async () => {\r\n        try {\r\n          const response = await fetch(`${backendUrl}/shops/${userData.userId}`);\r\n          const result = await response.json();\r\n  \r\n          setShop(result);\r\n          setLoading(false);\r\n  \r\n        } catch (error) {\r\n          console.log(\"failed fetch shop data\");\r\n          alert(\"An error has been occurred while trying to fetch shop data... Please check console.\");\r\n          console.log(error);\r\n        }\r\n      }\r\n      fetchShopData();\r\n      console.log(\"Fetch Data\");\r\n    }, []); // This UseEffect run when the page first time load\r\n  \r\n  \r\n    useEffect(() => {\r\n      const fetchShopOrders = async () => { \r\n        try {\r\n          const response = await fetch(`${backendUrl}/orders/seller/${shop._id}`); //Add ${} to get variable\r\n          const result = await response.json();\r\n  \r\n          setShopOrders(result);\r\n  \r\n        } catch (error) {\r\n          console.log(\"failed fetch orders data\");\r\n          alert(\"An error has been occurred while trying to fetch shop data... Please check console.\");\r\n          console.log(error);\r\n        }\r\n      }\r\n      if (shop != null) // Check if the shopData Null\r\n        fetchShopOrders();\r\n    }, [shop]); // This UseEffect run when the shopData loaded\r\n  \r\n  \r\n  \r\n  \r\n    // If data not loaded yet, display loading sign\r\n    if (loading) {\r\n      return <Loading />\r\n    }\r\n  \r\n    return (\r\n  \r\n      <div className=\"myshoporderscreen\">\r\n  \r\n        {/* Order List */}\r\n\r\n          <div className=\"order-content\">\r\n            <h2 align=\"center\" className=\"label\">Order List</h2>\r\n\r\n            <div className=\"productlist\">\r\n\r\n              {shopOrders.map((shopOrder) => (\r\n                  <Orders {...shopOrder} key={shopOrder._id} />                             \r\n              ))}\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n      </div>\r\n  \r\n    )\r\n  \r\n  \r\n  \r\n  }\r\n  \r\n  export default MyShopOrdersScreen\r\n  ","export default __webpack_public_path__ + \"static/media/Membershipgambar.fe18c0c2.png\";","import './MyProfileScreen.css';\r\nimport {useEffect, useState, useRef} from \"react\";\r\nimport auth from \"../authentication/auth\";\r\nimport axios from 'axios';\r\nimport {Link} from 'react-router-dom'\r\nimport logo from './Membershipgambar.png';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n\r\nconst MyProfileScreen = () => {\r\n\r\n    \r\n\t\r\n    const inputFileRef = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [address, setAddress] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [profilePhoto, setProfilePhoto] = useState('');\r\n    const [photo, setPhoto] = useState('');\r\n    const [imageHash, setImageHash] = useState('');\r\n    const [totalspent, settotalspent] = useState('');\r\n\r\n    const onEmailChange = (event) => {\r\n        setEmail(event.currentTarget.value);\r\n    }\r\n\r\n    const onPasswordChange = (event) => {\r\n        setPassword(event.currentTarget.value);\r\n    }\r\n\r\n    const onNameChange = (event) => {\r\n        setName(event.currentTarget.value);\r\n    }\r\n\r\n    const onAddressChange = (event) => {\r\n        setAddress(event.currentTarget.value);\r\n    }\r\n\r\n    const onPhoneChange = (event) => {\r\n        setPhone(event.currentTarget.value);\r\n    }\r\n\r\n    const onPhotoChange = (e) => {\r\n        setPhoto(e.target.files[0]);\r\n    }\r\n    const ontotalspentChange = (event) => {\r\n        settotalspent(event.currentTarget.value);\r\n    }\r\n\r\n    const fetchAccountInformation = async () => {\r\n        try {\r\n            if (auth.isAuthenticated()) {\r\n                const response = await fetch(`${backendUrl}/users/account/${auth.getUserData().userId}`);\r\n                const result = await response.json();\r\n\r\n                if (result) {\r\n                    setName(result.name);\r\n                    setEmail(result.email);\r\n                    setPhone(result.phone);\r\n                    setAddress(result.address);\r\n                    setProfilePhoto(result.imgUrl);\r\n                    setImageHash(Date.now());\r\n                    settotalspent(result.totalSpent);\r\n                \r\n                } else {\r\n                    throw \"Data error\";\r\n                }\r\n                setLoading(false);\r\n            } else {\r\n                throw \"Not authenticated\";\r\n            }\r\n        } catch (error) {\r\n            alert(\"An error has been occurred while trying to fetch data... Please check console.\");\r\n            console.log(error);\r\n        }\r\n    }\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (email !== \"\" && name !== \"\" && address !== \"\" && phone !== \"\") {\r\n            const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n            if (email && regex.test(email) !== false) {\r\n                const phoneregex = /^\\+60\\d{2}(\\d{7}|\\d{8})$/;\r\n                if (phoneregex.test(phone)) {\r\n                    const formData = new FormData();\r\n                    console.log(name);\r\n\r\n                    formData.append('email', email);\r\n                    formData.append('password', password);\r\n                    formData.append('name', name);\r\n                    formData.append('address', address);\r\n                    formData.append('phone', phone);\r\n                    formData.append('profile_pic', photo);\r\n\r\n                    axios.put(`${backendUrl}/users/${auth.getUserData().userId}`, formData, {\r\n                        headers: {\r\n                            'Content-Type': 'multipart/form-data'\r\n                        }\r\n                    }).then(res => {\r\n                        if (res.data.img) {\r\n                            setImageHash(Date.now());\r\n                            setProfilePhoto(res.data.img);\r\n                        }\r\n\r\n                        alert(\"your information has been updated!\");\r\n                    }).catch(error => {\r\n                        console.log(error);\r\n                    })\r\n\r\n                    setPhoto(null);\r\n                    document.getElementById(\"imgFile\").value = \"\";\r\n                } else {\r\n                    alert(\"your phone number should have this format -> +60123456789\");\r\n                }\r\n            } else {\r\n                alert(\"please insert a valid email\");\r\n            }\r\n        } else {\r\n            alert(\"Please fill in the blank\");\r\n        }\r\n    }\r\n\r\n    const onImgClick = () => {\r\n        inputFileRef.current.click();\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchAccountInformation();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <div className=\"loadingscreen\">\r\n            <div className=\"loading\"></div>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile\">\r\n            <div className=\"profile-nav\">\r\n                <div className=\"user-heading round\">\r\n                    <a href=\"#\" onClick={onImgClick}>\r\n                        <img\r\n                            src={`${process.env.PUBLIC_URL}/images/${profilePhoto}?${imageHash}`}\r\n                            onError={(e) => {\r\n                                e.target.onerror = null;\r\n                                e.target.src = 'https://bootdey.com/img/Content/avatar/avatar3.png'\r\n                            }} alt=\"\"/>\r\n                    </a>\r\n                    <h1>{name}</h1>\r\n                    <p>{email}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"account-information\">\r\n                <h1 className=\"text-center\">My Profile</h1>\r\n\r\n                <div className=\"container1\">\r\n                    <div className=\"column-1 box\">\r\n                        <form className=\"form\" method=\"POST\" encType=\"multipart/form-data\">\r\n                            <p type=\"Name:\">\r\n                                <input type=\"text\" name=\"name\" value={name} onChange={onNameChange}\r\n                                       placeholder=\"Full name\" required/>\r\n                            </p>\r\n                            <p type=\"Email:\">\r\n                                <input type=\"email\" name=\"email\" value={email} onChange={onEmailChange}\r\n                                       placeholder=\"Email address\" required/>\r\n                            </p>\r\n\r\n                            <p type=\"Password:\">\r\n                                <input type=\"password\" name=\"password\" value={password} onChange={onPasswordChange}\r\n                                       placeholder=\"Password\" required/>\r\n                            </p>\r\n\r\n                            <p type=\"Address:\">\r\n                                <input type=\"text\" name=\"address\" value={address} onChange={onAddressChange}\r\n                                       placeholder=\"Address\" required/>\r\n                            </p>\r\n\r\n                            <p type=\"Phone:\">\r\n                                <input type=\"text\" name=\"phone\" value={phone} onChange={onPhoneChange}\r\n                                       placeholder=\"Phone\" required/>\r\n                            </p>\r\n\r\n                            <p type=\"Profile Picture\">\r\n                                <input ref={inputFileRef} id=\"imgFile\" type=\"file\" accept=\".png, .jpg, .jpeg\"\r\n                                       name=\"photo\"\r\n                                       onChange={onPhotoChange}/>\r\n                            </p>\r\n\r\n                            <br/>\r\n\r\n                            <center>\r\n                                <button type=\"submit\" className=\"button3\" onClick={onSubmit}>Update</button>\r\n                            </center>\r\n                        </form>\r\n                    </div>\r\n\r\n                    <div className=\"column-2 box\">\r\n                        <h1>Membership</h1>\r\n                        <p>\r\n                            Uwu shopping site membership is an important element of a marketing program designed to\r\n                            build customer loyalty. By applying membership, you can get discounts and offers from us. So\r\n                            apply now!\r\n                            <br/><br/>\r\n                            <div className=\"text-center\">\r\n                                <Link to={'/membership'} className=\"Link\" type=\"button\">\r\n                                    <span><b>Apply Membership!</b></span>\r\n                                </Link>\r\n                            </div>\r\n                            <img className=\"logo\" src={logo} ></img>\r\n                            <b name=\"totalspent\" onChange={ontotalspentChange}>Your totalspent: {totalspent}</b>\r\n                            \r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyProfileScreen\r\n","import io from \"socket.io-client\";\r\n\r\nexport const socket = io(\"https://uwushoppingsite.herokuapp.com\");","import { useEffect, useState } from 'react';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\nimport './CommentSection.css';\r\n\r\n\r\nconst CommentSection = ({ author, streamId, socket, commentList, setCommentList }) => {\r\n\r\n  const [currentComment, setCurrentComment] = useState(\"\");\r\n\r\n  const writeComment = () => {\r\n    if (currentComment !== \"\") {\r\n      const commentData = {\r\n        room: streamId,\r\n        author: author,\r\n        message: currentComment,\r\n        time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n      };\r\n      socket.emit(\"write_comment\", commentData);\r\n      setCommentList((list) => [...list, commentData]);\r\n      setCurrentComment(\"\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"commentSection\">\r\n      <h2>Live Chats</h2>\r\n      <div className=\"comment-body\">\r\n        <ScrollToBottom className=\"comment-container\">\r\n          {commentList.map((commentContent, index) => {\r\n            return <div\r\n              key={index}\r\n              className=\"comment\"\r\n            >\r\n              <div>\r\n                <div className=\"comment-content\">\r\n                  <p className=\"author noselect\">{commentContent.author}</p>\r\n                  <p>{commentContent.message}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          })}\r\n        </ScrollToBottom>\r\n      </div>\r\n      <div className=\"comment-footer\">\r\n        <p className=\"noselect\">{author}</p>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Write your comments...\"\r\n          value={currentComment}\r\n          onChange={event => { setCurrentComment(event.target.value) }}\r\n          onKeyPress={event => {\r\n            event.key === \"Enter\" && writeComment();\r\n          }}\r\n        />\r\n        <button onClick={writeComment}>&#9658;</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CommentSection\r\n","import './ProductForSale.css';\r\n\r\nimport Product from \"../Product\";\r\n\r\nconst ProductForSale = ({ products, setShowProducts, startSale }) => {\r\n  return (\r\n    <div className=\"infobox\">\r\n      <div className=\"infobox-content\">\r\n        <h2>Select one For Sale</h2>\r\n        <div className=\"productList\">\r\n          {products.map(product => {\r\n            return <div key={product._id} onClick={() => startSale(product)}>\r\n              <Product {...product} />\r\n            </div>\r\n          })}\r\n        </div>\r\n\r\n        <button onClick={() => setShowProducts(false)} className=\"uwu-btn\">Cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductForSale\r\n","export default __webpack_public_path__ + \"static/media/auction-table.7bf3e2c5.png\";","import \"./StreamingScreen.css\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\n// Service\r\nimport { socket } from \"../service/socket\";\r\nimport { useTimer } from 'react-timer-hook';\r\n\r\n// Components\r\nimport Loading from \"../components/Loading\";\r\nimport CommentSection from \"../components/streaming/CommentSection\";\r\nimport ProductForSale from '../components/streaming/ProductForSale';\r\n\r\nimport AuctionTablePNG from './auction-table.png';\r\n\r\nimport backendUrl from \"../service/backendUrl\";\r\n\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nlet peerConnections = {};\r\nconst config = {\r\n  iceServers: [\r\n    {\r\n      \"urls\": \"stun:stun.l.google.com:19302\",\r\n    },\r\n    // { \r\n    //   \"urls\": \"turn:TURN_IP?transport=tcp\",\r\n    //   \"username\": \"TURN_USERNAME\",\r\n    //   \"credential\": \"TURN_CREDENTIALS\"\r\n    // }\r\n  ]\r\n};\r\n\r\n\r\nconst StreamingSellerScreen = () => {\r\n\r\n  // Condition booleans\r\n  const [started, setStarted] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Streaming Details\r\n  const [streamTitle, setStreamTitle] = useState(\"\");\r\n  const [streamId, setStreamId] = useState(\"\");\r\n\r\n  // Shop details\r\n  const [shop, setShop] = useState(null);\r\n\r\n  const [commentList, setCommentList] = useState([]);\r\n\r\n  const [isAuction, setIsAuction] = useState(false);\r\n\r\n\r\n  // UseEffect Callbacks\r\n\r\n  useEffect(() => {\r\n    if (streamId !== \"\") {\r\n      socket.emit(\"start_streaming\", streamId);\r\n      setStarted(true);\r\n    }\r\n  }, [streamId]);\r\n\r\n\r\n\r\n  // Socket functions\r\n  const startStreaming = async () => {\r\n\r\n    if (streamTitle !== \"\") {\r\n\r\n      // Create a new Streaming data into db\r\n      const streaming = {\r\n        title: streamTitle,\r\n        shopId: shop._id,\r\n        shopName: shop.shopName,\r\n        productId: \"\",\r\n        isAuction: isAuction,\r\n        isAuctionStarted: false,\r\n        minimumBid: 0,\r\n        bidderId: \"\",\r\n        bidderName: \"\",\r\n        isAuctionEnded: false\r\n      }\r\n\r\n      await axios.post(`${backendUrl}/streamings`, streaming)\r\n        .then(res => {\r\n          console.log(\"Streaming \" + res.data._id + \" has started\");\r\n          setStreamId(res.data._id);\r\n        }).catch(error => {\r\n          console.log(error);\r\n        });\r\n\r\n    }\r\n  }\r\n\r\n\r\n  const stopStreaming = async () => {\r\n\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: \"This streaming has been stopped by the streamer.\",\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    socket.emit(\"stop_streaming\", commentData);\r\n    setCommentList((list) => [...list, commentData]);\r\n\r\n\r\n    await axios.delete(`${backendUrl}/streamings/${streamId}`)\r\n      .then(res => {\r\n        // Video\r\n        var videoElement = document.querySelector(\"video\");\r\n        let stream = videoElement.srcObject;\r\n        stream.getTracks()[0].stop();\r\n        stream.getTracks()[1].stop();\r\n\r\n        // Peer connection\r\n        peerConnections = {};\r\n\r\n        // Socket\r\n        //socket.disconnect();\r\n\r\n      }).catch(error => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n\r\n  // Video and audio\r\n  // Get camera and microphone\r\n  const [audioSource, setAudioSource] = useState();\r\n  const [videoSource, setVideoSource] = useState();\r\n  const [deviceInfos, setDeviceInfos] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getStream()\r\n      .then(getDevices);\r\n  }, [audioSource, videoSource]);\r\n\r\n\r\n  function getDevices() {\r\n    navigator.mediaDevices.enumerateDevices()\r\n      .then(function (devices) {\r\n        setDeviceInfos(devices);\r\n      })\r\n      .catch(function (err) {\r\n        console.log(err.name + \": \" + err.message);\r\n      });\r\n  }\r\n\r\n  function getStream() {\r\n    if (window.stream) {\r\n      window.stream.getTracks().forEach(track => {\r\n        track.stop();\r\n      });\r\n    }\r\n\r\n    const constraints = {\r\n      audio: { deviceId: audioSource ? { exact: audioSource } : undefined },\r\n      video: { deviceId: videoSource ? { exact: videoSource } : undefined }\r\n    };\r\n    return navigator.mediaDevices\r\n      .getUserMedia(constraints)\r\n      .then(gotStream)\r\n      .catch(handleError);\r\n  }\r\n\r\n  function gotStream(stream) {\r\n    window.stream = stream;\r\n\r\n    var videoElement = document.querySelector(\"video\");\r\n    if (stream != null)\r\n      videoElement.srcObject = stream;\r\n  }\r\n\r\n  function handleError(error) {\r\n    console.error(\"Error: \", error);\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    //-------------------------- Get Shop data -------------------------------\r\n\r\n    const fetchShop = async () => {\r\n      try {\r\n        const response = await fetch(`${backendUrl}/shops/${userData.userId}`);\r\n        const result = await response.json();\r\n        setShop(result);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    if (shop == null)\r\n      fetchShop();\r\n\r\n    // ----------------------------- Socket --------------------------------\r\n\r\n    socket.on('connect', () => {\r\n      const roomID = socket.id;\r\n      console.log(roomID);\r\n    });\r\n\r\n    socket.on(\"answer\", (id, description) => {\r\n      console.log(\"viewer answer: \" + id);\r\n      peerConnections[id].setRemoteDescription(description);\r\n    });\r\n\r\n    socket.on(\"viewer_joined\", viewerId => {\r\n      console.log(\"viewer_joined: \" + viewerId);\r\n      const peerConnection = new RTCPeerConnection(config);\r\n      peerConnections[viewerId] = peerConnection;\r\n\r\n      var videoElement = document.querySelector(\"video\");\r\n      let stream = videoElement.srcObject;\r\n      stream.getTracks().forEach(track => peerConnection.addTrack(track, stream));\r\n\r\n      peerConnection.onicecandidate = event => {\r\n        if (event.candidate) {\r\n          socket.emit(\"candidate\", viewerId, event.candidate);\r\n        }\r\n      };\r\n\r\n      peerConnection\r\n        .createOffer()\r\n        .then(sdp => peerConnection.setLocalDescription(sdp))\r\n        .then(() => {\r\n          socket.emit(\"offer\", viewerId, peerConnection.localDescription);\r\n        });\r\n    });\r\n\r\n    socket.on(\"candidate\", (id, candidate) => {\r\n      peerConnections[id].addIceCandidate(new RTCIceCandidate(candidate));\r\n    });\r\n\r\n    socket.on(\"receive_comment\", (data) => {\r\n      setCommentList((list) => [...list, data]);\r\n    });\r\n\r\n    socket.on(\"auction_make_bid\", (data) => {\r\n      setBiddingnData(data);\r\n      console.log(data);\r\n    });\r\n\r\n    socket.on(\"disconnectPeer\", id => {\r\n      console.log(\"disconnectPeer id: \" + id);\r\n      delete peerConnections[id];\r\n    });\r\n  }, []);\r\n\r\n\r\n  // --------------------- Sell Product -----------------------\r\n  // Product\r\n  const [firstUpdate, setFirstUpdate] = useState(true);\r\n  const [productOnSale, setProductOnSale] = useState(null);\r\n  const [products, setProducts] = useState([]);\r\n  const [showProducts, setShowProducts] = useState(false);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const response = await fetch(`${backendUrl}/products/seller/${shop._id}`);\r\n      const result = await response.json();\r\n      setProducts(result);\r\n      setShowProducts(true);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (firstUpdate === true) {\r\n      setFirstUpdate(false);\r\n      return;\r\n    }\r\n    if (showProducts === true)\r\n      setShowProducts(false);\r\n    if (isAuction === true)\r\n      return;\r\n    if (productOnSale !== null)\r\n      dbUpdateStreamingProductId();\r\n    else\r\n      dbRemoveStreamingProductId();\r\n  }, [productOnSale]);\r\n\r\n\r\n  const startSale = (product) => {\r\n    setProductOnSale(product);\r\n  }\r\n\r\n  const endSale = () => {\r\n    setProductOnSale(null);\r\n  }\r\n\r\n  const dbUpdateStreamingProductId = () => {\r\n    const streaming = {\r\n      productId: productOnSale._id\r\n    };\r\n\r\n    axios.put(`${backendUrl}/streamings/${streamId}`, streaming)\r\n      .then(res => {\r\n        console.log(res);\r\n        if (!isAuction)\r\n          socketEmitStartSale();\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  const dbRemoveStreamingProductId = () => {\r\n    const streaming = {\r\n      productId: \"\"\r\n    };\r\n\r\n    axios.put(`${backendUrl}/streamings/${streamId}`, streaming)\r\n      .then(res => {\r\n        console.log(res);\r\n        socketEmitEndSale();\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  const socketEmitStartSale = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: `${productOnSale.name} is for sale!`,\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    setCommentList((list) => [...list, commentData]);\r\n    socket.emit(\"start_sale\", commentData);\r\n  }\r\n\r\n  const socketEmitEndSale = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: `Sale Ended.`,\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    setCommentList((list) => [...list, commentData]);\r\n    socket.emit(\"end_sale\", commentData);\r\n  }\r\n\r\n\r\n  // --------------------- Auction Product -----------------------\r\n  const [isAuctionStarted, setIsAuctionStarted] = useState(false);\r\n  const [minimumBid, setMinimumBid] = useState(0);\r\n  const [biddingData, setBiddingnData] = useState(\r\n    {\r\n      bidderId: \"\",\r\n      bid: 0,\r\n      bidderName: \"\"\r\n    }\r\n  );\r\n  const [isAuctionEnded, setIsAuctionEnded] = useState(false);\r\n\r\n  const expiryTimestamp = new Date();\r\n  expiryTimestamp.setSeconds(expiryTimestamp.getSeconds() + 30);\r\n\r\n  const {\r\n    seconds,\r\n    minutes,\r\n    hours,\r\n    days,\r\n    isRunning,\r\n    start,\r\n    pause,\r\n    resume,\r\n    restart,\r\n  } = useTimer({ expiryTimestamp, autoStart: false, onExpire: () => auctionRoundEnd() });\r\n\r\n\r\n  const startAuction = () => {\r\n    setIsAuctionStarted(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isAuctionStarted === true)\r\n      dbUpdateAuctionStreaming();\r\n  }, [isAuctionStarted]);\r\n\r\n  const dbUpdateAuctionStreaming = () => {\r\n    const streaming = {\r\n      productId: productOnSale._id,\r\n      isAuctionStarted: isAuctionStarted,\r\n      minimumBid: biddingData.bid > minimumBid ? biddingData.bid : minimumBid,\r\n      bidderId: biddingData.bidderId,\r\n      bidderName: biddingData.bidderName,\r\n      isAuctionEnded: isAuctionEnded\r\n    };\r\n\r\n    console.log(streaming);\r\n\r\n    axios.put(`${backendUrl}/streamings/${streamId}`, streaming)\r\n      .then(res => {\r\n        console.log(res);\r\n        if (isAuctionEnded) {\r\n          emitSocketEndAuction();\r\n        } else if (biddingData.bid > minimumBid) {\r\n          setMinimumBid(biddingData.bid);\r\n          emitSocketAuctionNewHighestBid();\r\n          auctionResetTimer();\r\n        } else {\r\n          socketEmitStartAuction();\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  const socketEmitStartAuction = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: `${productOnSale.name} is for auction now!`,\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    setCommentList((list) => [...list, commentData]);\r\n    socket.emit(\"start_auction\", commentData);\r\n  }\r\n\r\n  const auctionNextRound = () => {\r\n    socketEmitAuctionNextRound();\r\n    const time = new Date();\r\n    time.setSeconds(time.getSeconds() + 30);\r\n    restart(time);\r\n  }\r\n\r\n  const socketEmitAuctionNextRound = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: \"Next Round! Bid now.\",\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    setCommentList((list) => [...list, commentData]);\r\n    socket.emit(\"auction_next_round\", commentData);\r\n  }\r\n\r\n  const auctionRoundEnd = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: \"Round End! No more Bid\",\r\n      time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\r\n    };\r\n    setCommentList((list) => [...list, commentData]);\r\n    socket.emit(\"write_comment\", commentData);\r\n  }\r\n\r\n  const auctionResetTimer = () => {\r\n    const time = new Date();\r\n    time.setSeconds(time.getSeconds() + 30);\r\n    restart(time);\r\n    pause();\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (biddingData.bid > minimumBid) {\r\n      dbUpdateAuctionStreaming();\r\n    }\r\n  }, [biddingData]);\r\n\r\n  const emitSocketAuctionNewHighestBid = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: `${biddingData.bidderName} made a bid! Current Highest bid: RM${biddingData.bid}.`,\r\n    };\r\n    setCommentList((list) => [...list, commentData]);\r\n    socket.emit(\"auction_new_highest_bid\", commentData);\r\n  }\r\n\r\n  const endAuction = () => {\r\n    setIsAuctionEnded(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isAuctionEnded === true) {\r\n      dbUpdateAuctionStreaming();\r\n      dbOrderAuctionItemForBidder();\r\n    }\r\n  }, [isAuctionEnded]);\r\n\r\n  const dbOrderAuctionItemForBidder = () => {\r\n    const order = {\r\n      userId: biddingData.bidderId,\r\n      shopId: productOnSale.shopId,\r\n      productId: productOnSale._id,\r\n      quantity: 1,\r\n      isAuctionItem: true,\r\n      bidPrice: minimumBid\r\n    };\r\n\r\n    axios.post(`${backendUrl}/orders`, order)\r\n      .then(res => {\r\n        console.log(res);\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n\r\n  const emitSocketEndAuction = () => {\r\n    const commentData = {\r\n      room: streamId,\r\n      author: \"System\",\r\n      message: `Congratulations! ${biddingData.bidderName} win the auction with RM${biddingData.bid}.`,\r\n    };\r\n    setCommentList((list) => [...list, commentData]);\r\n    socket.emit(\"end_auction\", commentData);\r\n  }\r\n\r\n\r\n  // ----------------------- Render ------------------------------\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n  return (\r\n    <div className=\"streaming\">\r\n\r\n      <div className=\"streaming-header\">\r\n        <h1>{streamTitle}</h1>\r\n        <div className=\"align-right\">\r\n          {started ?\r\n            <button onClick={stopStreaming} className=\"btn-stopstreaming\">Stop Streaming</button>\r\n            :\r\n            <div></div>\r\n          }\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"streaming-content\">\r\n\r\n        <div className=\"video-content\">\r\n          <video autoPlay width=\"100%\" height=\"480\" muted></video>\r\n          {isAuctionStarted ?\r\n            <div className=\"uwu-auctiontimer\">\r\n              {isRunning ?\r\n                < p className=\"uwu-auctiontimer-title\">Bid Now!!</p>\r\n                :\r\n                <p className=\"uwu-auctiontimer-title\">Wait For Next Round</p>\r\n              }\r\n              <p className=\"uwu-auctiontimer-time\">{minutes >= 10 ? \"\" + minutes : \"0\" + minutes}:{seconds >= 10 ? \"\" + seconds : \"0\" + seconds}</p>\r\n            </div>\r\n            :\r\n            <div></div>\r\n          }\r\n        </div>\r\n\r\n        {!started ?\r\n          <div className=\"sections\">\r\n            <div className=\"setupSection\">\r\n\r\n              {/* Streaming Title */}\r\n              <h2>Setup Streaming</h2>\r\n\r\n              <div>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Enter Your Streaming Title\"\r\n                  value={streamTitle}\r\n                  onChange={event => { setStreamTitle(event.target.value) }}\r\n                  className=\"uwu-input\"\r\n                />\r\n              </div>\r\n\r\n              {/* Video Setting */}\r\n              <div>Camera</div>\r\n              <div>\r\n                <select id=\"videoSource\" value={videoSource} onChange={(event) => setVideoSource(event.target.value)} className=\"uwu-select\">\r\n                  {deviceInfos ? deviceInfos.filter(device => device.kind === \"videoinput\").map(videoDevice => {\r\n                    return <option key={videoDevice.deviceId} value={videoDevice.deviceId}>{videoDevice.label}</option>\r\n                  })\r\n                    :\r\n                    <option>No video device found.</option>\r\n                  }\r\n                </select>\r\n              </div>\r\n\r\n              {/* Audio Setting */}\r\n              <div>Microphone</div>\r\n              <div>\r\n                <select id=\"audioSource\" value={audioSource} onChange={(event) => setAudioSource(event.target.value)} className=\"uwu-select\">\r\n                  {deviceInfos ? deviceInfos.filter(device => device.kind === \"audioinput\").map(audioDevice => {\r\n                    return <option key={audioDevice.deviceId} value={audioDevice.deviceId}>{audioDevice.label}</option>\r\n                  })\r\n                    :\r\n                    <option>No audio device found.</option>\r\n                  }\r\n                </select>\r\n              </div>\r\n\r\n              {/* Streaming Type */}\r\n              <div>Streaming Type</div>\r\n              <div>\r\n                <select id=\"audioSource\" value={isAuction} onChange={(event) => setIsAuction(event.target.value)} className=\"uwu-select\">\r\n                  <option value={false}>Normal</option>\r\n                  <option value={true}>Auction</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <button onClick={startStreaming} className=\"uwu-btn\">Start Streaming</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          :\r\n          <div className=\"sections\">\r\n\r\n            {!isAuction ?\r\n\r\n\r\n              // Normal Shop\r\n              <div className=\"streaming-shop\">\r\n                <h2>{shop.shopName}</h2>\r\n\r\n                <div className=\"streaming-shop-body\">\r\n                  <div className=\"streaming-shelf\">\r\n                    <img src=\"https://media.istockphoto.com/photos/empty-wooden-shelf-picture-id479473084?k=20&m=479473084&s=170667a&w=0&h=yHxDzAysnHsEmWtyL4dGeAqWGeqtA-EzdiRpBaCvkIE=\" alt=\"shelf\" className=\"shelf\"></img>\r\n                    {productOnSale ?\r\n                      <img\r\n                        src={`${process.env.PUBLIC_URL}/images/${productOnSale.imageUrl}?${Date.now()}`}\r\n                        onError={(e) => {\r\n                          e.target.onerror = null;\r\n                          e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n                        }}\r\n                        alt=\"\"\r\n                        className=\"streaming-product\" />\r\n                      :\r\n                      <div className=\"streaming-noproduct noselect\">Nothing on sale</div>\r\n                    }\r\n                  </div>\r\n\r\n                  {productOnSale ?\r\n                    <div className=\"productOnSale\">\r\n                      <h3>{productOnSale.name}</h3>\r\n                      <div className=\"productOnSale-detail\">\r\n                        <p>{productOnSale.countInStock} left</p>\r\n                        <p>RM {productOnSale.price}</p>\r\n                      </div>\r\n                    </div>\r\n                    :\r\n                    <div className=\"center grey noselect\">\r\n                      <p>To sell your products, Click \"Start Sale\" to choose one of your product for sale</p>\r\n                    </div>\r\n                  }\r\n\r\n                  {productOnSale ?\r\n                    <div>\r\n                      <button onClick={endSale} className=\"uwu-btn uwu-btn-red\">End Sale</button>\r\n                    </div>\r\n                    :\r\n                    <div>\r\n                      <button onClick={fetchProducts} className=\"uwu-btn\">Start Sale</button>\r\n                    </div>\r\n                  }\r\n\r\n                </div>\r\n              </div>\r\n              :\r\n\r\n\r\n              // Auction Shop\r\n              <div className=\"streaming-shop\">\r\n                <h2>{shop.shopName}</h2>\r\n\r\n                <div className=\"streaming-shop-body\">\r\n                  <div className=\"streaming-shelf\">\r\n                    <img src={AuctionTablePNG} alt=\"shelf\" className=\"shelf\"></img>\r\n                    {productOnSale ?\r\n                      <img\r\n                        src={`${process.env.PUBLIC_URL}/images/${productOnSale.imageUrl}?${Date.now()}`}\r\n                        onError={(e) => {\r\n                          e.target.onerror = null;\r\n                          e.target.src = 'https://static.vecteezy.com/system/resources/previews/004/945/593/non_2x/empty-price-tag-icon-shopping-product-label-sign-and-symbol-free-vector.jpg'\r\n                        }}\r\n                        alt=\"\"\r\n                        className=\"streaming-product\" />\r\n                      :\r\n                      <div className=\"streaming-noproduct noselect\">Nothing on auction</div>\r\n                    }\r\n                  </div>\r\n\r\n                  {productOnSale ?\r\n                    <div className=\"productOnSale\">\r\n                      <h3>{productOnSale.name}</h3>\r\n                      {!isAuctionStarted ?\r\n                        <div className=\"productOnSale-detail\">\r\n                          <p>Product Price: RM {productOnSale.price}</p>\r\n                          <p>{productOnSale.countInStock} left</p>\r\n                        </div>\r\n                        :\r\n                        <div className=\"productOnSale-detail\">\r\n                          <p>Current Highest Bid</p>\r\n                          <p>{minimumBid}</p>\r\n                        </div>\r\n                      }\r\n\r\n                    </div>\r\n                    :\r\n                    <div className=\"center grey noselect\">\r\n                      <p>Before starting an auction, Please choose an item for the auction.</p>\r\n                    </div>\r\n                  }\r\n\r\n\r\n                  {productOnSale ?\r\n                    <div>\r\n                      {isAuctionStarted ?\r\n                        <div>\r\n                          {isAuctionEnded ?\r\n                            <div className=\"auction-win-message noselect center\">\r\n                              The Winner is {biddingData.bidderName} !!\r\n                            </div>\r\n                            :\r\n                            <div>\r\n                              <div className=\"center grey noselect\">{isRunning ? \"Wait for someone bids...\" : \"Buyer will only able to bid after you click next round.\"}</div>\r\n                              <button onClick={auctionNextRound} className=\"uwu-btn\" disabled={isRunning}>Next Round</button>\r\n                              <button onClick={endAuction} className=\"uwu-btn uwu-btn-red\" disabled={isRunning}>End Auction</button>\r\n                            </div>\r\n                          }\r\n                        </div>\r\n                        :\r\n                        <div>\r\n                          <div className=\"center grey noselect\">{minimumBid != 0 ? \"Start Auction if you are ready.\" : \"Please Set Minimum Bid.\"}</div>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={minimumBid}\r\n                            onChange={(event) => setMinimumBid(event.target.value)}\r\n                            min=\"1\"\r\n                            className=\"uwu-input\"\r\n                          />\r\n                          <button onClick={fetchProducts} className=\"uwu-btn\">Change Auction Item</button>\r\n                          {minimumBid != 0 ?\r\n                            <button onClick={startAuction} className=\"uwu-btn uwu-btn-yellow\">Start Auction</button>\r\n                            :\r\n                            <div></div>\r\n                          }\r\n                        </div>\r\n                      }\r\n                    </div>\r\n                    :\r\n                    <div>\r\n                      <button onClick={fetchProducts} className=\"uwu-btn\">Choose Auction Item</button>\r\n                    </div>\r\n                  }\r\n\r\n                </div>\r\n              </div>\r\n            }\r\n\r\n            {showProducts ?\r\n              <ProductForSale\r\n                products={products}\r\n                setShowProducts={setShowProducts}\r\n                startSale={startSale}\r\n              />\r\n              :\r\n              <div></div>\r\n            }\r\n\r\n            <CommentSection\r\n              author={shop.shopName}\r\n              streamId={streamId}\r\n              socket={socket}\r\n              commentList={commentList}\r\n              setCommentList={setCommentList}\r\n            />\r\n\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default StreamingSellerScreen\r\n","import './CheckOutItem.css';\r\nimport {Link} from 'react-router-dom';\r\nimport { useState,useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\n\r\nconst CheckOutItem = ({_id, userId, productId, quantity, isPaid, calculateTotalPrice}) => {\r\n\r\n  const [qty, setQty] = useState(quantity);\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const calculateSubTotal = () => {\r\n   const subTotal = qty*parseFloat(product.price);\r\n   console.log(product.price);\r\n   calculateTotalPrice(subTotal);\r\n  }\r\n\r\n  const fetchData = async () =>{\r\n    try{\r\n      const response = await fetch(`${backendUrl}/products/${productId}`)\r\n      const result = await response.json();\r\n\r\n      setProduct(result);\r\n      setLoading(false);\r\n\r\n    } catch(error){\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (product != null)\r\n      calculateSubTotal();\r\n  }, [product]);\r\n\r\n\r\n  if (loading){\r\n    return <div></div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"checkoutitem\">\r\n\r\n      <p>{_id} </p>\r\n\r\n      <p>{product.name}</p>\r\n\r\n      <p className=\"checkoutitem-price\">RM{product.price}</p>\r\n\r\n      <p >{qty} </p>\r\n\r\n      <p className=\"checkoutitem-price\">RM{qty*product.price}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CheckOutItem","import './CheckOutScreen.css';\r\nimport { useState, useEffect } from 'react';\r\nimport CheckOutItem from '../components/CheckOutItem';\r\nimport axios from 'axios';\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nconst CheckOutScreen = (props) => {\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [userInfo, setUserInfo] = useState([]);\r\n\r\n  const [userId, setUserId] = useState(userData.userId);\r\n\r\n  const [checkOutItems, setCheckOutItems] = useState([]);\r\n\r\n  const [totalPrice, settotalPrice] = useState(0);\r\n\r\n  const [showMessage, setShowMessage] = useState(false);\r\n\r\n  const [totalSpent, settotalSpent] = useState();\r\n\r\n  const returnMyOrderScreen = async () => {\r\n    props.history.push(\"/myorder\");\r\n  }\r\n\r\n  const makePayment = async () => {\r\n    updateOrderIsPaid()\r\n    calculateTotalSpent()\r\n  }\r\n\r\n  const fetchUserData = async () => {\r\n    try {\r\n\r\n      const response = await fetch(`${backendUrl}/users/account/${userId}`);\r\n      const result = await response.json();\r\n\r\n      setUserInfo(result);\r\n      setLoading(false);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const fetchCheckOut = async () => {\r\n    try {\r\n\r\n      const response = await fetch(`${backendUrl}/orders/unpaid/${userData.userId}`);\r\n      const result = await response.json();\r\n      console.log(result)\r\n\r\n      setCheckOutItems(result);\r\n      setLoading(false);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const updateOrderIsPaid = () => {\r\n    const order = {\r\n      isPaid: true\r\n    };\r\n\r\n    axios.put(`${backendUrl}/orders/paid/${userData.userId}`, order)\r\n      .then(res => {setShowMessage(true)\r\n        console.log(res);\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  const updateUserTotalSpent = () => {\r\n    const user = {\r\n      totalSpent: totalSpent\r\n    };\r\n      \r\n    axios.put(`${backendUrl}/users/totalSpent/${userData.userId}`, user)\r\n      .then(res => {\r\n        console.log(res);\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    }    \r\n\r\n  const calculateTotalPrice = (subTotal) => {\r\n    var newTotal = totalPrice + subTotal;\r\n    settotalPrice(newTotal);\r\n  }\r\n\r\n  const calculateTotalSpent = () => {\r\n    var newTotalSpent = totalPrice + userInfo.totalSpent;\r\n    settotalSpent(newTotalSpent);\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchUserData();\r\n  }, [userId]);\r\n\r\n  useEffect(() => {\r\n    fetchCheckOut();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    updateUserTotalSpent();\r\n  }, [totalSpent]);\r\n\r\n  if (loading) {\r\n    return <div className=\"loadingscreen\">\r\n      <div className=\"loading\"></div>\r\n    </div>\r\n  }\r\n\r\n  return <div className=\"cartscreen\">\r\n\r\n    {/* Header */}\r\n    <h2 className=\"cartscreen-header\">Invoice</h2>\r\n\r\n    <h3 className=\"cartscreen-header\">Basic Information</h3>\r\n\r\n    {/* Content */}\r\n    <div className=\"cartscreen-content\">\r\n      <div className=\"cartscreen-left1\">\r\n        <div>\r\n          <p>Name: {userInfo.name}</p>\r\n          <p>Email: {userInfo.email}</p>\r\n          <p>Address: {userInfo.address}</p>\r\n          <p>Phone Number: {userInfo.phone}</p>\r\n\r\n          <button className=\"cartscreen-btn\" onClick={makePayment} >Make Payment</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"cartscreen-right1\">\r\n        <div className=\"cartscreen-info\">\r\n          {\r\n            checkOutItems.map((checkOutItem) => {\r\n              return <CheckOutItem key={checkOutItem._id} {...checkOutItem} calculateTotalPrice={calculateTotalPrice}></CheckOutItem>\r\n            })\r\n          }\r\n          <p>Grand Total:</p>\r\n          <p>RM{totalPrice}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    {showMessage ? \r\n    <div className=\"message\">\r\n      <div className=\"message-content\">\r\n        <h2>Thank You!</h2>\r\n        <p>Your payment is made</p>\r\n        <p>You can view your order history in MyOrder.</p>\r\n        <button onClick={returnMyOrderScreen}>OK</button>\r\n      </div>\r\n    </div>\r\n    : \r\n    <div></div>\r\n    }\r\n  </div>\r\n}\r\n\r\n\r\nexport default CheckOutScreen","import './membership.css';\r\nimport {useEffect, useState, useRef} from \"react\";\r\nimport auth from \"../authentication/auth\";\r\n\r\nimport backendUrl from '../service/backendUrl';\r\n\r\nconst Membership=()=>{\r\n\tconst [rank, setRank] = useState('');\r\n\tconst onRankChange = (event) => {\r\n        setRank(event.currentTarget.value);\r\n    }\r\n\tconst [label, setLabel] = useState('');\r\n\tconst onLabelChange = (event) => {\r\n        setLabel(event.currentTarget.value);\r\n\t}\r\n// }\r\nconst fetchData = async () =>{\r\n    try{\r\n      const response = await fetch(`${backendUrl}/users/account/${auth.getUserData().userId}`);\r\n      const result = await response.json();\r\n\t//   console.log(result);\r\n\r\n\t  if(result){\r\n\t\r\n\r\n\t\tif(result.totalSpent<100){\r\n\t\t\tconsole.log(result.totalSpent)\r\n\t\t\tsetRank(\"basic\")\r\n\t\t\tsetLabel(\"basic\")\r\n\t\t} else if(result.totalSpent>=100&&result.totalSpent<500){\r\n\t\t\tsetRank(\"Bronze\")\r\n\t\t\tsetLabel(\"Bronze\")\r\n\r\n\t\t}else if(result.totalSpent>=500&&result.totalSpent<2000){\r\n\t\t\tsetRank(\"Silver\")\r\n\t\t\tsetLabel(\"Silver\")\r\n\t\t\t\r\n\t\t}else if(result.totalSpent>=2000){\r\n\t\t\tsetRank(\"Gold\")\r\n\t\t\tsetLabel(\"Gold\")\r\n\t  }}\r\n\r\n    //   setProduct(result);\r\n    //   setLoading(false);\r\n\r\n    } catch(error){\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n// const Membership = () => {\r\n\t\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    return (\r\n\t\t<div className=\"profile\">\r\n\t\t<div className=\"account-information\">\r\n\t\t\t<h1 className=\"title mem\">Membership</h1>\r\n\t\t\t<h2 class=\"member\"name=\"label\"onChange={onLabelChange}>{label}</h2>\r\n\t\t\t<div className=\"column-1 box memberbox\">\r\n\t\t\t\t<b name=\"rank\" onChange={onRankChange}>Congratulations! You just recieved a {rank} membership.</b>\r\n\t\t\t\t<b > Contact 0185721698 for more info from our customer service</b>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n    )\r\n}\r\n\r\nexport default Membership","import './Navbar.css'\r\nimport {Link} from 'react-router-dom';\r\nimport auth from '../authentication/auth';\r\n\r\nimport logo from '../screens/uwupic.png';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\nconst Navbar = ({click}) => {\r\n\r\n  const logout = () => {\r\n    auth.logout(()=>{\r\n      window.location.reload(false);\r\n    })\r\n  }\r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      {/* logo */}\r\n      <div className=\"navbar-logo\">\r\n        <Link to=\"/\">\r\n          <img src={logo} alt=\"logo\"/>\r\n          UWU Shopping Site\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Links */}\r\n      <ul className=\"navbar-links\">\r\n        <li>\r\n          <Link to=\"/\">\r\n            Home\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/myshop\">\r\n            MyShop\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/myorder\" className=\"order-link\">\r\n            <i className=\"fas fa-shopping-cart\"></i>\r\n            <span>\r\n              MyOrder\r\n              <span className=\"navbar-cartbadge\">0</span>\r\n            </span>\r\n          </Link>\r\n        </li>\r\n        <li className=\"space\">\r\n          <div></div>\r\n        </li>\r\n        <li>\r\n          {auth.isAuthenticated() ? (\r\n            <Link to=\"/myprofile\" className=\"username\">\r\n              {userData.name}\r\n            </Link>\r\n          ) : (\r\n            <div></div>\r\n          )}\r\n        </li>\r\n        <li>\r\n          {auth.isAuthenticated() ? (\r\n            <Link to=\"/\" onClick={logout} className=\"signup\">\r\n              Logout\r\n            </Link>\r\n          ) : (\r\n            <Link to=\"/login\" className=\"signup\">\r\n              Sign In\r\n            </Link>\r\n          )}\r\n          \r\n        </li>\r\n\r\n      </ul>\r\n\r\n      {/* Hamburger menu */}\r\n      <div className=\"hamburger-menu\" onClick={click}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n\r\n    </nav>\r\n  )\r\n  \r\n}\r\n\r\nexport default Navbar;\r\n","import './BackDrop.css';\r\n\r\nconst BackDrop = ({show, click}) => {\r\n  return show && <div className=\"backdrop\" onClick={click}></div>\r\n}\r\n\r\nexport default BackDrop\r\n","import './SideDrawer.css';\r\nimport { Link } from 'react-router-dom';\r\nimport auth from '../authentication/auth';\r\n\r\nconst userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\n\r\nconst SideDrawer = ({show, click}) => {\r\n  const sideDrawerClass = [\"sidedrawer\"];\r\n\r\n  if(show) {\r\n    sideDrawerClass.push(\"show\");\r\n  }\r\n\r\n  const logout = () => {\r\n    auth.logout(()=>{\r\n      window.location.reload(false);\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className={sideDrawerClass.join(\" \")}>\r\n      <ul className=\"sidedrawer-links\" onClick={click}>\r\n        <li>\r\n          <Link to=\"/\">Home</Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/myshop\">MyShop</Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/myorder\">\r\n            <i className=\"fas fa-shopping-cart\"></i>\r\n            <span>\r\n              MyOrder\r\n              <span className=\"sidedrawer-cartbadge\">0</span>\r\n            </span>\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          {auth.isAuthenticated() ? (\r\n            <Link to=\"/myprofile\">\r\n              {userData.name}\r\n            </Link>\r\n          ) : (\r\n            <div></div>\r\n          )}\r\n        </li>\r\n        <li>\r\n          {auth.isAuthenticated() ? (\r\n            <Link to=\"/\" onClick={logout}>\r\n              Logout\r\n            </Link>\r\n          ) : (\r\n            <Link to=\"/login\">\r\n              Sign In\r\n            </Link>\r\n          )}\r\n          \r\n        </li>\r\n        \r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SideDrawer\r\n","import './App.css';\r\nimport { useState } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\n\r\n// Authentication\r\nimport { ProtectedRoute } from './authentication/protectedRoute';\r\n\r\n// Screens\r\nimport LoginScreen from './screens/LoginScreen';\r\nimport HomeScreen from './screens/HomeScreen';\r\nimport ProductScreen from './screens/ProductScreen';\r\nimport MyOrderScreen from './screens/MyOrderScreen';\r\nimport RegisterScreen from './screens/RegisterScreen';\r\nimport MyShopScreen from './screens/MyShopScreen';\r\nimport EditMyShopScreen from './screens/EditMyShopScreen';\r\nimport CreateMyShopScreen from './screens/CreateMyShopScreen';\r\nimport MyShopEditProductScreen from './screens/MyShopEditProductScreen';\r\nimport MyShopAddProductScreen from './screens/MyShopAddProductScreen';\r\nimport MyShopOrdersScreen from './screens/MyShopOrdersScreen';\r\nimport MyProfileScreen from './screens/MyProfileScreen';\r\nimport StreamingSellerScreen from './screens/StreamingSellerScreen';\r\nimport StreamingBuyerScreen from './screens/StreamingBuyerScreen';\r\nimport CheckOutScreen from './screens/CheckOutScreen';\r\nimport Membership from './screens/Membership';\r\n\r\n// Components\r\nimport Navbar from './components/Navbar';\r\nimport BackDrop from './components/BackDrop';\r\nimport SideDrawer from './components/SideDrawer';\r\n\r\n\r\nfunction App() {\r\n  const [sideToggle, setSideToggle] = useState(false);\r\n\r\n  return (\r\n    <Router>\r\n\r\n      <Navbar click={()=>setSideToggle(true)}/>\r\n      <SideDrawer show={sideToggle} click={()=>setSideToggle(false)}/>\r\n      <BackDrop show={sideToggle} click={()=>setSideToggle(false)}/>\r\n\r\n      <main>\r\n        <Switch>\r\n          {/* Pages */}\r\n          <Route exact path=\"/login\" component={LoginScreen} ></Route>\r\n          <Route exact path=\"/register\" component={RegisterScreen}></Route>\r\n          <Route exact path=\"/\" component={HomeScreen}></Route>\r\n          <Route exact path=\"/product/:id\" component={ProductScreen}></Route>\r\n          <Route exact path=\"/streamingbuyer/:streamingId\" component={StreamingBuyerScreen}></Route>\r\n          \r\n          \r\n          {/* Pages that require login */}\r\n          <ProtectedRoute exact path=\"/myorder\" component={MyOrderScreen} />\r\n          <ProtectedRoute exact path=\"/myshop\" component={MyShopScreen} />\r\n          <ProtectedRoute exact path=\"/myshop/createmyshop\" component={CreateMyShopScreen} />\r\n          <ProtectedRoute exact path=\"/myshop/editmyshop\" component={EditMyShopScreen} />\r\n          <ProtectedRoute exact path=\"/myshop/addproduct\" component={MyShopAddProductScreen} />\r\n          <ProtectedRoute exact path=\"/myshop/editproduct/:id\" component={MyShopEditProductScreen} />\r\n          <ProtectedRoute exact path=\"/myshop/orders\" component={MyShopOrdersScreen} />\r\n          <ProtectedRoute exact path=\"/myprofile\" component={MyProfileScreen} />\r\n          <ProtectedRoute exact path=\"/streamingseller\" component={StreamingSellerScreen}></ProtectedRoute>\r\n          <ProtectedRoute exact path=\"/checkout\" component={CheckOutScreen}></ProtectedRoute>\r\n\r\n          <Route exact path=\"/membership\" component={Membership} /> \r\n          \r\n          {/* <ProtectedRoute exact path=\"/\" component={HomeScreen} /> */}\r\n\r\n          {/* If page not found */}\r\n          <Route path=\"*\" component={() => \"404 NOT FOUND\"} />\r\n        </Switch>\r\n      </main>\r\n\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n// import { Provider } from 'react-redux';\n// import store from './redux/store';\n\nReactDOM.render(\n  // <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n  // </Provider>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}